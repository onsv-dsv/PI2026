<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_822ec9c2b4a60dd3bf8bc3aaa868cdac {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
</head>
<body>
    
    
    <style>
      .leaflet-interactive.zs-buffer { pointer-events: none !important; }

      .searchbar-wrap {
        position: fixed; right: 20px; bottom: 140px;
        z-index: 10000; background: rgba(255,255,255,0.95);
        border: 1px solid #e5e7eb;
        padding: 10px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        font-family: system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
        display: flex; flex-direction: column; gap: 8px; min-width: 300px; max-width: 92vw;
      }

      .searchbar-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
      .searchbar-title { font-weight: 700; font-size: 14px; color: #111827; }
      .toggle-btn { border: 0; border-radius: 8px; padding: 4px 10px; font-weight: 700; cursor: pointer; background: #111827; color: #fff; }
      .tools-body { display: flex; flex-direction: column; gap: 8px; }

      .row-flex { display:flex; gap:8px; align-items:center; }
      .col-flex { display:flex; flex-direction:column; gap:8px; }
      .row-flex input, .col-flex input { border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; font-size:13px; flex:1; }
      .row-flex button, .col-flex button { border:0; border-radius:8px; padding:6px 10px; font-weight:600; cursor:pointer; }
      .btn-dark  { background:#111827; color:#fff; }
      .btn-gray  { background:#6b7280; color:#fff; }
      .btn-green { background:#065f46; color:#fff; }
      .btn-red   { background:#991b1b; color:#fff; }
      .pill { font-size:12px; padding:4px 8px; border-radius:999px; }
      .dist-on-line { background: rgba(17,24,39,0.85); color: #fff; padding: 2px 6px; border-radius: 6px; font-size: 12px; border: 1px solid rgba(255,255,255,0.2); }

      .searchbar-wrap.collapsed { padding: 8px 10px; }
      .searchbar-wrap.collapsed .tools-body { display: none; }

      @media (max-width: 480px) {
        .searchbar-wrap { right: 12px; bottom: 12px; min-width: 240px; }
      }
    </style>
    
    
    <div style="
        position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
        z-index: 9999; background: rgba(255,255,255,0.9);
        padding: 8px 14px; border-radius: 8px; font-weight: 600;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;">
        LIMA-CA√ëETE-MALA
    </div>
    
    
    <div id="legend-box" style="
        position: fixed; bottom: 20px; right: 20px; z-index: 9999;
        background: rgba(255,255,255,0.9); padding: 10px 12px; border-radius: 8px;
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15); line-height: 1.4; min-width: 240px;">
        <div style="font-weight: 600; margin-bottom: 6px;">Leyenda</div>
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:4px;">
            <span style="display:inline-block; width:14px; height:14px; background:#1d4ed8; border-radius:50%;"></span>
            <span>Azul: Nuevas</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px;">
            <span style="display:inline-block; width:14px; height:14px; background:#7dd3fc; border-radius:50%;"></span>
            <span>Celeste: Mantenimiento</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px; margin-top:4px;">
            <span style="display:inline-block; width:14px; height:14px; background:#d90429; border-radius:50%;"></span>
            <span>Rojo: Siniestro fatal</span>
        </div>
    </div>
    
    
            <div class="folium-map" id="map_822ec9c2b4a60dd3bf8bc3aaa868cdac" ></div>
        
    
      <div class="searchbar-wrap" id="zs_tools">
        <div class="searchbar-header">
          <div class="searchbar-title">Herramientas</div>
          <button id="btn_toggle_box" class="toggle-btn" title="Mostrar/Ocultar">‚ØÜ Ocultar</button>
        </div>

        <div class="tools-body">
          <div class="col-flex">
            <input id="q_name" type="text" placeholder="Buscar por nombre">
            <input id="q_code" type="text" placeholder="Buscar por c√≥digo">
          </div>
          <div class="row-flex">
            <button id="btn_search" class="btn-dark">Buscar</button>
            <button id="btn_clear" class="btn-gray">Limpiar</button>
          </div>

          <hr style="border:none;border-top:1px solid #e5e7eb; margin:4px 0;">

          <div class="col-flex" title="Coordenadas en grados decimales">
            <input id="q_x" type="text" placeholder="Longitud Ejem: -77.15435">
            <div class="row-flex">
              <input id="q_y" type="text" placeholder="Latitud Ejem: -15.54648">
              <button id="btn_xy_go" class="btn-green" title="Centrar en coordenadas">üîç</button>
              <button id="btn_xy_clear" class="btn-red"   title="Quitar pin de coordenadas">‚úï</button>
            </div>
          </div>

          <div class="row-flex">
            <button id="btn_measure_toggle" class="btn-dark pill" title="Medir distancia">Medir distancia</button>
            <span id="measure_state" style="font-size:12px; color:#991b1b">Desactivado</span>
          </div>

          <div class="row-flex">
            <button id="btn_open_gmaps" class="btn-dark" title="Abrir esta vista en Google Maps">Abrir en Google Maps</button>
          </div>
        </div>
      </div>
    
</body>
<script>
    
    
            var map_822ec9c2b4a60dd3bf8bc3aaa868cdac = L.map(
                "map_822ec9c2b4a60dd3bf8bc3aaa868cdac",
                {
                    center: [-12.659701538461537, -76.62959523076924],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 14,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );
            L.control.scale().addTo(map_822ec9c2b4a60dd3bf8bc3aaa868cdac);

            

        
    
            var tile_layer_28c190c52f7d8208c952636f6e674cee = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 19,
  "maxNativeZoom": 19,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_28c190c52f7d8208c952636f6e674cee.addTo(map_822ec9c2b4a60dd3bf8bc3aaa868cdac);
        
    
            var feature_group_3ae58b456e59a96685e183f681c14ce8 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_394375a1c3e330d2561b2167aa657899_styler(feature) {
            switch(feature.properties.IDDPTO) {
                default:
                    return {"color": "#222222", "fill": true, "fillColor": "#9ca3af", "fillOpacity": 0.3, "opacity": 1.0, "weight": 2.5};
            }
        }

        function geo_json_394375a1c3e330d2561b2167aa657899_onEachFeature(feature, layer) {

            layer.on({
            });
        };
        var geo_json_394375a1c3e330d2561b2167aa657899 = L.geoJson(null, {
                onEachFeature: geo_json_394375a1c3e330d2561b2167aa657899_onEachFeature,
            
                style: geo_json_394375a1c3e330d2561b2167aa657899_styler,
            ...{
}
        });

        function geo_json_394375a1c3e330d2561b2167aa657899_add (data) {
            geo_json_394375a1c3e330d2561b2167aa657899
                .addData(data);
        }
            geo_json_394375a1c3e330d2561b2167aa657899_add({"features": [{"geometry": {"coordinates": [[[[-76.59889098599996, -12.583603979999964], [-76.59673148599995, -12.583647729999939], [-76.59528685999999, -12.583458229999906], [-76.59451348599993, -12.583487354999932], [-76.59314186099988, -12.583370479999928], [-76.59174110999999, -12.58303497999998], [-76.59012136099989, -12.58280147999983], [-76.58869123599987, -12.582903604999842], [-76.58711536099997, -12.583341354999902], [-76.58537898599991, -12.584523230999935], [-76.58383223599998, -12.585603105999894], [-76.58157048499999, -12.586857979999934], [-76.58037386099994, -12.587091480999959], [-76.57906060999989, -12.587310354999943], [-76.57793711099993, -12.587660604999883], [-76.57721773599991, -12.587935479999885], [-76.57598173599996, -12.588273354999956], [-76.57482898599989, -12.588638229999958], [-76.57361786099995, -12.58925110499996], [-76.57304873499993, -12.589966104999974], [-76.5724213609999, -12.59089997999996], [-76.57204211099997, -12.591512855999952], [-76.57154586099995, -12.591862979999974], [-76.57071411099997, -12.5922862299999], [-76.56970723599994, -12.59227160599994], [-76.56848148599988, -12.592096479999896], [-76.56756223599996, -12.592096479999896], [-76.56591335999991, -12.592534229999899], [-76.56391898599992, -12.593195355999967], [-76.56251348599983, -12.593395105999889], [-76.56229661099991, -12.593350605999944], [-76.56144823499989, -12.593176229999926], [-76.5602517349999, -12.592913479999936], [-76.5593907359999, -12.592577979999874], [-76.55804836099998, -12.591921355999887], [-76.55674961099999, -12.591468979999945], [-76.55616111099994, -12.591306605999932], [-76.55510073599987, -12.590768605999926], [-76.55431286099997, -12.59047673099991], [-76.5535832359999, -12.590360104999945], [-76.55247423599997, -12.591191855999853], [-76.55173010999994, -12.592111105999948], [-76.55069398499995, -12.593453480999926], [-76.55045723599989, -12.59372272999991], [-76.54962886099992, -12.594664605999867], [-76.54843223599994, -12.595452480999938], [-76.54803098499997, -12.5958716049999], [-76.54743998499998, -12.596488604999877], [-76.54698773599995, -12.597276604999877], [-76.54641323599998, -12.598460104999845], [-76.54617536099988, -12.598949979999873], [-76.54592248499995, -12.599771854999915], [-76.54512011099996, -12.601593730999866], [-76.5444309859999, -12.602092729999924], [-76.54364611099999, -12.602660979999882], [-76.54243498599993, -12.603536480999935], [-76.54164711099997, -12.604222354999933], [-76.54147198599992, -12.605097855999873], [-76.54142823599994, -12.606221479999874], [-76.54136986099991, -12.607228229999862], [-76.54163248599997, -12.607811979999951], [-76.54236211099987, -12.608541480999975], [-76.54329598599998, -12.609767229999875], [-76.54377748499991, -12.61067197999995], [-76.54465298499997, -12.612277105999965], [-76.54501773599998, -12.613210979999963], [-76.54519048599997, -12.614013605999958], [-76.54513273599997, -12.614468729999942], [-76.54580573599998, -12.615078854999979], [-76.54621436099995, -12.616041729999893], [-76.54666673599996, -12.617267480999885], [-76.54706073599988, -12.618857980999962], [-76.54744010999991, -12.61954385499996], [-76.54819886099989, -12.620754979999958], [-76.54891848599993, -12.621399104999966], [-76.54942461099989, -12.621849354999938], [-76.5497018609999, -12.622462229999826], [-76.54971636099998, -12.623571230999914], [-76.54960248499998, -12.623967729999947], [-76.54929323499994, -12.625044980999917], [-76.54887011099993, -12.626518729999816], [-76.54809686099998, -12.62802172999983], [-76.54719198599997, -12.629582979999952], [-76.54669586099999, -12.630662855999958], [-76.54673961099996, -12.631523730999959], [-76.54692936099991, -12.632238604999941], [-76.54741086099989, -12.632530604999943], [-76.54872411099996, -12.633201854999982], [-76.54954798599988, -12.633407729999874], [-76.55070873599993, -12.633697980999898], [-76.55177386099996, -12.634033604999956], [-76.55206111099989, -12.634199854999963], [-76.55280985999997, -12.634879855999884], [-76.55305798599994, -12.63565310599995], [-76.55327686099997, -12.6365286059999], [-76.55384586099996, -12.637608605999901], [-76.55432748599992, -12.638673730999926], [-76.55440298599996, -12.638784605999945], [-76.55469711099994, -12.639215855999907], [-76.55476523599998, -12.63931585599994], [-76.55486686099988, -12.63984435499998], [-76.55491110999998, -12.640074604999938], [-76.55501173599998, -12.640380854999933], [-76.55543636099992, -12.640643730999955], [-76.55570336099998, -12.640732729999854], [-76.55666223599991, -12.64105223099989], [-76.55790248599988, -12.641592104999972], [-76.55876811099989, -12.642094854999925], [-76.55995986099992, -12.6428762299999], [-76.56073323599998, -12.643707979999931], [-76.56168086099996, -12.644777604999945], [-76.56197361099998, -12.645327730999895], [-76.56204048599994, -12.645904355999903], [-76.56209036099989, -12.646334480999883], [-76.56235298599995, -12.647020354999881], [-76.56306061099997, -12.647843730999966], [-76.56421036099988, -12.649300105999941], [-76.56486273599995, -12.64974897999997], [-76.56543673499993, -12.650334854999926], [-76.56582585999996, -12.651032979999968], [-76.56600323599991, -12.651850105999927], [-76.56601161099996, -12.65205948099998], [-76.5662416099999, -12.654014104999817], [-76.56634660999998, -12.65480210499993], [-76.56639486099988, -12.655163854999898], [-76.56704648599998, -12.656773604999955], [-76.56761873599999, -12.657155104999902], [-76.5680812359999, -12.657463354999834], [-76.56930761099994, -12.65792335599997], [-76.56995911099995, -12.658804854999971], [-76.57003585999996, -12.66033785499991], [-76.57004548599997, -12.660929229999965], [-76.57007411099994, -12.662713980999968], [-76.57007411099994, -12.66409373099998], [-76.57057611099998, -12.665412104999973], [-76.57130061099997, -12.666929979999907], [-76.57222048499989, -12.670609104999926], [-76.57245036099982, -12.673751730999982], [-76.5724119859999, -12.674939854999877], [-76.57206711099991, -12.676434354999913], [-76.57099398599985, -12.678465604999928], [-76.56946098599991, -12.67911735599995], [-76.56583198599998, -12.679847605999953], [-76.56526560999998, -12.681671854999934], [-76.56460935999996, -12.683792979999907], [-76.56752736099997, -12.687884604999965], [-76.56880473599989, -12.689802729999883], [-76.57101823499988, -12.691595105999966], [-76.57118548599988, -12.691730479999933], [-76.57209173599989, -12.693658230999915], [-76.5722173609999, -12.695355480999865], [-76.57254686099998, -12.700800729999912], [-76.57526761099996, -12.705335979999916], [-76.57730861099998, -12.707831980999913], [-76.58025786099995, -12.710212855999941], [-76.58211535999999, -12.712448729999892], [-76.58320511099998, -12.71429498099991], [-76.5854724859999, -12.71633597999994], [-76.58887498599995, -12.718376980999949], [-76.59257661099991, -12.719972730999928], [-76.59263998599994, -12.719999979999955], [-76.59533786099996, -12.720984355999974], [-76.59749223599994, -12.721665979999955], [-76.59754986099989, -12.721917479999888], [-76.59754986099989, -12.722372104999863], [-76.59662598599994, -12.72380898099982], [-76.59562898499996, -12.72474735599991], [-76.59419198599988, -12.7259204799999], [-76.59344423599993, -12.727166729999908], [-76.59288873599996, -12.72838310599991], [-76.59270898599993, -12.729753354999957], [-76.59318061099998, -12.730494730999908], [-76.59385461099998, -12.731011355999954], [-76.5946183609999, -12.731168480999884], [-76.59538223599998, -12.731348354999966], [-76.59612348499991, -12.731864979999955], [-76.59655023599998, -12.73262872999993], [-76.5966394859999, -12.732781604999957], [-76.59702198599996, -12.733437479999964], [-76.5974489859999, -12.733706979999965], [-76.59819673599998, -12.733811480999918], [-76.59841473599988, -12.733841729999938], [-76.59974010999997, -12.734111354999925], [-76.60052723599995, -12.734494479999853], [-76.60153798599993, -12.735464730999922], [-76.60250823599984, -12.73639460499993], [-76.60392773499996, -12.73707035599989], [-76.60459223599997, -12.73705410599996], [-76.60505498599997, -12.736637104999943], [-76.60578273599998, -12.735464730999922], [-76.60626786099994, -12.735020105999979], [-76.60674061099996, -12.734746480999831], [-76.60703598499998, -12.734575354999947], [-76.60734598599998, -12.73429235499998], [-76.60743436099995, -12.734211605999974], [-76.60796573599993, -12.733726479999973], [-76.60909773599997, -12.73267535499997], [-76.6101083609999, -12.732513730999926], [-76.61138873599998, -12.732685604999915], [-76.61390836099991, -12.733039229999974], [-76.61504036099996, -12.73283710499993], [-76.61678123599995, -12.725456980999923], [-76.61837798499988, -12.724585104999903], [-76.61985773599997, -12.72408635499994], [-76.62002473599989, -12.724057355999946], [-76.62220198599994, -12.723338229999968], [-76.62532773499993, -12.721875230999956], [-76.62717323599992, -12.721010479999904], [-76.62850973499997, -12.720689479999976], [-76.62928473599993, -12.720943980999891], [-76.63008398599999, -12.721777355999961], [-76.63008198599994, -12.721488229999977], [-76.63009761099988, -12.721035104999885], [-76.6305078609999, -12.720472605999817], [-76.63078123599996, -12.720091854999907], [-76.6310273609999, -12.719683605999876], [-76.63118161099993, -12.719285230999958], [-76.63136323599997, -12.718876979999948], [-76.6315898609999, -12.718468729999927], [-76.63174411099993, -12.718070354999895], [-76.63191011099991, -12.71788873099996], [-76.63197248599994, -12.717662104999874], [-76.63206248599994, -12.717253979999953], [-76.63216986099991, -12.716855480999925], [-76.63255473599997, -12.716402355999946], [-76.63262698599982, -12.716355479999947], [-76.6326913609999, -12.716265479999947], [-76.63281048599998, -12.716263855999898], [-76.63303923599989, -12.716109355999947], [-76.63319536099993, -12.716037105999817], [-76.63348823599995, -12.715726605999976], [-76.6335801109999, -12.715636730999904], [-76.63365423599998, -12.71560935499997], [-76.63365236099992, -12.715455105999979], [-76.63378123499984, -12.715318355999955], [-76.6338711109999, -12.715001979999954], [-76.63389848599996, -12.714910105999934], [-76.63411523599996, -12.71446685599983], [-76.63473636099991, -12.713740230999917], [-76.63530473599997, -12.713066355999956], [-76.63564261099992, -12.712658229999931], [-76.63591598599999, -12.712339855999971], [-76.63622661099993, -12.71207622999998], [-76.63654886099994, -12.711802605999935], [-76.6368691109999, -12.711556605999931], [-76.63720698599997, -12.711347604999958], [-76.63752923599998, -12.711101604999897], [-76.63795898599994, -12.71073635499988], [-76.63810736099992, -12.710560604999898], [-76.63816011099993, -12.710492105999947], [-76.63822473599998, -12.710373104999974], [-76.63890036099991, -12.709519479999926], [-76.63924611099992, -12.709046854999883], [-76.63963873599988, -12.708601604999842], [-76.64007036099991, -12.708193355999981], [-76.64049998599995, -12.707828105999965], [-76.64092973599998, -12.707492229999957], [-76.64138861099991, -12.707109355999933], [-76.64172661099997, -12.706790979999937], [-76.64214061099995, -12.706414105999954], [-76.64224998599997, -12.706316354999956], [-76.64243161099995, -12.706134729999917], [-76.64248048599995, -12.70608985499996], [-76.64258786099992, -12.705953105999981], [-76.6429999849999, -12.70564260499998], [-76.64340423599998, -12.705414229999974], [-76.64381448599988, -12.705167979999942], [-76.64422848499999, -12.704939480999883], [-76.64470511099995, -12.70460160499988], [-76.6452734859999, -12.704191355999967], [-76.64545698599983, -12.704009729999939], [-76.64567773599998, -12.703873105999946], [-76.64584186099995, -12.70378123099988], [-76.64613473599996, -12.703445354999872], [-76.64649998599998, -12.702990230999887], [-76.64685748599999, -12.702654355999812], [-76.64726948599997, -12.70233597999993], [-76.64768161099994, -12.702070355999979], [-76.64808586099991, -12.701796854999827], [-76.64849798599988, -12.701568355999939], [-76.64891011099996, -12.701294979999943], [-76.64938673599988, -12.700984355999935], [-76.64981448599997, -12.70057622999991], [-76.65027536099996, -12.700210979999952], [-76.65072461099993, -12.69985547999994], [-76.65108986099995, -12.699509604999946], [-76.65127348599998, -12.699310479999895], [-76.65141011099996, -12.699290980999876], [-76.65141011099996, -12.699218729999927], [-76.65161136099994, -12.699017605999927], [-76.65188673599988, -12.698898480999901], [-76.65213673599999, -12.69903322999994], [-76.65213673599999, -12.699150354999972], [-76.65236911099993, -12.699501980999912], [-76.65289448599998, -12.699498104999975], [-76.65321873599999, -12.699812480999867], [-76.65351561099993, -12.70021685599994], [-76.65362886099996, -12.70030660499998], [-76.6538847359999, -12.700396479999938], [-76.65396661099993, -12.700369105999926], [-76.65404098599998, -12.700232480999887], [-76.65415036099995, -12.700078104999818], [-76.65410348599988, -12.700007854999967], [-76.65415035999996, -12.69991598099989], [-76.65413086099994, -12.699851604999878], [-76.65405661099993, -12.69976172999992], [-76.65410161099999, -12.699490230999913], [-76.65428511099992, -12.699470729999916], [-76.65462698599998, -12.699695480999935], [-76.65497848599989, -12.699955104999958], [-76.65507035999997, -12.699999980999905], [-76.65538286099996, -12.699953105999953], [-76.65541986099993, -12.699714854999968], [-76.65542773599998, -12.699619105999943], [-76.65551761099994, -12.699390604999962], [-76.65583986099995, -12.699435605999952], [-76.65618161099997, -12.69941410499996], [-76.65625386099993, -12.699296855999933], [-76.65638086099995, -12.699078104999955], [-76.65638086099995, -12.698898479999912], [-76.65624798599998, -12.698492354999871], [-76.65598636099998, -12.69809572999992], [-76.65573636099998, -12.69769135499996], [-76.65567186099997, -12.697509729999922], [-76.65545898599999, -12.697285104999935], [-76.65536323599997, -12.69693360499997], [-76.65543748599998, -12.69693360499997], [-76.65554686099995, -12.696814479999944], [-76.65562111099996, -12.69675198099992], [-76.6558867359999, -12.696749979999936], [-76.65600786099998, -12.696794980999925], [-76.65609961099995, -12.696857479999949], [-76.65632036099998, -12.696837730999846], [-76.65636523599989, -12.696701104999931], [-76.65653110999995, -12.696535104999953], [-76.65645511099996, -12.696294979999948], [-76.65631448599999, -12.695888730999911], [-76.65618348599997, -12.69549223099989], [-76.65595123599991, -12.69508785599993], [-76.65578123599988, -12.694679729999905], [-76.65576373599998, -12.694617354999878], [-76.65567186099997, -12.694572229999892], [-76.65566986099992, -12.694437480999909], [-76.65557811099995, -12.694283230999872], [-76.65548236099994, -12.693876980999903], [-76.65548048599999, -12.693609354999978], [-76.65555273599989, -12.693470730999877], [-76.6555507359999, -12.693136729999935], [-76.6555507359999, -12.69302735499997], [-76.65538473599997, -12.69289260499994], [-76.65515236099998, -12.692695354999955], [-76.65515236099998, -12.692578104999939], [-76.6550879859999, -12.692560480999873], [-76.65505073599996, -12.692505854999979], [-76.65461523599998, -12.692337854999948], [-76.65431048599999, -12.691996104999816], [-76.65416011099995, -12.69154485599995], [-76.65412886099995, -12.69113872999992], [-76.65413673599988, -12.690929854999979], [-76.65418161099996, -12.690640605999931], [-76.65405073499988, -12.690343604999953], [-76.65404886099998, -12.69008985499994], [-76.6541777359999, -12.689917979999905], [-76.65458198599998, -12.689851605999934], [-76.65482023599998, -12.689794979999931], [-76.65484773599991, -12.689605479999898], [-76.65471686099994, -12.68944335599997], [-76.65444136099995, -12.689373104999959], [-76.65408986099993, -12.689257854999937], [-76.6539609859999, -12.689150354999981], [-76.65382036099999, -12.688945354999817], [-76.65374411099992, -12.688554730999897], [-76.65382423599988, -12.688210980999884], [-76.65392573499992, -12.688039104999973], [-76.65409948599995, -12.687912105999942], [-76.65443948599989, -12.687882980999916], [-76.65473436099995, -12.688035104999926], [-76.65484573599986, -12.687933604999955], [-76.65479886099996, -12.687716855999952], [-76.65476948599996, -12.687482604999957], [-76.65473048599989, -12.687255854999933], [-76.65464061099993, -12.687050730999886], [-76.65448823599996, -12.686878854999975], [-76.65425798599989, -12.686662104999982], [-76.65410936099994, -12.686492229999885], [-76.65406248599999, -12.686320354999964], [-76.65406061099998, -12.686165979999885], [-76.65415223599996, -12.686003855999957], [-76.65436136099999, -12.685767605999956], [-76.6544257359999, -12.685794980999901], [-76.65472073599989, -12.685656230999882], [-76.65488473599999, -12.68553710599997], [-76.65494136099994, -12.685452980999969], [-76.6550214859999, -12.685292979999929], [-76.65522248599996, -12.685001980999857], [-76.6553124859999, -12.684818355999937], [-76.65535936099997, -12.68473060499997], [-76.65540036099998, -12.68462885599996], [-76.65577736099993, -12.684050730999843], [-76.65606048599989, -12.683660104999944], [-76.65624223599991, -12.68349610599995], [-76.65639061099995, -12.683458979999898], [-76.65679686099998, -12.683673855999928], [-76.65710348599998, -12.68391598099987], [-76.6575097359999, -12.684128854999926], [-76.65809761099996, -12.684089729999869], [-76.65828911099999, -12.683816355999966], [-76.65829686099994, -12.683527480999885], [-76.65825973599988, -12.683347605999927], [-76.65819336099997, -12.683185605999938], [-76.6581367359999, -12.683076229999926], [-76.65809961099995, -12.68295897999991], [-76.65808023599993, -12.68285160499994], [-76.65822848599998, -12.682849604999944], [-76.65858785999995, -12.68289260499995], [-76.65902148599986, -12.683052729999872], [-76.65942973599988, -12.683283229999915], [-76.6597714859999, -12.6834922299999], [-76.66002736099995, -12.683417980999877], [-76.66025586099994, -12.683144480999886], [-76.66047461099998, -12.682908229999896], [-76.66063086099996, -12.682646355999907], [-76.66052536099994, -12.682285104999949], [-76.66026761099994, -12.682005854999943], [-76.65986911099998, -12.681828104999965], [-76.65951948599985, -12.68167573099987], [-76.65953511099997, -12.681468730999882], [-76.65983986099997, -12.681351604999975], [-76.66025198599988, -12.681355479999922], [-76.66051186099997, -12.68138085499993], [-76.66078511099994, -12.681117230999973], [-76.66094123599999, -12.680925730999832], [-76.66108598599999, -12.680626979999886], [-76.66109373599988, -12.680337854999948], [-76.66112711099998, -12.679884730999959], [-76.66116211099995, -12.679496105999931], [-76.66106061099998, -12.67938672999992], [-76.66079498599987, -12.679417980999972], [-76.6605819859999, -12.679527355999937], [-76.66017773599998, -12.679611354999963], [-76.65964260999993, -12.679550730999836], [-76.65930073599998, -12.679400354999927], [-76.65905073599998, -12.679130855999915], [-76.65890236099995, -12.678851479999878], [-76.65886323599989, -12.678443355999946], [-76.6589609859999, -12.6779082299999], [-76.65913286099999, -12.677421854999977], [-76.6591854859999, -12.677023479999889], [-76.65923036099997, -12.676697230999878], [-76.65930861099997, -12.676421855999934], [-76.65556748599988, -12.673219230999905], [-76.65194161099998, -12.668617230999871], [-76.6504773609999, -12.666037229999915], [-76.65018298599995, -12.665006730999949], [-76.64930998599993, -12.661949980999964], [-76.64902298599998, -12.661190480999949], [-76.64880186099998, -12.660737604999952], [-76.64827486099983, -12.659657854999864], [-76.64718023599994, -12.654384980999964], [-76.64615423599997, -12.650975855999945], [-76.64452998599995, -12.64820998099998], [-76.64359073599996, -12.647192979999943], [-76.64231911099989, -12.645815979999952], [-76.64066123599997, -12.642442729999914], [-76.64061998499989, -12.642329980999932], [-76.64013748599996, -12.641047855999886], [-76.6393896109999, -12.638986230999933], [-76.63872798499995, -12.637090855999872], [-76.63875098599988, -12.636267605999876], [-76.63861998599998, -12.635659980999947], [-76.63860723599998, -12.635657604999949], [-76.63859036099996, -12.635610604999954], [-76.63413498599988, -12.627108604999933], [-76.63220861099995, -12.623781855999937], [-76.63036998599995, -12.620629980999922], [-76.63000998599989, -12.620149980999884], [-76.62964998599995, -12.619529980999857], [-76.62936998599997, -12.619149980999964], [-76.62866573599996, -12.617175604999943], [-76.62815011099997, -12.615030479999973], [-76.62738698599998, -12.613792980999904], [-76.62706998599992, -12.61321998099993], [-76.62645886099989, -12.612081230999934], [-76.62581948599995, -12.611070605999885], [-76.62559998599988, -12.610529980999843], [-76.62526261099987, -12.60946185499995], [-76.62497998599991, -12.60796998099994], [-76.62492998599998, -12.60755985499992], [-76.62421086099988, -12.605749480999975], [-76.62372998499995, -12.604819979999888], [-76.62352011099995, -12.60429997999995], [-76.62315898599996, -12.603604479999944], [-76.62298061099995, -12.60248197999988], [-76.62280823599991, -12.601397604999875], [-76.62282911099993, -12.601199854999948], [-76.62297336099988, -12.599830229999952], [-76.62287035999998, -12.59844835499996], [-76.62254023599996, -12.596777729999928], [-76.62207998599996, -12.595059979999974], [-76.62083436099994, -12.59340998099998], [-76.61946598599997, -12.591275354999937], [-76.61831648599997, -12.588921729999981], [-76.61758673599996, -12.587553230999958], [-76.61675998599998, -12.586039979999896], [-76.61595998599995, -12.584039979999886], [-76.61567998599998, -12.58289997999998], [-76.61526961099992, -12.581842604999963], [-76.61495998599997, -12.58098997999997], [-76.61459448599993, -12.579689729999927], [-76.61444998599995, -12.579219979999948], [-76.6140199859999, -12.578329980999968], [-76.61311986099997, -12.577089979999926], [-76.61258748599988, -12.576350855999976], [-76.61155998599997, -12.575029980999943], [-76.6109799859999, -12.574089979999883], [-76.61028998599994, -12.573209979999888], [-76.61003998499996, -12.572789980999971], [-76.60538573599996, -12.574435604999962], [-76.60408573599994, -12.57535960499996], [-76.60392461099997, -12.575510229999963], [-76.60274323599998, -12.576614605999964], [-76.60215961099993, -12.577738105999913], [-76.60161973499993, -12.578788730999975], [-76.60137161099993, -12.580349979999937], [-76.60093386099993, -12.582144854999967], [-76.60037936099997, -12.582903604999842], [-76.5996936109999, -12.583355980999954], [-76.59889098599996, -12.583603979999964]]]], "type": "MultiPolygon"}, "properties": {"AREA": 1, "CAPITAL": "MALA", "CODCCPP": "0001", "DEPARTAMEN": "LIMA", "DISTRITO": "MALA", "FUENTE": "INEI", "IDDIST": "150509", "IDDPTO": "15", "IDPROV": "1505", "PROVINCIA": "CA\u00d1ETE"}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_394375a1c3e330d2561b2167aa657899.addTo(feature_group_3ae58b456e59a96685e183f681c14ce8);
        
    
            feature_group_3ae58b456e59a96685e183f681c14ce8.addTo(map_822ec9c2b4a60dd3bf8bc3aaa868cdac);
        
    
            var feature_group_e138c4344f1608cf22b5ed6fd050aee6 = L.featureGroup(
                {
}
            );
        
    
            var circle_131b514c8bd8988a7f4f57347cdbb491 = L.circle(
                [-12.6582, -76.632],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_d71889c8abf5f701fc74aa0871ab7ead = L.circle(
                [-12.652594, -76.626265],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_8b649bcd389b2f42b885f3fab212c2fb = L.circle(
                [-12.66947, -76.615767],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_eb0f61aa7677f8ff9a3d1aea46030a7c = L.circle(
                [-12.659, -76.629],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_28e643cac7f2656b75faa771e1f04ffd = L.circle(
                [-12.6593, -76.6294],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_0161953c227b2b20c428148b716192c9 = L.circle(
                [-12.6603, -76.62893],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_438737341bd9e050360c45192ef720a0 = L.circle(
                [-12.654555, -76.629933],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_a59e2c1ecfc7e97e30acf364cddc1e35 = L.circle(
                [-12.65894, -76.63367],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_5b7b0b34721cec7598fc75c5bc51a484 = L.circle(
                [-12.661834, -76.635964],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_388f23ae9b6e52caf19e702959ad58d6 = L.circle(
                [-12.66297, -76.62715],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_e28a38c48448c1556bae99e56e488095 = L.circle(
                [-12.66086, -76.63135],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_9dacf05b07191b70919995f49db1901e = L.circle(
                [-12.657762, -76.632363],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            var circle_57fcca618e414520b987a974b0ed203b = L.circle(
                [-12.660335, -76.632946],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 100, "stroke": true, "weight": 2}
            ).addTo(feature_group_e138c4344f1608cf22b5ed6fd050aee6);
        
    
            feature_group_e138c4344f1608cf22b5ed6fd050aee6.addTo(map_822ec9c2b4a60dd3bf8bc3aaa868cdac);
        
    
            var feature_group_c7ba83e2f958db401f20e571c558ce09 = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_83cd646ea8c3797e9861bebe06fa258b = L.circleMarker(
                [-12.6582, -76.632],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_6c02472827e078e5a03f89646ccd5dbc = L.popup({
  "maxWidth": 420,
});

        
            
                var html_2907787c7e188f10a68209dfa64c1507 = $(`<div id="html_2907787c7e188f10a68209dfa64c1507" style="width: 100.0%; height: 100.0%;"><b>323</b><br>C√≥digo CE: 353488<br>UBIGEO gestor: 150509<br>Latitud: -12.6582<br>Longitud: -76.632<br>Alumnos: 327<br>Docentes: 14<br>Siniestros: 0</div>`)[0];
                popup_6c02472827e078e5a03f89646ccd5dbc.setContent(html_2907787c7e188f10a68209dfa64c1507);
            
        

        circle_marker_83cd646ea8c3797e9861bebe06fa258b.bindPopup(popup_6c02472827e078e5a03f89646ccd5dbc)
        ;

        
    
    
            circle_marker_83cd646ea8c3797e9861bebe06fa258b.bindTooltip(
                `<div>
                     323 | 353488
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_8fb35a96de6f3023b1a0867ba67b9863 = L.circleMarker(
                [-12.652594, -76.626265],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_a0303b6b5662c82571f8ed9e3fe235ed = L.popup({
  "maxWidth": 420,
});

        
            
                var html_509b4ea8e7b8c7609d1c9d35b3115378 = $(`<div id="html_509b4ea8e7b8c7609d1c9d35b3115378" style="width: 100.0%; height: 100.0%;"><b>20927</b><br>C√≥digo CE: 353493<br>UBIGEO gestor: 150509<br>Latitud: -12.652594<br>Longitud: -76.626265<br>Alumnos: 639<br>Docentes: 32<br>Siniestros: 0</div>`)[0];
                popup_a0303b6b5662c82571f8ed9e3fe235ed.setContent(html_509b4ea8e7b8c7609d1c9d35b3115378);
            
        

        circle_marker_8fb35a96de6f3023b1a0867ba67b9863.bindPopup(popup_a0303b6b5662c82571f8ed9e3fe235ed)
        ;

        
    
    
            circle_marker_8fb35a96de6f3023b1a0867ba67b9863.bindTooltip(
                `<div>
                     20927 | 353493
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_0bcdc5f5b2919855274793dbc1a229c8 = L.circleMarker(
                [-12.66947, -76.615767],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_bf9f3cfa5777d350ff0f811d716a3499 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_7709392f9bcec4d3852a6816a0c01380 = $(`<div id="html_7709392f9bcec4d3852a6816a0c01380" style="width: 100.0%; height: 100.0%;"><b>20237</b><br>C√≥digo CE: 353520<br>UBIGEO gestor: 150509<br>Latitud: -12.66947<br>Longitud: -76.615767<br>Alumnos: 570<br>Docentes: 24<br>Siniestros: 0</div>`)[0];
                popup_bf9f3cfa5777d350ff0f811d716a3499.setContent(html_7709392f9bcec4d3852a6816a0c01380);
            
        

        circle_marker_0bcdc5f5b2919855274793dbc1a229c8.bindPopup(popup_bf9f3cfa5777d350ff0f811d716a3499)
        ;

        
    
    
            circle_marker_0bcdc5f5b2919855274793dbc1a229c8.bindTooltip(
                `<div>
                     20237 | 353520
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_144e85182fdce072c24b209c685e48b4 = L.circleMarker(
                [-12.659, -76.629],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_463d0b5b8552533758ae65b3dec53544 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_ff5d1c6768d5a11038e779583f2af948 = $(`<div id="html_ff5d1c6768d5a11038e779583f2af948" style="width: 100.0%; height: 100.0%;"><b>21015</b><br>C√≥digo CE: 353577<br>UBIGEO gestor: 150509<br>Latitud: -12.659<br>Longitud: -76.629<br>Alumnos: 1281<br>Docentes: 57<br>Siniestros: 0</div>`)[0];
                popup_463d0b5b8552533758ae65b3dec53544.setContent(html_ff5d1c6768d5a11038e779583f2af948);
            
        

        circle_marker_144e85182fdce072c24b209c685e48b4.bindPopup(popup_463d0b5b8552533758ae65b3dec53544)
        ;

        
    
    
            circle_marker_144e85182fdce072c24b209c685e48b4.bindTooltip(
                `<div>
                     21015 | 353577
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_961121682f515a10029fd427805f6cac = L.circleMarker(
                [-12.6593, -76.6294],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_3933133b16f66ea6a94c05253ccb2326 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_ab3121f2fc5c642ec4bf4c2dd90687c5 = $(`<div id="html_ab3121f2fc5c642ec4bf4c2dd90687c5" style="width: 100.0%; height: 100.0%;"><b>DIONISIO MANCO CAMPOS</b><br>C√≥digo CE: 353596<br>UBIGEO gestor: 150509<br>Latitud: -12.6593<br>Longitud: -76.6294<br>Alumnos: 1198<br>Docentes: 68<br>Siniestros: 0</div>`)[0];
                popup_3933133b16f66ea6a94c05253ccb2326.setContent(html_ab3121f2fc5c642ec4bf4c2dd90687c5);
            
        

        circle_marker_961121682f515a10029fd427805f6cac.bindPopup(popup_3933133b16f66ea6a94c05253ccb2326)
        ;

        
    
    
            circle_marker_961121682f515a10029fd427805f6cac.bindTooltip(
                `<div>
                     dionisio manco campos | 353596
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_e2fb6044a9c567ae375f02e526f9ddaf = L.circleMarker(
                [-12.6603, -76.62893],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_1c835f89e31d8c25e05c01835fcbf448 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_00bd85b4b07ffeee9a5e3e695a8f993f = $(`<div id="html_00bd85b4b07ffeee9a5e3e695a8f993f" style="width: 100.0%; height: 100.0%;"><b>SAN FRANCISCO DE ASIS</b><br>C√≥digo CE: 353643<br>UBIGEO gestor: 150509<br>Latitud: -12.6603<br>Longitud: -76.62893<br>Alumnos: 319<br>Docentes: 31<br>Siniestros: 0</div>`)[0];
                popup_1c835f89e31d8c25e05c01835fcbf448.setContent(html_00bd85b4b07ffeee9a5e3e695a8f993f);
            
        

        circle_marker_e2fb6044a9c567ae375f02e526f9ddaf.bindPopup(popup_1c835f89e31d8c25e05c01835fcbf448)
        ;

        
    
    
            circle_marker_e2fb6044a9c567ae375f02e526f9ddaf.bindTooltip(
                `<div>
                     san francisco de asis | 353643
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_f257d63ce1bbc1fe5fd740b77016c75b = L.circleMarker(
                [-12.654555, -76.629933],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_7c03d901fa00fb028d0f250d705748a4 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_85b2c00e93832fb589c659fce324bc5c = $(`<div id="html_85b2c00e93832fb589c659fce324bc5c" style="width: 100.0%; height: 100.0%;"><b>JOSE ABELARDO QUI√ëONES</b><br>C√≥digo CE: 353681<br>UBIGEO gestor: 150509<br>Latitud: -12.654555<br>Longitud: -76.629933<br>Alumnos: 508<br>Docentes: 28<br>Siniestros: 0</div>`)[0];
                popup_7c03d901fa00fb028d0f250d705748a4.setContent(html_85b2c00e93832fb589c659fce324bc5c);
            
        

        circle_marker_f257d63ce1bbc1fe5fd740b77016c75b.bindPopup(popup_7c03d901fa00fb028d0f250d705748a4)
        ;

        
    
    
            circle_marker_f257d63ce1bbc1fe5fd740b77016c75b.bindTooltip(
                `<div>
                     jose abelardo qui√±ones | 353681
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_8adfad5abc2f5cd95fcb7390cf3e2666 = L.circleMarker(
                [-12.65894, -76.63367],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_f8ed2bca83a6558465dc3428a00e5818 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_61386b35fc87de13e85db8e10b72f751 = $(`<div id="html_61386b35fc87de13e85db8e10b72f751" style="width: 100.0%; height: 100.0%;"><b>JOSE ANTONIO ENCINAS</b><br>C√≥digo CE: 353723<br>UBIGEO gestor: 150509<br>Latitud: -12.65894<br>Longitud: -76.63367<br>Alumnos: 243<br>Docentes: 24<br>Siniestros: 0</div>`)[0];
                popup_f8ed2bca83a6558465dc3428a00e5818.setContent(html_61386b35fc87de13e85db8e10b72f751);
            
        

        circle_marker_8adfad5abc2f5cd95fcb7390cf3e2666.bindPopup(popup_f8ed2bca83a6558465dc3428a00e5818)
        ;

        
    
    
            circle_marker_8adfad5abc2f5cd95fcb7390cf3e2666.bindTooltip(
                `<div>
                     jose antonio encinas | 353723
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_230e16ffeb9baf5be50aff6b15f06d6b = L.circleMarker(
                [-12.661834, -76.635964],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_e7954b9903eba39ea20682f1e6fa59a1 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_3b617eb46b64d5760be90ec8ce7ac9f5 = $(`<div id="html_3b617eb46b64d5760be90ec8ce7ac9f5" style="width: 100.0%; height: 100.0%;"><b>APOSTOL SAN PEDRO</b><br>C√≥digo CE: 353737<br>UBIGEO gestor: 150509<br>Latitud: -12.661834<br>Longitud: -76.635964<br>Alumnos: 1680<br>Docentes: 69<br>Siniestros: 0</div>`)[0];
                popup_e7954b9903eba39ea20682f1e6fa59a1.setContent(html_3b617eb46b64d5760be90ec8ce7ac9f5);
            
        

        circle_marker_230e16ffeb9baf5be50aff6b15f06d6b.bindPopup(popup_e7954b9903eba39ea20682f1e6fa59a1)
        ;

        
    
    
            circle_marker_230e16ffeb9baf5be50aff6b15f06d6b.bindTooltip(
                `<div>
                     apostol san pedro | 353737
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_01112fa992fe1641ad28197b6c7f74d5 = L.circleMarker(
                [-12.66297, -76.62715],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_d7cc96d59d5f56c0366f19cc462499e1 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_0050cc840170231e092594580d107686 = $(`<div id="html_0050cc840170231e092594580d107686" style="width: 100.0%; height: 100.0%;"><b>SCHOOL MIS PRIMEROS PASOS</b><br>C√≥digo CE: 730517<br>UBIGEO gestor: 150509<br>Latitud: -12.66297<br>Longitud: -76.62715<br>Alumnos: 243<br>Docentes: 19<br>Siniestros: 0</div>`)[0];
                popup_d7cc96d59d5f56c0366f19cc462499e1.setContent(html_0050cc840170231e092594580d107686);
            
        

        circle_marker_01112fa992fe1641ad28197b6c7f74d5.bindPopup(popup_d7cc96d59d5f56c0366f19cc462499e1)
        ;

        
    
    
            circle_marker_01112fa992fe1641ad28197b6c7f74d5.bindTooltip(
                `<div>
                     school mis primeros pasos | 730517
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_40f78dfca104e16e9bb9fe78adaa3047 = L.circleMarker(
                [-12.66086, -76.63135],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_a371670aab1c33bd0568ddcdab9b2a7f = L.popup({
  "maxWidth": 420,
});

        
            
                var html_b4540cfa592cac1508622eaf5d10a49e = $(`<div id="html_b4540cfa592cac1508622eaf5d10a49e" style="width: 100.0%; height: 100.0%;"><b>FRACTAL</b><br>C√≥digo CE: 836415<br>UBIGEO gestor: 150509<br>Latitud: -12.66086<br>Longitud: -76.63135<br>Alumnos: 279<br>Docentes: 11<br>Siniestros: 0</div>`)[0];
                popup_a371670aab1c33bd0568ddcdab9b2a7f.setContent(html_b4540cfa592cac1508622eaf5d10a49e);
            
        

        circle_marker_40f78dfca104e16e9bb9fe78adaa3047.bindPopup(popup_a371670aab1c33bd0568ddcdab9b2a7f)
        ;

        
    
    
            circle_marker_40f78dfca104e16e9bb9fe78adaa3047.bindTooltip(
                `<div>
                     fractal | 836415
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_356e1c8f95985a4e890880cd57368d83 = L.circleMarker(
                [-12.657762, -76.632363],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_e00dfce616fc8fbb852fbae0ac702582 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_2255551be58183942cfca7c0201ad675 = $(`<div id="html_2255551be58183942cfca7c0201ad675" style="width: 100.0%; height: 100.0%;"><b>TESLA SCHOOLS</b><br>C√≥digo CE: 842992<br>UBIGEO gestor: 150509<br>Latitud: -12.657762<br>Longitud: -76.632363<br>Alumnos: 244<br>Docentes: 19<br>Siniestros: 0</div>`)[0];
                popup_e00dfce616fc8fbb852fbae0ac702582.setContent(html_2255551be58183942cfca7c0201ad675);
            
        

        circle_marker_356e1c8f95985a4e890880cd57368d83.bindPopup(popup_e00dfce616fc8fbb852fbae0ac702582)
        ;

        
    
    
            circle_marker_356e1c8f95985a4e890880cd57368d83.bindTooltip(
                `<div>
                     tesla schools | 842992
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_8fbe5d1695964031bbd83f8dfe9629a0 = L.circleMarker(
                [-12.660335, -76.632946],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c7ba83e2f958db401f20e571c558ce09);
        
    
        var popup_e55254284e7de6bd38d3b4d63ad7b1d8 = L.popup({
  "maxWidth": 420,
});

        
            
                var html_1dc4aaee52ff0691a2b91de77e89bafa = $(`<div id="html_1dc4aaee52ff0691a2b91de77e89bafa" style="width: 100.0%; height: 100.0%;"><b>FRACTAL</b><br>C√≥digo CE: 855710<br>UBIGEO gestor: 150509<br>Latitud: -12.660335<br>Longitud: -76.632946<br>Alumnos: 237<br>Docentes: 13<br>Siniestros: 0</div>`)[0];
                popup_e55254284e7de6bd38d3b4d63ad7b1d8.setContent(html_1dc4aaee52ff0691a2b91de77e89bafa);
            
        

        circle_marker_8fbe5d1695964031bbd83f8dfe9629a0.bindPopup(popup_e55254284e7de6bd38d3b4d63ad7b1d8)
        ;

        
    
    
            circle_marker_8fbe5d1695964031bbd83f8dfe9629a0.bindTooltip(
                `<div>
                     fractal | 855710
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            feature_group_c7ba83e2f958db401f20e571c558ce09.addTo(map_822ec9c2b4a60dd3bf8bc3aaa868cdac);
        
    
            var feature_group_4e949bcdb8bd3ed184ef7ae619c896ef = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_69c4ac0c19011a769acee530267a936e = L.circleMarker(
                [-12.698218, -76.641776],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_4e949bcdb8bd3ed184ef7ae619c896ef);
        
    
        var popup_d1616fc080433ed56b2a4df5262e73ab = L.popup({
  "maxWidth": 420,
});

        
            
                var html_f6ac109998a880136f8bab9b46835099 = $(`<div id="html_f6ac109998a880136f8bab9b46835099" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2022-10-127</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>31/10/2022</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>22:30</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE FUGA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA PANAMERICANA SUR KM. 2</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>PTE. PEAT. NOCHETO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.698218</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-76.641776</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_d1616fc080433ed56b2a4df5262e73ab.setContent(html_f6ac109998a880136f8bab9b46835099);
            
        

        circle_marker_69c4ac0c19011a769acee530267a936e.bindPopup(popup_d1616fc080433ed56b2a4df5262e73ab)
        ;

        
    
    
            feature_group_4e949bcdb8bd3ed184ef7ae619c896ef.addTo(map_822ec9c2b4a60dd3bf8bc3aaa868cdac);
        
    
            map_822ec9c2b4a60dd3bf8bc3aaa868cdac.fitBounds(
                [[-12.6582, -76.632], [-12.652594, -76.626265], [-12.66947, -76.615767], [-12.659, -76.629], [-12.6593, -76.6294], [-12.6603, -76.62893], [-12.654555, -76.629933], [-12.65894, -76.63367], [-12.661834, -76.635964], [-12.66297, -76.62715], [-12.66086, -76.63135], [-12.657762, -76.632363], [-12.660335, -76.632946]],
                {}
            );
        
    
            var layer_control_1db592316c9c4cff953281d20660ac74_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_28c190c52f7d8208c952636f6e674cee,
                },
                overlays :  {
                    "contorno" : feature_group_3ae58b456e59a96685e183f681c14ce8,
                    "colegios: buffers" : feature_group_e138c4344f1608cf22b5ed6fd050aee6,
                    "colegios: puntos" : feature_group_c7ba83e2f958db401f20e571c558ce09,
                    "siniestros fatales" : feature_group_4e949bcdb8bd3ed184ef7ae619c896ef,
                },
            };
            let layer_control_1db592316c9c4cff953281d20660ac74 = L.control.layers(
                layer_control_1db592316c9c4cff953281d20660ac74_layers.base_layers,
                layer_control_1db592316c9c4cff953281d20660ac74_layers.overlays,
                {
  "position": "topright",
  "collapsed": true,
  "autoZIndex": true,
}
            ).addTo(map_822ec9c2b4a60dd3bf8bc3aaa868cdac);

        
    
        feature_group_c7ba83e2f958db401f20e571c558ce09.bringToFront();
        feature_group_4e949bcdb8bd3ed184ef7ae619c896ef.bringToFront();
    
    
      (function() {
        var puntosLayer = feature_group_c7ba83e2f958db401f20e571c558ce09;
        var defaultTrue  = '#7dd3fc';
        var defaultFalse = '#1d4ed8';
        var hiliteColor  = '#f59e0b';

        // ---------- Toggle colapsar/expandir ----------
        var box = document.getElementById('zs_tools');
        var btnToggle = document.getElementById('btn_toggle_box');
        var saved = null;
        try { saved = localStorage.getItem('zs_tools_collapsed'); } catch(e) {}
        if (saved === '1') {
          box.classList.add('collapsed');
          btnToggle.textContent = '‚Øà Mostrar';
        }
        function toggleBox() {
          var collapsed = box.classList.toggle('collapsed');
          btnToggle.textContent = collapsed ? '‚Øà Mostrar' : '‚ØÜ Ocultar';
          try { localStorage.setItem('zs_tools_collapsed', collapsed ? '1' : '0'); } catch(e) {}
        }
        btnToggle.addEventListener('click', toggleBox);

        // ---------- Esperar a que el mapa est√© disponible ----------
        var ly_map = null;
        function ensureMap(cb) {
          var tries = 0;
          (function wait() {
            ly_map = (puntosLayer && puntosLayer._map) ? puntosLayer._map : null;
            if (ly_map) { cb(); return; }
            if (tries++ < 80) { setTimeout(wait, 50); }
          })();
        }

        ensureMap(function initTools() {
          // ---------- Utilidades de b√∫squeda ----------
          function eachMarker(fn) {
            if (!puntosLayer || !puntosLayer._layers) return;
            Object.values(puntosLayer._layers).forEach(function(ly) {
              if (ly && typeof ly.setStyle === 'function') fn(ly);
            });
          }

          function getTooltipText(ly) {
            try {
              var t = ly.getTooltip();
              return t ? String(t.getContent() || '').toLowerCase() : '';
            } catch(e) { return ''; }
          }

          function clearHighlights() {
            eachMarker(function(ly) {
              var st = (ly.options || {});
              if (!st._origColor) { st._origColor = st.color; }
              var orig = (st.color === hiliteColor) ? st._origColor : st.color;
              ly.setStyle({ color: orig || defaultFalse, fillColor: orig || defaultFalse });
            });
          }

          function searchAndHighlight() {
            var qn_raw = (document.getElementById('q_name').value || '');
            var qc_raw = (document.getElementById('q_code').value || '');
            var qn = qn_raw.toLowerCase();
            var qc = qc_raw.toLowerCase();

            var useName = qn_raw.trim().length > 0;
            var useCode = qc_raw.trim().length > 0;

            clearHighlights();
            if (!useName && !useCode) return;

            var matchedLatLngs = [];
            eachMarker(function(ly) {
              var txt = getTooltipText(ly);
              var parts = txt.split('|', 2);
              var nameTxt = (parts[0] || '').trim();
              var codeTxt = (parts[1] || '').trim();

              var matchName = useName ? (nameTxt.indexOf(qn) !== -1) : false;
              var matchCode = useCode ? (codeTxt.indexOf(qc) !== -1) : false;

              if (matchName || matchCode) {
                if (!ly.options._origColor) { ly.options._origColor = ly.options.color; }
                ly.setStyle({ color: hiliteColor, fillColor: hiliteColor });
                if (ly.getLatLng) matchedLatLngs.push(ly.getLatLng());
              }
            });

            if (matchedLatLngs.length > 0) {
              var group = L.featureGroup(matchedLatLngs.map(function(ll) { return L.marker(ll); }));
              try { ly_map.fitBounds(group.getBounds().pad(0.2)); } catch(e) {}
            }
          }

          document.getElementById('btn_search').addEventListener('click', searchAndHighlight);
          document.getElementById('btn_clear').addEventListener('click', function() {
            document.getElementById('q_name').value = '';
            document.getElementById('q_code').value = '';
            clearHighlights();
          });
          ['q_name','q_code'].forEach(function(id) {
            var el = document.getElementById(id);
            el.addEventListener('keydown', function(ev) { if (ev.key === 'Enter') searchAndHighlight(); });
          });

          // ---------- Pin por coordenadas ----------
          var coordLayer = L.layerGroup().addTo(ly_map);
          function goToXY() {
            var x = parseFloat((document.getElementById('q_x').value || '').replace(',', '.'));
            var y = parseFloat((document.getElementById('q_y').value || '').replace(',', '.'));
            if (!isFinite(x) || !isFinite(y)) return;
            coordLayer.clearLayers();
            var mk = L.marker([y, x], { draggable:false, title: 'Punto (Y,X): '+y+', '+x });
            mk.addTo(coordLayer);
            ly_map.setView([y, x], Math.max(ly_map.getZoom(), 17));
          }
          function clearXY() { coordLayer.clearLayers(); }
          document.getElementById('btn_xy_go').addEventListener('click', goToXY);
          document.getElementById('btn_xy_clear').addEventListener('click', clearXY);

          // ---------- Medici√≥n ----------
          var measuring = false;
          var mA = null, mB = null, mLine = null;

          function haversine(lat1, lon1, lat2, lon2) {
            var R = 6371000;
            var dLat = (lat2-lat1) * Math.PI/180;
            var dLon = (lon2-lon1) * Math.PI/180;
            var a = Math.sin(dLat/2)*Math.sin(dLat/2) +
                    Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180) *
                    Math.sin(dLon/2)*Math.sin(dLon/2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
          }

          function updateMeasure() {
            if (!(mA && mB)) return;
            var a = mA.getLatLng(), b = mB.getLatLng();
            var d = haversine(a.lat, a.lng, b.lat, b.lng);
            var txt = (d >= 1000) ? (d/1000).toFixed(3)+' km' : Math.round(d)+' m';

            if (!mLine) {
              mLine = L.polyline([a, b], { color: '#111827', weight: 3, dashArray: '6,4' })
                .bindTooltip(txt, { permanent:true, direction:'center', className:'dist-on-line' })
                .addTo(ly_map);
            } else {
              mLine.setLatLngs([a, b]);
              mLine.setTooltipContent(txt);
            }
          }

          function clearMeasure() {
            if (mA) ly_map.removeLayer(mA); mA = null;
            if (mB) ly_map.removeLayer(mB); mB = null;
            if (mLine) ly_map.removeLayer(mLine); mLine = null;
          }

          function toggleMeasure() {
            measuring = !measuring;
            var stateSpan = document.getElementById('measure_state');
            stateSpan.textContent = measuring ? 'Activo' : 'Desactivado';
            stateSpan.style.color = measuring ? '#065f46' : '#991b1b';
            if (!measuring) {
              clearMeasure();
              ly_map.getContainer().style.cursor = '';
              return;
            }
            ly_map.getContainer().style.cursor = 'crosshair';
          }
          document.getElementById('btn_measure_toggle').addEventListener('click', toggleMeasure);

          ly_map.on('click', function(ev) {
            if (!measuring) return;
            if (!mA) {
              mA = L.marker(ev.latlng, { draggable:true, title:'Punto A' }).addTo(ly_map);
              mA.on('drag', updateMeasure);
            } else if (!mB) {
              mB = L.marker(ev.latlng, { draggable:true, title:'Punto B' }).addTo(ly_map);
              mB.on('drag', updateMeasure);
            } else {
              mB.setLatLng(ev.latlng);
            }
            updateMeasure();
          });

          // ---------- Abrir vista actual en Google Maps ----------
          function openInGoogleMaps() {
            var c = ly_map.getCenter();
            var z = ly_map.getZoom();
            var url = 'https://www.google.com/maps/@' + c.lat + ',' + c.lng + ',' + z + 'z';
            window.open(url, '_blank');
          }
          document.getElementById('btn_open_gmaps').addEventListener('click', openInGoogleMaps);
        });
      })();
    
</script>
</html>