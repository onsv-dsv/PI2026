<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_2ab858419474df1436798f3b472cedca {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
</head>
<body>
    
    
    <style>
      .leaflet-interactive.zs-buffer { pointer-events: none !important; }

      .searchbar-wrap {
        position: fixed; right: 20px; bottom: 140px;
        z-index: 10000; background: rgba(255,255,255,0.95);
        border: 1px solid #e5e7eb;
        padding: 10px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        font-family: system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
        display: flex; flex-direction: column; gap: 8px; min-width: 300px; max-width: 92vw;
      }

      .searchbar-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
      .searchbar-title { font-weight: 700; font-size: 14px; color: #111827; }
      .toggle-btn { border: 0; border-radius: 8px; padding: 4px 10px; font-weight: 700; cursor: pointer; background: #111827; color: #fff; }
      .tools-body { display: flex; flex-direction: column; gap: 8px; }

      .row-flex { display:flex; gap:8px; align-items:center; }
      .col-flex { display:flex; flex-direction:column; gap:8px; }
      .row-flex input, .col-flex input { border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; font-size:13px; flex:1; }
      .row-flex button, .col-flex button { border:0; border-radius:8px; padding:6px 10px; font-weight:600; cursor:pointer; }
      .btn-dark  { background:#111827; color:#fff; }
      .btn-gray  { background:#6b7280; color:#fff; }
      .btn-green { background:#065f46; color:#fff; }
      .btn-red   { background:#991b1b; color:#fff; }
      .pill { font-size:12px; padding:4px 8px; border-radius:999px; }
      .dist-on-line { background: rgba(17,24,39,0.85); color: #fff; padding: 2px 6px; border-radius: 6px; font-size: 12px; border: 1px solid rgba(255,255,255,0.2); }

      .searchbar-wrap.collapsed { padding: 8px 10px; }
      .searchbar-wrap.collapsed .tools-body { display: none; }

      @media (max-width: 480px) {
        .searchbar-wrap { right: 12px; bottom: 12px; min-width: 240px; }
      }
    </style>
    
    
    <div style="
        position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
        z-index: 9999; background: rgba(255,255,255,0.9);
        padding: 8px 14px; border-radius: 8px; font-weight: 600;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;">
        ICA-ICA-SUBTANJALLA
    </div>
    
    
    <div id="legend-box" style="
        position: fixed; bottom: 20px; right: 20px; z-index: 9999;
        background: rgba(255,255,255,0.9); padding: 10px 12px; border-radius: 8px;
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15); line-height: 1.4; min-width: 240px;">
        <div style="font-weight: 600; margin-bottom: 6px;">Leyenda</div>
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:4px;">
            <span style="display:inline-block; width:14px; height:14px; background:#1d4ed8; border-radius:50%;"></span>
            <span>Azul: Intersecci√≥n priorizada</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px;">
            <span style="display:inline-block; width:14px; height:14px; background:#d90429; border-radius:50%;"></span>
            <span>Rojo: Siniestro fatal</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px; margin-top:6px;">
            <span style="display:inline-block; width:14px; height:14px; background:#f59e0b; border-radius:50%;"></span>
            <span>Amarillo: Coincidencia de b√∫squeda</span>
        </div>
    </div>
    
    
            <div class="folium-map" id="map_2ab858419474df1436798f3b472cedca" ></div>
        
    
      <div class="searchbar-wrap" id="zs_tools">
        <div class="searchbar-header">
          <div class="searchbar-title">Herramientas</div>
          <button id="btn_toggle_box" class="toggle-btn" title="Mostrar/Ocultar">‚ØÜ Ocultar</button>
        </div>

        <div class="tools-body">
          <div class="col-flex">
            <input id="q_name" type="text" placeholder="Buscar por nombre">
            <input id="q_code" type="text" placeholder="Buscar por c√≥digo">
          </div>
          <div class="row-flex">
            <button id="btn_search" class="btn-dark">Buscar</button>
            <button id="btn_clear" class="btn-gray">Limpiar</button>
          </div>

          <hr style="border:none;border-top:1px solid #e5e7eb; margin:4px 0;">

          <div class="col-flex" title="Coordenadas en grados decimales">
            <input id="q_x" type="text" placeholder="Longitud Ejem: -77.15435">
            <div class="row-flex">
              <input id="q_y" type="text" placeholder="Latitud Ejem: -15.54648">
              <button id="btn_xy_go" class="btn-green" title="Centrar en coordenadas">üîç</button>
              <button id="btn_xy_clear" class="btn-red"   title="Quitar pin de coordenadas">‚úï</button>
            </div>
          </div>

          <div class="row-flex">
            <button id="btn_measure_toggle" class="btn-dark pill" title="Medir distancia">Medir distancia</button>
            <span id="measure_state" style="font-size:12px; color:#991b1b">Desactivado</span>
          </div>

          <div class="row-flex">
            <button id="btn_open_gmaps" class="btn-dark" title="Abrir esta vista en Google Maps">Abrir en Google Maps</button>
          </div>
        </div>
      </div>
    
</body>
<script>
    
    
            var map_2ab858419474df1436798f3b472cedca = L.map(
                "map_2ab858419474df1436798f3b472cedca",
                {
                    center: [-14.029687833333334, -75.75448949999999],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 14,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );
            L.control.scale().addTo(map_2ab858419474df1436798f3b472cedca);

            

        
    
            var tile_layer_d40f6c743cdf5458597804dcfb3d4987 = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 19,
  "maxNativeZoom": 19,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_d40f6c743cdf5458597804dcfb3d4987.addTo(map_2ab858419474df1436798f3b472cedca);
        
    
            var feature_group_9c8067b51c22d2586e9e2b73ac679d05 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_af159dea9eb0a675e87f1e6a253dd94e_styler(feature) {
            switch(feature.properties.IDDPTO) {
                default:
                    return {"color": "#222222", "fill": true, "fillColor": "#9ca3af", "fillOpacity": 0.3, "opacity": 1.0, "weight": 2.5};
            }
        }

        function geo_json_af159dea9eb0a675e87f1e6a253dd94e_onEachFeature(feature, layer) {

            layer.on({
            });
        };
        var geo_json_af159dea9eb0a675e87f1e6a253dd94e = L.geoJson(null, {
                onEachFeature: geo_json_af159dea9eb0a675e87f1e6a253dd94e_onEachFeature,
            
                style: geo_json_af159dea9eb0a675e87f1e6a253dd94e_styler,
            ...{
}
        });

        function geo_json_af159dea9eb0a675e87f1e6a253dd94e_add (data) {
            geo_json_af159dea9eb0a675e87f1e6a253dd94e
                .addData(data);
        }
            geo_json_af159dea9eb0a675e87f1e6a253dd94e_add({"features": [{"geometry": {"coordinates": [[[[-75.75818260999995, -14.007519731999935], [-75.75707560999996, -14.007771356999967], [-75.75601898499997, -14.00834998099998], [-75.75504673499995, -14.008839855999895], [-75.75377148499985, -14.00884760699995], [-75.75259960999995, -14.008855481999944], [-75.75148435999995, -14.008947231999912], [-75.75068961099993, -14.008994106999978], [-75.75072260999991, -14.011874981999938], [-75.75078710999992, -14.012708981999936], [-75.75037110999995, -14.013765606999982], [-75.74699360999995, -14.017961105999916], [-75.74693935999994, -14.018017856999904], [-75.74694335999993, -14.018023356999834], [-75.74434760999992, -14.021853481999926], [-75.74175398499989, -14.02442973199993], [-75.74115823499983, -14.025021481999943], [-75.74112085999991, -14.0284722319999], [-75.74060598499995, -14.031664981999938], [-75.73920898499995, -14.035037105999947], [-75.73964073499997, -14.035266230999923], [-75.74023473499989, -14.035572231999936], [-75.74107173499993, -14.035743231999959], [-75.74170173499994, -14.035914231999982], [-75.74218010999994, -14.0360646069999], [-75.7428261099999, -14.0362676069999], [-75.74333985999994, -14.036599606999914], [-75.74391410999993, -14.03717573099982], [-75.74470110999994, -14.037992231999965], [-75.74542773499996, -14.038960981999935], [-75.74600385999992, -14.039777231999949], [-75.74633598499997, -14.040474606999908], [-75.74723848499991, -14.041635355999972], [-75.74852160999995, -14.042691981999894], [-75.75050910999994, -14.043723481999962], [-75.75204385999996, -14.044352481999965], [-75.75398110999987, -14.045056855999974], [-75.75471073499995, -14.045711106999931], [-75.75549060999998, -14.046918731999938], [-75.75627060999994, -14.047522480999874], [-75.7571259849999, -14.047774105999906], [-75.75828910999996, -14.047706981999966], [-75.75910735999997, -14.047435606999898], [-75.76037885999995, -14.046830106999892], [-75.76161910999997, -14.046253856999897], [-75.76291985999995, -14.045921856999882], [-75.76422073499987, -14.045816481999964], [-75.76674610999999, -14.046542981999949], [-75.77092773499987, -14.048619106999922], [-75.77616210999997, -14.050552730999982], [-75.78186135999994, -14.05157423199995], [-75.78592773499992, -14.052863231999936], [-75.7928007349999, -14.054341855999951], [-75.79513673499991, -14.055173855999954], [-75.79895110999996, -14.05576760699995], [-75.80716798499998, -14.059285106999937], [-75.81362885999988, -14.062624980999885], [-75.81998435999992, -14.064873106999926], [-75.82113473499999, -14.066162105999979], [-75.8221113599999, -14.06749410599997], [-75.82299798499997, -14.06847073199998], [-75.82406248499996, -14.070066356999916], [-75.82592573499994, -14.070599606999963], [-75.8299198599999, -14.070599606999963], [-75.8357323599999, -14.069720731999894], [-75.83822660999994, -14.068970731999855], [-75.84551948499995, -14.06609760699996], [-75.84784760999992, -14.065744105999954], [-75.85005273499996, -14.06576373199988], [-75.85397260999997, -14.066537106999931], [-75.85855860999999, -14.06803123199984], [-75.86197073499989, -14.069898480999882], [-75.86573235999998, -14.071601606999934], [-75.86842973499989, -14.072382855999933], [-75.87055860999999, -14.072880856999973], [-75.87148235999996, -14.07330660699995], [-75.87361136099997, -14.074441356999955], [-75.8757422359999, -14.075648481999906], [-75.87808410999997, -14.075648481999906], [-75.88237698499995, -14.075900355999977], [-75.89119723499994, -14.07496485699994], [-75.89440235999996, -14.074320356999976], [-75.89655273499994, -14.072810606999951], [-75.89825385999995, -14.071222605999935], [-75.89908598599993, -14.069970731999888], [-75.89974998499997, -14.068197231999875], [-75.90026173599995, -14.067552731999967], [-75.90316798499998, -14.066005856999936], [-75.90533398499997, -14.065572231999965], [-75.9063261099999, -14.065097606999927], [-75.90962298499994, -14.064833981999982], [-75.91212498599992, -14.064019481999878], [-75.91401760999992, -14.063705106999919], [-75.9184336109999, -14.063615106999919], [-75.92099023499998, -14.064300731999879], [-75.92234761099996, -14.064929730999893], [-75.92402735999991, -14.066314481999882], [-75.92627735999992, -14.068710981999857], [-75.92779485999989, -14.070812480999905], [-75.93300586099991, -14.079390606999937], [-75.93600973499997, -14.084451230999946], [-75.93707423499995, -14.08693560699993], [-75.93785548499983, -14.088710981999895], [-75.93856448499997, -14.090910106999956], [-75.93984173599995, -14.092259731999889], [-75.94127348599994, -14.093427731999896], [-75.94295510999996, -14.095472606999977], [-75.94408985999996, -14.09656248199991], [-75.94527148499998, -14.097789106999869], [-75.94599798499996, -14.098425731999896], [-75.94704298499988, -14.098970606999956], [-75.94795110999996, -14.099607481999954], [-75.94836136099991, -14.10078723199996], [-75.94890623499998, -14.101787105999847], [-75.94945110999993, -14.102331981999896], [-75.9518652349999, -14.104087856999968], [-75.95458198499989, -14.105601606999869], [-75.95777148599996, -14.106886731999907], [-75.95967573599995, -14.107349606999833], [-75.96260736099993, -14.108070355999871], [-75.96522660999995, -14.108396480999943], [-75.9672402349999, -14.108732481999937], [-75.96981448499992, -14.109179731999916], [-75.9724979849999, -14.10861898099995], [-75.97417773599989, -14.108396481999932], [-75.97652736099997, -14.109290981999948], [-75.97798048499993, -14.110409980999918], [-75.97876360999999, -14.11152948199998], [-75.97921098599988, -14.112871106999876], [-75.98010548499991, -14.114437481999914], [-75.98100198599991, -14.116226605999884], [-75.98245510999999, -14.117345731999933], [-75.98402148499991, -14.117681606999838], [-75.9863709849999, -14.117906231999939], [-75.98960348599991, -14.117234356999973], [-75.99346873499996, -14.116966856999852], [-75.99500973499994, -14.116435606999858], [-76.00164848499998, -14.11270123199995], [-76.00375385999985, -14.110451231999946], [-76.00450198499993, -14.10888285699997], [-76.00560735999989, -14.108074231999922], [-76.00755273499993, -14.107396481999956], [-76.01085735999999, -14.107156231999909], [-76.01862298499998, -14.108343731999923], [-76.02633598599994, -14.107896606999873], [-76.02595510999993, -14.107183606999968], [-76.02237698499994, -14.104892606999954], [-76.02088085999992, -14.103498106999837], [-76.0191113599999, -14.101101606999976], [-76.01734960999988, -14.097601606999945], [-76.01632610999991, -14.096330106999972], [-76.01256635999988, -14.09406835699997], [-76.00913285999991, -14.092355481999903], [-76.00646285999989, -14.09165235699993], [-76.00061723599993, -14.090619106999952], [-75.99930661099995, -14.08987310599997], [-75.99673435999989, -14.087831980999908], [-75.99444536099998, -14.085472606999929], [-75.99341598499996, -14.08404885699997], [-75.99137885999983, -14.080205106999927], [-75.98962885999998, -14.076253856999926], [-75.98639661099998, -14.073355481999897], [-75.98609173499995, -14.071748105999973], [-75.98654098499992, -14.06948635699996], [-75.98778510999995, -14.06740035699994], [-75.98893748499995, -14.064792981999972], [-75.99359173599993, -14.057134731999952], [-76.00256461099997, -14.046292981999954], [-76.00508198499995, -14.039746106999928], [-76.0051426099999, -14.03758598199994], [-76.00400586099983, -14.033261731999971], [-76.00312886099994, -14.030867231999935], [-76.00221286099998, -14.029812480999965], [-75.99972461099998, -14.02894723199995], [-75.99771873499992, -14.02776173199993], [-75.99644723499995, -14.027052731999959], [-75.99570310999997, -14.02670885699996], [-75.99332423499993, -14.026593730999934], [-75.98964648499992, -14.026310605999925], [-75.98728710999995, -14.025380855999913], [-75.98442573499995, -14.02394923099996], [-75.9800624849999, -14.021160106999844], [-75.97734573499991, -14.019515606999846], [-75.97005073499992, -14.015796856999884], [-75.96590235999997, -14.013507855999876], [-75.96268360999994, -14.012720730999945], [-75.95710348499989, -14.010861231999911], [-75.95242985999994, -14.010017605999906], [-75.9513672349999, -14.009798856999964], [-75.94953710999994, -14.009724605999907], [-75.9485117349999, -14.009945356999879], [-75.9479609849999, -14.010531231999948], [-75.94722848599997, -14.01155648199989], [-75.94649798499995, -14.01298435699988], [-75.94569135999996, -14.014486355999907], [-75.94466598499997, -14.015474605999884], [-75.94301760999997, -14.016169981999951], [-75.94019923599996, -14.015876980999963], [-75.93715823499997, -14.015328105999913], [-75.93477923499995, -14.014339856999982], [-75.93302148499998, -14.013570356999878], [-75.93250786099992, -14.012619105999875], [-75.93166610999992, -14.012029356999847], [-75.93067760999992, -14.011515606999978], [-75.92913861099998, -14.010710981999921], [-75.92774223499998, -14.010066356999971], [-75.92592773499996, -14.009287106999977], [-75.92423048499995, -14.008876980999958], [-75.92347073499997, -14.00875973199993], [-75.92124610999991, -14.009753856999964], [-75.91990035999987, -14.009929731999932], [-75.9134023599999, -14.01122260699998], [-75.9086328599999, -14.012331856999936], [-75.89802348499995, -14.014259731999914], [-75.89423636099997, -14.015361356999847], [-75.88962110999995, -14.016464856999846], [-75.88417761099993, -14.017222481999909], [-75.88176760999994, -14.017222481999909], [-75.87694535999998, -14.01694723199995], [-75.86680273499991, -14.01527135699996], [-75.86342573499991, -14.014101606999873], [-75.86109960999994, -14.0138476059999], [-75.85625385999992, -14.012283231999959], [-75.84780860999996, -14.010937481999918], [-75.84468748499995, -14.010777355999892], [-75.84336135999996, -14.010998105999874], [-75.84223235999991, -14.011833981999928], [-75.84053698499997, -14.014081981999936], [-75.83919535999996, -14.014742231999946], [-75.83451173499998, -14.015361356999847], [-75.82721098499997, -14.0167403559999], [-75.8218378599999, -14.017773481999939], [-75.81983985999989, -14.017222481999909], [-75.81880660999991, -14.015706980999937], [-75.81646485999988, -14.014123106999875], [-75.81157223499997, -14.01308985699984], [-75.80750973499994, -14.012744106999833], [-75.80633785999999, -14.01219335699983], [-75.80440823499998, -14.01081635599985], [-75.79903498499993, -14.008611355999903], [-75.79621098499996, -14.007921980999981], [-75.79028710999995, -14.00819723199993], [-75.78587885999997, -14.008679731999962], [-75.78436335999999, -14.008542980999948], [-75.78046086099994, -14.007861356999967], [-75.7794159849999, -14.00748435599985], [-75.77775585999996, -14.007246106999958], [-75.77644535999997, -14.007373106999978], [-75.77146285999999, -14.007234356999959], [-75.76863673499992, -14.007183606999831], [-75.76645898499999, -14.007646481999927], [-75.76336748499995, -14.007324231999917], [-75.76171961099993, -14.00698098199996], [-75.75818260999995, -14.007519731999935]]]], "type": "MultiPolygon"}, "properties": {"AREA": 1, "CAPITAL": "SUBTANJALLA", "CODCCPP": "0001", "DEPARTAMEN": "ICA", "DISTRITO": "SUBTANJALLA", "FUENTE": "INEI", "IDDIST": "110112", "IDDPTO": "11", "IDPROV": "1101", "PROVINCIA": "ICA"}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_af159dea9eb0a675e87f1e6a253dd94e.addTo(feature_group_9c8067b51c22d2586e9e2b73ac679d05);
        
    
            feature_group_9c8067b51c22d2586e9e2b73ac679d05.addTo(map_2ab858419474df1436798f3b472cedca);
        
    
            var feature_group_a5f17d438dbaae9cba1084918c320ce5 = L.featureGroup(
                {
}
            );
        
    
            var circle_2cf7a685feaea42f343849bbe3f8c479 = L.circle(
                [-14.0296811, -75.7544843],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_a5f17d438dbaae9cba1084918c320ce5);
        
    
            var circle_5dd9632e3915bf0c1f05df0df2b141b7 = L.circle(
                [-14.0293972, -75.7543906],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_a5f17d438dbaae9cba1084918c320ce5);
        
    
            var circle_61534f53093f5dc9406408ac2d0cdf40 = L.circle(
                [-14.0299852, -75.7545936],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_a5f17d438dbaae9cba1084918c320ce5);
        
    
            feature_group_a5f17d438dbaae9cba1084918c320ce5.addTo(map_2ab858419474df1436798f3b472cedca);
        
    
            var feature_group_e465788ea7e297f23026ce1cff7c560c = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_c12531130c735eea1ebf71ec58a479b8 = L.circleMarker(
                [-14.0296811, -75.7544843],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_e465788ea7e297f23026ce1cff7c560c);
        
    
        var popup_28f8766a6ee20ec814810609051b1762 = L.popup({
  "maxWidth": 460,
});

        
            
                var html_f7d39ef8c5f5079134280dd81fabc683 = $(`<div id="html_f7d39ef8c5f5079134280dd81fabc683" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-365341</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-14.0296811</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-75.7544843</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>Primavera</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>1</td></tr></table></div></div>`)[0];
                popup_28f8766a6ee20ec814810609051b1762.setContent(html_f7d39ef8c5f5079134280dd81fabc683);
            
        

        circle_marker_c12531130c735eea1ebf71ec58a479b8.bindPopup(popup_28f8766a6ee20ec814810609051b1762)
        ;

        
    
    
            circle_marker_c12531130c735eea1ebf71ec58a479b8.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_b39486338c5e9cce45de496c43a3d52c = L.circleMarker(
                [-14.0293972, -75.7543906],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_e465788ea7e297f23026ce1cff7c560c);
        
    
        var popup_b7795d050a75eac0da339f85fde0cde3 = L.popup({
  "maxWidth": 460,
});

        
            
                var html_c72bc1bdf471aa33bb323b8bf2f8c902 = $(`<div id="html_c72bc1bdf471aa33bb323b8bf2f8c902" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-365342</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-14.0293972</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-75.7543906</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>Primavera</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>1</td></tr></table></div></div>`)[0];
                popup_b7795d050a75eac0da339f85fde0cde3.setContent(html_c72bc1bdf471aa33bb323b8bf2f8c902);
            
        

        circle_marker_b39486338c5e9cce45de496c43a3d52c.bindPopup(popup_b7795d050a75eac0da339f85fde0cde3)
        ;

        
    
    
            circle_marker_b39486338c5e9cce45de496c43a3d52c.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_11854a6ef81b88604f43d51d831276a4 = L.circleMarker(
                [-14.0299852, -75.7545936],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_e465788ea7e297f23026ce1cff7c560c);
        
    
        var popup_8229f4faa00ff789191ae300fbdc53f2 = L.popup({
  "maxWidth": 460,
});

        
            
                var html_0b50751bd56cc251b966cdd1210ba924 = $(`<div id="html_0b50751bd56cc251b966cdd1210ba924" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-63013</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-14.0299852</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-75.7545936</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>Primavera</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>1</td></tr></table></div></div>`)[0];
                popup_8229f4faa00ff789191ae300fbdc53f2.setContent(html_0b50751bd56cc251b966cdd1210ba924);
            
        

        circle_marker_11854a6ef81b88604f43d51d831276a4.bindPopup(popup_8229f4faa00ff789191ae300fbdc53f2)
        ;

        
    
    
            circle_marker_11854a6ef81b88604f43d51d831276a4.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            feature_group_e465788ea7e297f23026ce1cff7c560c.addTo(map_2ab858419474df1436798f3b472cedca);
        
    
            var feature_group_00b4cab334657134cb3efca64deab547 = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_a4b542e8ed692678a2f1f1136b583790 = L.circleMarker(
                [-14.00820919, -75.76604954345218],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_7fc6a64574b89569eea58c3fc7c8ef98 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_4e9379209bc250aeb8ff6434a1a33db5 = $(`<div id="html_4e9379209bc250aeb8ff6434a1a33db5" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-05-7</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>04/05/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>06:40</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA PANAMERICANA SUR KM. 295</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ENTRADA A MACACONA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.00820919</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.76604954345218</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL CONDUCTOR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>GIRAR IMPRUDENTEMENTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_7fc6a64574b89569eea58c3fc7c8ef98.setContent(html_4e9379209bc250aeb8ff6434a1a33db5);
            
        

        circle_marker_a4b542e8ed692678a2f1f1136b583790.bindPopup(popup_7fc6a64574b89569eea58c3fc7c8ef98)
        ;

        
    
    
            var circle_marker_7bd5787ed0fb6f920761f8318039dd5c = L.circleMarker(
                [-14.01799625, -75.76281890181394],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_e35f45ecfa56a321eedba5fb05da123a = L.popup({
  "maxWidth": 480,
});

        
            
                var html_e8ddf5d953725394f3f70c518b260e97 = $(`<div id="html_e8ddf5d953725394f3f70c518b260e97" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-10-46</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>16/10/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>05:30</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>SEGUIDO DE CAIDA DE PASAJERO Y ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA PANAMERICANA SUR KM. 295</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALTURA ENTRADA A SUBTANJALLA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.01799625</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.76281890181394</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_e35f45ecfa56a321eedba5fb05da123a.setContent(html_e8ddf5d953725394f3f70c518b260e97);
            
        

        circle_marker_7bd5787ed0fb6f920761f8318039dd5c.bindPopup(popup_e35f45ecfa56a321eedba5fb05da123a)
        ;

        
    
    
            var circle_marker_11e7548b08877aec9c5b49c1180cd703 = L.circleMarker(
                [-14.00787, -75.765825],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_60265f81b306dea8ad3d1b33cab336ac = L.popup({
  "maxWidth": 480,
});

        
            
                var html_95931ea7103b09e4fc535bd0f2c27cb4 = $(`<div id="html_95931ea7103b09e4fc535bd0f2c27cb4" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2022-04-34</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>12/04/2022</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>21:45</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA PANAMERICANA SUR KM. 295</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.00787</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.765825</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_60265f81b306dea8ad3d1b33cab336ac.setContent(html_95931ea7103b09e4fc535bd0f2c27cb4);
            
        

        circle_marker_11e7548b08877aec9c5b49c1180cd703.bindPopup(popup_60265f81b306dea8ad3d1b33cab336ac)
        ;

        
    
    
            var circle_marker_7aee77805260170492f0672f9576fda0 = L.circleMarker(
                [-14.014031, -75.763981],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_f70c082735b7f4859c0fc2f1296dae34 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_8e28fb3c8d436c47e9989db9d92560fd = $(`<div id="html_8e28fb3c8d436c47e9989db9d92560fd" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2022-05-2</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>01/05/2022</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>02:10</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>DESPISTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>C.P.SUR EN EL KM 295- ALTURA DEL CAMBIO DE MACACONA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.014031</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.763981</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_f70c082735b7f4859c0fc2f1296dae34.setContent(html_8e28fb3c8d436c47e9989db9d92560fd);
            
        

        circle_marker_7aee77805260170492f0672f9576fda0.bindPopup(popup_f70c082735b7f4859c0fc2f1296dae34)
        ;

        
    
    
            var circle_marker_fef7e0fecf643b94cc9ef16ceaeef857 = L.circleMarker(
                [-14.00782573, -75.76587204272653],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_55781c5e4f2c8a64e9c49d8926e1662f = L.popup({
  "maxWidth": 480,
});

        
            
                var html_ccded3ccf32fd41cfa524664cbec7a81 = $(`<div id="html_ccded3ccf32fd41cfa524664cbec7a81" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2022-09-103</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>25/09/2022</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>00:00</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>DESPISTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>MUERTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA PANAMERICANA SUR KM.294.100</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALTURA DE LA CEVICHERIA SABOR Y ANCLA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.00782573</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.76587204272653</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_55781c5e4f2c8a64e9c49d8926e1662f.setContent(html_ccded3ccf32fd41cfa524664cbec7a81);
            
        

        circle_marker_fef7e0fecf643b94cc9ef16ceaeef857.bindPopup(popup_55781c5e4f2c8a64e9c49d8926e1662f)
        ;

        
    
    
            var circle_marker_0fda85c69f026504972eefa79ec2c80e = L.circleMarker(
                [-14.03376348, -75.75632772796854],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_18831f677e8bf14cc168f2aafe2ae39f = L.popup({
  "maxWidth": 480,
});

        
            
                var html_ec6af35d06248e2e90e955bc102fccbe = $(`<div id="html_ec6af35d06248e2e90e955bc102fccbe" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2022-11-4</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>10/11/2022</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>02:15</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>POR ALCANCE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>3</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA PANAMERICANA SUR KM. 297</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>FRENTE AL GRIFO PRIMAX</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.03376348</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.75632772796854</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_18831f677e8bf14cc168f2aafe2ae39f.setContent(html_ec6af35d06248e2e90e955bc102fccbe);
            
        

        circle_marker_0fda85c69f026504972eefa79ec2c80e.bindPopup(popup_18831f677e8bf14cc168f2aafe2ae39f)
        ;

        
    
    
            var circle_marker_af84a8097ceb6499217a5b086fc18ae0 = L.circleMarker(
                [-14.01932406, -75.7503560174169],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_ca2d0544a527a32c0d31a0959918e7ee = L.popup({
  "maxWidth": 480,
});

        
            
                var html_5401cf982175b0f5123a924657880c08 = $(`<div id="html_5401cf982175b0f5123a924657880c08" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2023-10-23</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>18/10/2023</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>06:40</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ESPECIAL</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AA. HH.  VIRGEN DEL CHAPI. REF. ALTURA DEL PUNTO CRIOLLO-SUBTANJALLA </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.01932406</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.7503560174169</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL PEAT√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>OTRO (IMPRUDENCIA DEL PEAT√ìN)</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'>NO TOMAR SUS PRECAUCIONES</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_ca2d0544a527a32c0d31a0959918e7ee.setContent(html_5401cf982175b0f5123a924657880c08);
            
        

        circle_marker_af84a8097ceb6499217a5b086fc18ae0.bindPopup(popup_ca2d0544a527a32c0d31a0959918e7ee)
        ;

        
    
    
            var circle_marker_30ceff7d000ed72b0d40d8443bf237d9 = L.circleMarker(
                [-14.029773, -75.754567],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_dc5b31dd8f9a1b268b00eb529f994fe8 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_f70806fc6b9ec081962b07fdf7f2c43f = $(`<div id="html_f70806fc6b9ec081962b07fdf7f2c43f" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2024-05-94</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>28/05/2024</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>11:30</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AV. PRIMAVERA </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALTURA DE LA LOZA DEPORTIVA DEL CASERIO DE ARREBALES </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.029773</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.754567</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>EN PROCESO DE INVESTIGACI√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>NO CUENTA CON CAUSA ESPECIFICA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>NINGUNA</td></tr></table></div></div>`)[0];
                popup_dc5b31dd8f9a1b268b00eb529f994fe8.setContent(html_f70806fc6b9ec081962b07fdf7f2c43f);
            
        

        circle_marker_30ceff7d000ed72b0d40d8443bf237d9.bindPopup(popup_dc5b31dd8f9a1b268b00eb529f994fe8)
        ;

        
    
    
            var circle_marker_f2f35db190d66dcc3a9b419472061a89 = L.circleMarker(
                [-14.041881, -75.752039],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_00b4cab334657134cb3efca64deab547);
        
    
        var popup_854b314e4bc9e6714454196a63f3b0fa = L.popup({
  "maxWidth": 480,
});

        
            
                var html_72dfcea3a6fd8e3926a72bf812f6fdc6 = $(`<div id="html_72dfcea3a6fd8e3926a72bf812f6fdc6" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2024-08-70</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>03/08/2024</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>05:57</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA PANAMERICANA SUR KM. 299</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>(REF. FRENTE AL GRIFO &quot;SACRAMENTO&quot;</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-14.041881</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-75.752039</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL CONDUCTOR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>GIRAR IMPRUDENTEMENTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_854b314e4bc9e6714454196a63f3b0fa.setContent(html_72dfcea3a6fd8e3926a72bf812f6fdc6);
            
        

        circle_marker_f2f35db190d66dcc3a9b419472061a89.bindPopup(popup_854b314e4bc9e6714454196a63f3b0fa)
        ;

        
    
    
            feature_group_00b4cab334657134cb3efca64deab547.addTo(map_2ab858419474df1436798f3b472cedca);
        
    
            map_2ab858419474df1436798f3b472cedca.fitBounds(
                [[-14.0296811, -75.7544843], [-14.0293972, -75.7543906], [-14.0299852, -75.7545936]],
                {}
            );
        
    
            var layer_control_716cee03d5d48922b2e1b1b90a6c761f_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_d40f6c743cdf5458597804dcfb3d4987,
                },
                overlays :  {
                    "contorno" : feature_group_9c8067b51c22d2586e9e2b73ac679d05,
                    "intersecciones: buffers (50m)" : feature_group_a5f17d438dbaae9cba1084918c320ce5,
                    "intersecciones: puntos" : feature_group_e465788ea7e297f23026ce1cff7c560c,
                    "siniestros fatales" : feature_group_00b4cab334657134cb3efca64deab547,
                },
            };
            let layer_control_716cee03d5d48922b2e1b1b90a6c761f = L.control.layers(
                layer_control_716cee03d5d48922b2e1b1b90a6c761f_layers.base_layers,
                layer_control_716cee03d5d48922b2e1b1b90a6c761f_layers.overlays,
                {
  "position": "topright",
  "collapsed": true,
  "autoZIndex": true,
}
            ).addTo(map_2ab858419474df1436798f3b472cedca);

        
    
        feature_group_e465788ea7e297f23026ce1cff7c560c.bringToFront();
        feature_group_00b4cab334657134cb3efca64deab547.bringToFront();
    
    
      (function() {
        var puntosLayer = feature_group_e465788ea7e297f23026ce1cff7c560c;
        var defaultColor = '#1d4ed8';
        var hiliteColor  = '#f59e0b';

        // ---------- Toggle colapsar/expandir ----------
        var box = document.getElementById('zs_tools');
        var btnToggle = document.getElementById('btn_toggle_box');
        var saved = null;
        try { saved = localStorage.getItem('zs_tools_collapsed'); } catch(e) {}
        if (saved === '1') {
          box.classList.add('collapsed');
          btnToggle.textContent = '‚Øà Mostrar';
        }
        function toggleBox() {
          var collapsed = box.classList.toggle('collapsed');
          btnToggle.textContent = collapsed ? '‚Øà Mostrar' : '‚ØÜ Ocultar';
          try { localStorage.setItem('zs_tools_collapsed', collapsed ? '1' : '0'); } catch(e) {}
        }
        btnToggle.addEventListener('click', toggleBox);

        // ---------- Esperar a que el mapa est√© disponible ----------
        var ly_map = null;
        function ensureMap(cb) {
          var tries = 0;
          (function wait() {
            ly_map = (puntosLayer && puntosLayer._map) ? puntosLayer._map : null;
            if (ly_map) { cb(); return; }
            if (tries++ < 80) { setTimeout(wait, 50); }
          })();
        }

        ensureMap(function initTools() {
          // ---------- Utilidades ----------
          function eachMarker(fn) {
            if (!puntosLayer || !puntosLayer._layers) return;
            Object.values(puntosLayer._layers).forEach(function(ly) {
              if (ly && typeof ly.setStyle === 'function') fn(ly);
            });
          }

          function getTooltipText(ly) {
            try {
              var t = ly.getTooltip();
              return t ? String(t.getContent() || '').toLowerCase() : '';
            } catch(e) { return ''; }
          }

          function clearHighlights() {
            eachMarker(function(ly) {
              ly.setStyle({ color: defaultColor, fillColor: defaultColor });
            });
          }

          // ---------- B√∫squeda ----------
          function searchAndHighlight() {
            var qn_raw = (document.getElementById('q_name').value || '');
            var qc_raw = (document.getElementById('q_code').value || '');
            var qn = qn_raw.toLowerCase();
            var qc = qc_raw.toLowerCase();

            var useName = qn_raw.trim().length > 0;
            var useCode = qc_raw.trim().length > 0;

            clearHighlights();
            if (!useName && !useCode) return;

            var matchedLatLngs = [];
            eachMarker(function(ly) {
              var txt = getTooltipText(ly); // "nombre | codigo"
              var parts = txt.split('|', 2);
              var nameTxt = (parts[0] || '').trim();
              var codeTxt = (parts[1] || '').trim();

              var matchName = useName ? (nameTxt.indexOf(qn) !== -1) : false;
              var matchCode = useCode ? (codeTxt.indexOf(qc) !== -1) : false;

              if (matchName || matchCode) {
                ly.setStyle({ color: hiliteColor, fillColor: hiliteColor });
                if (ly.getLatLng) matchedLatLngs.push(ly.getLatLng());
              }
            });

            if (matchedLatLngs.length > 0) {
              var group = L.featureGroup(matchedLatLngs.map(function(ll) { return L.marker(ll); }));
              try { ly_map.fitBounds(group.getBounds().pad(0.2)); } catch(e) {}
            }
          }

          document.getElementById('btn_search').addEventListener('click', searchAndHighlight);
          document.getElementById('btn_clear').addEventListener('click', function() {
            document.getElementById('q_name').value = '';
            document.getElementById('q_code').value = '';
            clearHighlights();
          });
          ['q_name','q_code'].forEach(function(id) {
            var el = document.getElementById(id);
            el.addEventListener('keydown', function(ev) { if (ev.key === 'Enter') searchAndHighlight(); });
          });

          // ---------- Pin por coordenadas ----------
          var coordLayer = L.layerGroup().addTo(ly_map);
          function goToXY() {
            var x = parseFloat((document.getElementById('q_x').value || '').replace(',', '.'));
            var y = parseFloat((document.getElementById('q_y').value || '').replace(',', '.'));
            if (!isFinite(x) || !isFinite(y)) return;
            coordLayer.clearLayers();
            var mk = L.marker([y, x], { draggable:false, title: 'Punto (Y,X): '+y+', '+x });
            mk.addTo(coordLayer);
            ly_map.setView([y, x], Math.max(ly_map.getZoom(), 17));
          }
          function clearXY() { coordLayer.clearLayers(); }
          document.getElementById('btn_xy_go').addEventListener('click', goToXY);
          document.getElementById('btn_xy_clear').addEventListener('click', clearXY);

          // ---------- Medici√≥n ----------
          var measuring = false;
          var mA = null, mB = null, mLine = null;

          function haversine(lat1, lon1, lat2, lon2) {
            var R = 6371000;
            var dLat = (lat2-lat1) * Math.PI/180;
            var dLon = (lon2-lon1) * Math.PI/180;
            var a = Math.sin(dLat/2)*Math.sin(dLat/2) +
                    Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180) *
                    Math.sin(dLon/2)*Math.sin(dLon/2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
          }

          function updateMeasure() {
            if (!(mA && mB)) return;
            var a = mA.getLatLng(), b = mB.getLatLng();
            var d = haversine(a.lat, a.lng, b.lat, b.lng);
            var txt = (d >= 1000) ? (d/1000).toFixed(3)+' km' : Math.round(d)+' m';

            if (!mLine) {
              mLine = L.polyline([a, b], { color: '#111827', weight: 3, dashArray: '6,4' })
                .bindTooltip(txt, { permanent:true, direction:'center', className:'dist-on-line' })
                .addTo(ly_map);
            } else {
              mLine.setLatLngs([a, b]);
              mLine.setTooltipContent(txt);
            }
          }

          function clearMeasure() {
            if (mA) ly_map.removeLayer(mA); mA = null;
            if (mB) ly_map.removeLayer(mB); mB = null;
            if (mLine) ly_map.removeLayer(mLine); mLine = null;
          }

          function toggleMeasure() {
            measuring = !measuring;
            var stateSpan = document.getElementById('measure_state');
            stateSpan.textContent = measuring ? 'Activo' : 'Desactivado';
            stateSpan.style.color = measuring ? '#065f46' : '#991b1b';
            if (!measuring) {
              clearMeasure();
              ly_map.getContainer().style.cursor = '';
              return;
            }
            ly_map.getContainer().style.cursor = 'crosshair';
          }

          document.getElementById('btn_measure_toggle').addEventListener('click', toggleMeasure);

          ly_map.on('click', function(ev) {
            if (!measuring) return;
            if (!mA) {
              mA = L.marker(ev.latlng, { draggable:true, title:'Punto A' }).addTo(ly_map);
              mA.on('drag', updateMeasure);
            } else if (!mB) {
              mB = L.marker(ev.latlng, { draggable:true, title:'Punto B' }).addTo(ly_map);
              mB.on('drag', updateMeasure);
            } else {
              mB.setLatLng(ev.latlng);
            }
            updateMeasure();
          });

          // ---------- Abrir vista actual en Google Maps ----------
          function openInGoogleMaps() {
            var c = ly_map.getCenter();
            var z = ly_map.getZoom();
            var url = 'https://www.google.com/maps/@' + c.lat + ',' + c.lng + ',' + z + 'z';
            window.open(url, '_blank');
          }
          document.getElementById('btn_open_gmaps').addEventListener('click', openInGoogleMaps);
        });
      })();
    
</script>
</html>