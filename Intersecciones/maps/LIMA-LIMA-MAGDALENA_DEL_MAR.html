<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_b11c8dbf18cadd36f06e93a8ada84af7 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
</head>
<body>
    
    
    <style>
      .leaflet-interactive.zs-buffer { pointer-events: none !important; }

      .searchbar-wrap {
        position: fixed; right: 20px; bottom: 140px;
        z-index: 10000; background: rgba(255,255,255,0.95);
        border: 1px solid #e5e7eb;
        padding: 10px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        font-family: system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
        display: flex; flex-direction: column; gap: 8px; min-width: 300px; max-width: 92vw;
      }

      .searchbar-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
      .searchbar-title { font-weight: 700; font-size: 14px; color: #111827; }
      .toggle-btn { border: 0; border-radius: 8px; padding: 4px 10px; font-weight: 700; cursor: pointer; background: #111827; color: #fff; }
      .tools-body { display: flex; flex-direction: column; gap: 8px; }

      .row-flex { display:flex; gap:8px; align-items:center; }
      .col-flex { display:flex; flex-direction:column; gap:8px; }
      .row-flex input, .col-flex input { border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; font-size:13px; flex:1; }
      .row-flex button, .col-flex button { border:0; border-radius:8px; padding:6px 10px; font-weight:600; cursor:pointer; }
      .btn-dark  { background:#111827; color:#fff; }
      .btn-gray  { background:#6b7280; color:#fff; }
      .btn-green { background:#065f46; color:#fff; }
      .btn-red   { background:#991b1b; color:#fff; }
      .pill { font-size:12px; padding:4px 8px; border-radius:999px; }
      .dist-on-line { background: rgba(17,24,39,0.85); color: #fff; padding: 2px 6px; border-radius: 6px; font-size: 12px; border: 1px solid rgba(255,255,255,0.2); }

      .searchbar-wrap.collapsed { padding: 8px 10px; }
      .searchbar-wrap.collapsed .tools-body { display: none; }

      @media (max-width: 480px) {
        .searchbar-wrap { right: 12px; bottom: 12px; min-width: 240px; }
      }
    </style>
    
    
    <div style="
        position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
        z-index: 9999; background: rgba(255,255,255,0.9);
        padding: 8px 14px; border-radius: 8px; font-weight: 600;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;">
        LIMA-LIMA-MAGDALENA_DEL_MAR
    </div>
    
    
    <div id="legend-box" style="
        position: fixed; bottom: 20px; right: 20px; z-index: 9999;
        background: rgba(255,255,255,0.9); padding: 10px 12px; border-radius: 8px;
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15); line-height: 1.4; min-width: 240px;">
        <div style="font-weight: 600; margin-bottom: 6px;">Leyenda</div>
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:4px;">
            <span style="display:inline-block; width:14px; height:14px; background:#1d4ed8; border-radius:50%;"></span>
            <span>Azul: Intersecci√≥n priorizada</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px;">
            <span style="display:inline-block; width:14px; height:14px; background:#d90429; border-radius:50%;"></span>
            <span>Rojo: Siniestro fatal</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px; margin-top:6px;">
            <span style="display:inline-block; width:14px; height:14px; background:#f59e0b; border-radius:50%;"></span>
            <span>Amarillo: Coincidencia de b√∫squeda</span>
        </div>
    </div>
    
    
            <div class="folium-map" id="map_b11c8dbf18cadd36f06e93a8ada84af7" ></div>
        
    
      <div class="searchbar-wrap" id="zs_tools">
        <div class="searchbar-header">
          <div class="searchbar-title">Herramientas</div>
          <button id="btn_toggle_box" class="toggle-btn" title="Mostrar/Ocultar">‚ØÜ Ocultar</button>
        </div>

        <div class="tools-body">
          <div class="col-flex">
            <input id="q_name" type="text" placeholder="Buscar por nombre">
            <input id="q_code" type="text" placeholder="Buscar por c√≥digo">
          </div>
          <div class="row-flex">
            <button id="btn_search" class="btn-dark">Buscar</button>
            <button id="btn_clear" class="btn-gray">Limpiar</button>
          </div>

          <hr style="border:none;border-top:1px solid #e5e7eb; margin:4px 0;">

          <div class="col-flex" title="Coordenadas en grados decimales">
            <input id="q_x" type="text" placeholder="Longitud Ejem: -77.15435">
            <div class="row-flex">
              <input id="q_y" type="text" placeholder="Latitud Ejem: -15.54648">
              <button id="btn_xy_go" class="btn-green" title="Centrar en coordenadas">üîç</button>
              <button id="btn_xy_clear" class="btn-red"   title="Quitar pin de coordenadas">‚úï</button>
            </div>
          </div>

          <div class="row-flex">
            <button id="btn_measure_toggle" class="btn-dark pill" title="Medir distancia">Medir distancia</button>
            <span id="measure_state" style="font-size:12px; color:#991b1b">Desactivado</span>
          </div>

          <div class="row-flex">
            <button id="btn_open_gmaps" class="btn-dark" title="Abrir esta vista en Google Maps">Abrir en Google Maps</button>
          </div>
        </div>
      </div>
    
</body>
<script>
    
    
            var map_b11c8dbf18cadd36f06e93a8ada84af7 = L.map(
                "map_b11c8dbf18cadd36f06e93a8ada84af7",
                {
                    center: [-12.103826699999999, -77.0644279],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 14,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );
            L.control.scale().addTo(map_b11c8dbf18cadd36f06e93a8ada84af7);

            

        
    
            var tile_layer_3d77a4c5cdd140fe39563b703dc9d7c1 = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 19,
  "maxNativeZoom": 19,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_3d77a4c5cdd140fe39563b703dc9d7c1.addTo(map_b11c8dbf18cadd36f06e93a8ada84af7);
        
    
            var feature_group_8bbc1770b210108f8044fe0eb9608c43 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_500c3511d2236c66478801af550da1a9_styler(feature) {
            switch(feature.properties.IDDPTO) {
                default:
                    return {"color": "#222222", "fill": true, "fillColor": "#9ca3af", "fillOpacity": 0.3, "opacity": 1.0, "weight": 2.5};
            }
        }

        function geo_json_500c3511d2236c66478801af550da1a9_onEachFeature(feature, layer) {

            layer.on({
            });
        };
        var geo_json_500c3511d2236c66478801af550da1a9 = L.geoJson(null, {
                onEachFeature: geo_json_500c3511d2236c66478801af550da1a9_onEachFeature,
            
                style: geo_json_500c3511d2236c66478801af550da1a9_styler,
            ...{
}
        });

        function geo_json_500c3511d2236c66478801af550da1a9_add (data) {
            geo_json_500c3511d2236c66478801af550da1a9
                .addData(data);
        }
            geo_json_500c3511d2236c66478801af550da1a9_add({"features": [{"geometry": {"coordinates": [[[[-77.07210348599989, -12.0835839799999], [-77.06347836099997, -12.086652354999956], [-77.06332811199997, -12.086620479999965], [-77.06314261199998, -12.086542978999887], [-77.0624159859999, -12.087042979999865], [-77.05498436099998, -12.091886729999885], [-77.05576761099996, -12.093386729999906], [-77.0573847359999, -12.092552729999909], [-77.05888286099997, -12.096404354999947], [-77.05838473699998, -12.096671854999954], [-77.05936911099997, -12.09862110499995], [-77.05948436099999, -12.099003854999978], [-77.05995111099998, -12.100021479999896], [-77.0602012359999, -12.099888729999918], [-77.0607949859999, -12.10094322999987], [-77.06057423599992, -12.101070354999933], [-77.06068361099994, -12.1014609799999], [-77.06074611099996, -12.101820354999973], [-77.06077936099996, -12.102132853999876], [-77.06066798599988, -12.102523479999888], [-77.06054298699985, -12.10296285499993], [-77.06062111199998, -12.103259729999877], [-77.06062498599988, -12.103728479999916], [-77.06051173599991, -12.104212854999957], [-77.06035548599988, -12.104652354999814], [-77.06030861199997, -12.10516797999992], [-77.0604687359999, -12.107011729999897], [-77.0607089859999, -12.10766010499998], [-77.06080273599991, -12.107597479999868], [-77.06085936199997, -12.107580104999954], [-77.06091598599988, -12.107554729999947], [-77.0609687359999, -12.107531229999893], [-77.06102723599986, -12.107519479999894], [-77.06108186199992, -12.10750972999989], [-77.06121098599994, -12.10749810499982], [-77.06126561099995, -12.107581979999907], [-77.0613027359999, -12.107671854999978], [-77.06134573599991, -12.107708979999927], [-77.06140623699997, -12.107716854999978], [-77.06146286099994, -12.10768947999992], [-77.06148223599985, -12.10763672999991], [-77.06146673599989, -12.107494104999944], [-77.06137886099998, -12.107435729999963], [-77.06135548599991, -12.107374979999918], [-77.06131836099996, -12.107326229999899], [-77.06123636099994, -12.107287104999955], [-77.06114261099998, -12.10718560499987], [-77.06108186199992, -12.107091854999965], [-77.06103911099996, -12.107029354999952], [-77.06090236099999, -12.106845729999918], [-77.06087111099998, -12.10679685499997], [-77.06086523699997, -12.106720729999893], [-77.06092186099994, -12.106576229999916], [-77.06100786199994, -12.10642010499987], [-77.06107811099997, -12.106341854999869], [-77.06114448599999, -12.106257854999967], [-77.06122461199993, -12.10618560499995], [-77.06127536099996, -12.106144479999898], [-77.06141798599992, -12.106042979999927], [-77.06151173599989, -12.105976604999967], [-77.06164648699985, -12.105874979999896], [-77.06175386099994, -12.105800729999885], [-77.0618437359999, -12.105749979999928], [-77.06192573599992, -12.10568947999991], [-77.06202736099993, -12.105617229999893], [-77.06212111099995, -12.10557035499994], [-77.06223048599992, -12.105505854999933], [-77.06236911199994, -12.105425729999922], [-77.06249998599992, -12.105331979999903], [-77.06257611099994, -12.105267604999938], [-77.06262698699999, -12.105210979999924], [-77.06274811199995, -12.105136729999913], [-77.0629159859999, -12.105039104999946], [-77.06306636099998, -12.104953104999936], [-77.06331248599992, -12.104781229999901], [-77.06350198599989, -12.104664104999813], [-77.06355661099997, -12.10462885499993], [-77.06371286099994, -12.104572229999917], [-77.0638144859999, -12.104509729999904], [-77.06389648599992, -12.104484354999954], [-77.06397073699998, -12.104496229999938], [-77.06406836099995, -12.10455660499997], [-77.06415823599991, -12.104617229999917], [-77.06421486099998, -12.10465435499998], [-77.06425586099994, -12.104703104999942], [-77.0643319859999, -12.104753854999956], [-77.06440423599992, -12.104798853999966], [-77.06446673599987, -12.104884729999924], [-77.06456248699999, -12.104880854999976], [-77.06458023599993, -12.104802729999903], [-77.06454098599988, -12.104746104999947], [-77.06450198699986, -12.104703104999942], [-77.06445698599993, -12.104660103999834], [-77.06435736199995, -12.104558604999966], [-77.06429298599988, -12.104503854999962], [-77.06420898599993, -12.104456979999895], [-77.06411911199996, -12.10436135499998], [-77.06407811199995, -12.104289104999964], [-77.0640527359999, -12.1042187299999], [-77.06402348599994, -12.104134729999885], [-77.06402923699989, -12.104040979999922], [-77.0640819869999, -12.103847604999942], [-77.06415036099997, -12.103740229999914], [-77.06421873699998, -12.103650354999957], [-77.06429686199994, -12.10357622999993], [-77.0643457359999, -12.103519479999875], [-77.06446098599992, -12.103437479999911], [-77.0646444859999, -12.103283229999931], [-77.06476173599992, -12.103175729999919], [-77.06484573599994, -12.103109354999958], [-77.06492386099995, -12.103035104999947], [-77.06500386099998, -12.102958979999926], [-77.06510348699999, -12.102876979999905], [-77.06519336199995, -12.102820354999949], [-77.06525973699985, -12.102783229999886], [-77.06532423599992, -12.102738229999886], [-77.06539848599994, -12.102701229999923], [-77.06544923699988, -12.102664104999974], [-77.06554886099997, -12.102632854999968], [-77.06563086199998, -12.102591854999957], [-77.0657167359999, -12.10252735499995], [-77.0657734859999, -12.10248235499995], [-77.06587111099998, -12.102439354999944], [-77.06592386099999, -12.102404354999976], [-77.06601761099995, -12.10231635499997], [-77.06610161199995, -12.102248104999944], [-77.0662479859999, -12.102142604999813], [-77.06636911199996, -12.10207222999992], [-77.06642186099998, -12.102052729999912], [-77.06649411099994, -12.102021479999905], [-77.06658011099995, -12.101980479999895], [-77.06668161099998, -12.101935604999937], [-77.06673248599992, -12.101908229999935], [-77.06682423599989, -12.101847604999932], [-77.06691211099997, -12.101794979999909], [-77.06699998599993, -12.101751979999904], [-77.06711911099995, -12.101703104999956], [-77.06722648599992, -12.101636854999981], [-77.06730073599988, -12.101597604999938], [-77.06736911199994, -12.101560604999975], [-77.0674512359999, -12.101519479999922], [-77.06750973599992, -12.101498104999962], [-77.06758986099999, -12.101468729999908], [-77.06769536099995, -12.101421854999955], [-77.06780661099998, -12.10137885499995], [-77.06788861099994, -12.101341979999916], [-77.06798048699989, -12.101304729999924], [-77.06808398599992, -12.101267604999975], [-77.06816798599993, -12.101226604999965], [-77.06823823699989, -12.101201229999901], [-77.06839848599992, -12.101130854999951], [-77.06852348599995, -12.101083979999885], [-77.06859961199996, -12.101046854999936], [-77.06867973699991, -12.101001979999921], [-77.06878511099995, -12.100956979999921], [-77.06886136099996, -12.100917979999906], [-77.06894723599993, -12.10088672899991], [-77.06899411199998, -12.10084960499995], [-77.06905861099995, -12.100831979999896], [-77.06911323599991, -12.100804729999936], [-77.06919723599992, -12.10077347999993], [-77.06926561199998, -12.100757854999813], [-77.06936136199994, -12.100712854999927], [-77.06946098599991, -12.100671854999973], [-77.06966411199994, -12.100580104999949], [-77.07060936199997, -12.100136729999917], [-77.0708027359999, -12.1000194799999], [-77.07085161099997, -12.099980354999957], [-77.07091798699992, -12.099943354999937], [-77.07100786199999, -12.099888729999918], [-77.07110148599992, -12.09983197899993], [-77.07121286099994, -12.099751979999894], [-77.07131448599995, -12.099691354999948], [-77.07140036199996, -12.099642604999929], [-77.07148823699998, -12.099607478999928], [-77.0715937359999, -12.099566354999979], [-77.07165236199995, -12.099533229999906], [-77.07181248599994, -12.099509729999909], [-77.07188673699989, -12.09950972899992], [-77.07194923599991, -12.099624979999874], [-77.07204886199997, -12.0997949799999], [-77.07211523599995, -12.099914103999879], [-77.07219723599991, -12.100037104999956], [-77.07227536099998, -12.100013729999887], [-77.07223048599991, -12.09987697999992], [-77.07213473699989, -12.09969722999989], [-77.07202148599993, -12.099488229999906], [-77.07198636099997, -12.099421853999957], [-77.07193561099996, -12.099330104999979], [-77.07203911099998, -12.099083979999875], [-77.07208398599994, -12.098978479999914], [-77.07217173599992, -12.098781229999872], [-77.0722519869999, -12.098624979999897], [-77.07234373699998, -12.098503854999933], [-77.07240436099983, -12.098423854999965], [-77.0724804859999, -12.098363229999904], [-77.07255661099998, -12.098318354999947], [-77.07261323699998, -12.098279354999931], [-77.07268948699988, -12.09822660499998], [-77.07282423599992, -12.098134728999923], [-77.07288673599993, -12.098099604999959], [-77.07299611099995, -12.098021479999886], [-77.07307998699997, -12.097968729999877], [-77.07317573599994, -12.097923854999976], [-77.07325973699989, -12.09787697999991], [-77.07333398599991, -12.097837854999966], [-77.07339261099997, -12.097818354999959], [-77.07344923599993, -12.097880854999971], [-77.07353336099999, -12.09791797999992], [-77.0735937359999, -12.097843729999909], [-77.07353498699996, -12.09772460499994], [-77.07357036099995, -12.097654479999903], [-77.07368548699998, -12.097576229999902], [-77.073798862, -12.097527354999954], [-77.07392573599992, -12.097458979999885], [-77.07410161199994, -12.097386729999926], [-77.07431036099996, -12.097259729999905], [-77.07449023599992, -12.097187479999889], [-77.07467386199994, -12.097105479999925], [-77.07484361099995, -12.097013604999972], [-77.07500398699989, -12.096941354999956], [-77.07515036099994, -12.097025354999971], [-77.07523236199995, -12.096988104999923], [-77.07521286199994, -12.096871104999934], [-77.07533198699991, -12.096792979999918], [-77.07543173599993, -12.09674410499997], [-77.07556248599991, -12.096675729999902], [-77.07570111099994, -12.096599604999938], [-77.07593561099998, -12.09649222999991], [-77.07614061199996, -12.096394479999901], [-77.07623048699992, -12.096343729999887], [-77.07634961199994, -12.096285104999936], [-77.07645123599991, -12.096246104999977], [-77.07658598699993, -12.096211104999952], [-77.07662698599995, -12.09627147999987], [-77.07670511199996, -12.096302729999877], [-77.07674223599992, -12.096248104999972], [-77.07670698599992, -12.09612885499996], [-77.07678711099999, -12.096068354999943], [-77.07692786099989, -12.09598635499998], [-77.07704098699992, -12.09593360499997], [-77.07713673599994, -12.095890604999965], [-77.07723436099997, -12.095853479999903], [-77.07734373599993, -12.095785229999933], [-77.07745898699989, -12.095699229999923], [-77.07756636099998, -12.095644479999862], [-77.07762698599993, -12.09561135499996], [-77.07767573599995, -12.095576229999892], [-77.07747261099996, -12.095025354999962], [-77.07618748699991, -12.091535104999934], [-77.07511523699992, -12.088595604999966], [-77.0740937359999, -12.088941354999974], [-77.07374998599994, -12.087960979999878], [-77.07491411099983, -12.0875019799999], [-77.07392186099997, -12.085679729999868], [-77.07353911199993, -12.085814479999897], [-77.07228511099999, -12.083755854999936], [-77.07221873599991, -12.083771479999882], [-77.07210348599989, -12.0835839799999]]]], "type": "MultiPolygon"}, "properties": {"AREA": 1, "CAPITAL": "MAGDALENA DEL MAR", "CODCCPP": "0001", "DEPARTAMEN": "LIMA", "DISTRITO": "MAGDALENA DEL MAR", "FUENTE": "INEI", "IDDIST": "150120", "IDDPTO": "15", "IDPROV": "1501", "PROVINCIA": "LIMA"}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_500c3511d2236c66478801af550da1a9.addTo(feature_group_8bbc1770b210108f8044fe0eb9608c43);
        
    
            feature_group_8bbc1770b210108f8044fe0eb9608c43.addTo(map_b11c8dbf18cadd36f06e93a8ada84af7);
        
    
            var feature_group_648334114a8efcfa62e582fdc7eb522b = L.featureGroup(
                {
}
            );
        
    
            var circle_db040edf9e78faf6a37b59ec893d2ebc = L.circle(
                [-12.1038031, -77.0644513],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_648334114a8efcfa62e582fdc7eb522b);
        
    
            var circle_39e53a4d1dcb70606b276e3c49ddf464 = L.circle(
                [-12.1038503, -77.0644045],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_648334114a8efcfa62e582fdc7eb522b);
        
    
            feature_group_648334114a8efcfa62e582fdc7eb522b.addTo(map_b11c8dbf18cadd36f06e93a8ada84af7);
        
    
            var feature_group_24f0d68e14ec60e8aecb383b34803c39 = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_986c44606cacf7277aa08f140acc82f3 = L.circleMarker(
                [-12.1038031, -77.0644513],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_24f0d68e14ec60e8aecb383b34803c39);
        
    
        var popup_471491123f004a55e85ed10508b1a064 = L.popup({
  "maxWidth": 460,
});

        
            
                var html_730401d9c0dec81817a6a3ad631fb9ba = $(`<div id="html_730401d9c0dec81817a6a3ad631fb9ba" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-274679</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-12.1038031</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-77.0644513</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>0</td></tr></table></div></div>`)[0];
                popup_471491123f004a55e85ed10508b1a064.setContent(html_730401d9c0dec81817a6a3ad631fb9ba);
            
        

        circle_marker_986c44606cacf7277aa08f140acc82f3.bindPopup(popup_471491123f004a55e85ed10508b1a064)
        ;

        
    
    
            circle_marker_986c44606cacf7277aa08f140acc82f3.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_ad925e6085034fe947e4732a318b27d5 = L.circleMarker(
                [-12.1038503, -77.0644045],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_24f0d68e14ec60e8aecb383b34803c39);
        
    
        var popup_c833cbf70ccb0680616b776c64e53909 = L.popup({
  "maxWidth": 460,
});

        
            
                var html_b6eec53dec2a3d67c1c992eaff5c3b62 = $(`<div id="html_b6eec53dec2a3d67c1c992eaff5c3b62" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-757571</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-12.1038503</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-77.0644045</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>1</td></tr></table></div></div>`)[0];
                popup_c833cbf70ccb0680616b776c64e53909.setContent(html_b6eec53dec2a3d67c1c992eaff5c3b62);
            
        

        circle_marker_ad925e6085034fe947e4732a318b27d5.bindPopup(popup_c833cbf70ccb0680616b776c64e53909)
        ;

        
    
    
            circle_marker_ad925e6085034fe947e4732a318b27d5.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            feature_group_24f0d68e14ec60e8aecb383b34803c39.addTo(map_b11c8dbf18cadd36f06e93a8ada84af7);
        
    
            var feature_group_de9a264f91578eda742d123aaebbe9f7 = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_23cfc4be6427969d5e4b016ee11f8dfe = L.circleMarker(
                [-12.0968101, -77.0752579074752],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_bec676d9ca56d8aba83a288bd34e1968 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_59c957f666cda302a617de5ca38dc7d9 = $(`<div id="html_59c957f666cda302a617de5ca38dc7d9" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-02-237</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>21/02/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>21:40</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE CON OBJETO FIJO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'> -</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CIRCUITOS LAS PLAYAS. ALTURA DE LA CASETA DEL SEGURO LA POSITIVA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>-</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.0968101</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.0752579074752</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>SOLEADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_bec676d9ca56d8aba83a288bd34e1968.setContent(html_59c957f666cda302a617de5ca38dc7d9);
            
        

        circle_marker_23cfc4be6427969d5e4b016ee11f8dfe.bindPopup(popup_bec676d9ca56d8aba83a288bd34e1968)
        ;

        
    
    
            var circle_marker_a029a6a002b5fa0801de697dce7e326e = L.circleMarker(
                [-12.096321, -77.076241],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_5500cdae24f8b37c06899b330d68abea = L.popup({
  "maxWidth": 480,
});

        
            
                var html_d621262afed5abfd8460aaeb13031759 = $(`<div id="html_d621262afed5abfd8460aaeb13031759" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2022-02-229</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>14/02/2022</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>05:30</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>DESPISTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>CAIDA DE PASAJERO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CIRCUITO DE PLAYAS</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALT. CACUNACAR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.096321</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.076241</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_5500cdae24f8b37c06899b330d68abea.setContent(html_d621262afed5abfd8460aaeb13031759);
            
        

        circle_marker_a029a6a002b5fa0801de697dce7e326e.bindPopup(popup_5500cdae24f8b37c06899b330d68abea)
        ;

        
    
    
            var circle_marker_6d7dcf2d3c39b3b14c38f1f7e985de49 = L.circleMarker(
                [-12.10373775, -77.0640075684988],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_a23759fc48c782ab700712be9adcd0f1 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_57f879e055d1dfafc4845a7a0337ead6 = $(`<div id="html_57f879e055d1dfafc4845a7a0337ead6" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2022-08-156</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>15/08/2022</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>00:20</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>DESPISTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>CHOQUE, VOLCADURA Y CA√çDA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CIRCUITO DE PLAYAS COSTA VERDE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALTURA DE BAJADA DE MARBELLA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.10373775</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.0640075684988</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>INDICA QUE COLISIONA CONTRA UNA SE√ëAL, LA CUAL NO EST√Å ESPECIFICADA.</td></tr></table></div></div>`)[0];
                popup_a23759fc48c782ab700712be9adcd0f1.setContent(html_57f879e055d1dfafc4845a7a0337ead6);
            
        

        circle_marker_6d7dcf2d3c39b3b14c38f1f7e985de49.bindPopup(popup_a23759fc48c782ab700712be9adcd0f1)
        ;

        
    
    
            var circle_marker_3cb99e3068fcf41e24e8826285e76b6e = L.circleMarker(
                [-12.09769008, -77.07298478904971],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_0fee0a84d94eefde87ddaa08899e75b0 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_b6e2c1b599b98ea29d394229bab353ad = $(`<div id="html_b6e2c1b599b98ea29d394229bab353ad" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2023-04-147</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>03/04/2023</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>06:50</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CIRCUITO DE PLAYA COSTA VERDE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALTURA BAJADA SUCRE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.09769008</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.07298478904971</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL CONDUCTOR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>CONDUCIR EN ESTADO DE EBRIEDAD Y/O DROGADICCI√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>NINGUNA</td></tr></table></div></div>`)[0];
                popup_0fee0a84d94eefde87ddaa08899e75b0.setContent(html_b6e2c1b599b98ea29d394229bab353ad);
            
        

        circle_marker_3cb99e3068fcf41e24e8826285e76b6e.bindPopup(popup_0fee0a84d94eefde87ddaa08899e75b0)
        ;

        
    
    
            var circle_marker_459cff08e7d303b43c2e9e5005e6d763 = L.circleMarker(
                [-12.09143431, -77.06724141],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_7c3f1ddf1b30174f19afe80f88523976 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_2634070a4299672274157ba51e4b91bf = $(`<div id="html_2634070a4299672274157ba51e4b91bf" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2023-10-102</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>10/10/2023</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>15:45</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AV. BRASIL CDRA. 34</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALTURA JR. SAN MARTIN CON FELIX DIBOS</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.09143431</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.06724141</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL PEAT√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>OTRO (IMPRUDENCIA DEL PEAT√ìN)</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>NINGUNA</td></tr></table></div></div>`)[0];
                popup_7c3f1ddf1b30174f19afe80f88523976.setContent(html_2634070a4299672274157ba51e4b91bf);
            
        

        circle_marker_459cff08e7d303b43c2e9e5005e6d763.bindPopup(popup_7c3f1ddf1b30174f19afe80f88523976)
        ;

        
    
    
            var circle_marker_cab6ca161e69e4937dbd10d45041868d = L.circleMarker(
                [-12.09758753, -77.07348284959961],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_4238a93851650a93d1f652e17fdce1d6 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_42fef145f9604a0b5e225721fdce0f18 = $(`<div id="html_42fef145f9604a0b5e225721fdce0f18" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2024-06-111</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>21/06/2024</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>01:00</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>DESPISTE Y VOLCADURA FATAL</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>COSTA VERDE ALTRA. DEL ESTCIONAMIENTO NRO 2</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALTRA. DEL ESTCIONAMIENTO NRO 2</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.09758753</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.07348284959961</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>EN PROCESO DE INVESTIGACI√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>NO CUENTA CON CAUSA ESPECIFICA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_4238a93851650a93d1f652e17fdce1d6.setContent(html_42fef145f9604a0b5e225721fdce0f18);
            
        

        circle_marker_cab6ca161e69e4937dbd10d45041868d.bindPopup(popup_4238a93851650a93d1f652e17fdce1d6)
        ;

        
    
    
            var circle_marker_5192237cfef435de75e52952403cb9d6 = L.circleMarker(
                [-12.09139754, -77.06727052809207],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_47729ab69731fd7bde6f40440a72ba3f = L.popup({
  "maxWidth": 480,
});

        
            
                var html_bffd20fe64c74216406fffae6ae13506 = $(`<div id="html_bffd20fe64c74216406fffae6ae13506" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2023-10-184</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>10/10/2023</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>15:45</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AV. BRASIL CDRA 34</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ALTURA JR. SAN MART√çN CON JR. F√âLIX DIB√ìS</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.09139754</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.06727052809207</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL PEAT√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>CRUCE INDEBIDO POR LA CALZADA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>NINGUNA</td></tr></table></div></div>`)[0];
                popup_47729ab69731fd7bde6f40440a72ba3f.setContent(html_bffd20fe64c74216406fffae6ae13506);
            
        

        circle_marker_5192237cfef435de75e52952403cb9d6.bindPopup(popup_47729ab69731fd7bde6f40440a72ba3f)
        ;

        
    
    
            var circle_marker_909617e7dbfcb2b1adae6ec625242e09 = L.circleMarker(
                [-12.08971488, -77.06591347309129],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_e364527475f358aa0e540df984e832b8 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_79bfd6b6a9909ac8a0ae654b01b135ad = $(`<div id="html_79bfd6b6a9909ac8a0ae654b01b135ad" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2024-07-130</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>26/07/2024</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>13:45</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>DESPISTE Y ATROPELLO FATAL</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>31</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AV. BRASIL CDRA. 33 </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>NORTE A SUR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.08971488</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.06591347309129</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>EN PROCESO DE INVESTIGACI√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>NO CUENTA CON CAUSA ESPECIFICA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_e364527475f358aa0e540df984e832b8.setContent(html_79bfd6b6a9909ac8a0ae654b01b135ad);
            
        

        circle_marker_909617e7dbfcb2b1adae6ec625242e09.bindPopup(popup_e364527475f358aa0e540df984e832b8)
        ;

        
    
    
            var circle_marker_2d46826c23a49d05bd1d7a9444179753 = L.circleMarker(
                [-12.10166524, -77.06650678276797],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_435e9857b623ace81e006bb01a055389 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_bcb247db6c9623f9abd0ed379817cdc7 = $(`<div id="html_bcb247db6c9623f9abd0ed379817cdc7" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2024-08-113</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>04/08/2024</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>15:30</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>DESPISTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>FATAL</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CIRCUITO DE PLAYAS ALTRA. BAJADA DE SUCRE </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>ESTE A OESTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.10166524</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.06650678276797</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>EN PROCESO DE INVESTIGACI√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>NO CUENTA CON CAUSA ESPECIFICA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_435e9857b623ace81e006bb01a055389.setContent(html_bcb247db6c9623f9abd0ed379817cdc7);
            
        

        circle_marker_2d46826c23a49d05bd1d7a9444179753.bindPopup(popup_435e9857b623ace81e006bb01a055389)
        ;

        
    
    
            var circle_marker_998d8ebe6bd9fde9ab2749e729f17966 = L.circleMarker(
                [-12.09777291, -77.07281905686722],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_de9a264f91578eda742d123aaebbe9f7);
        
    
        var popup_3792a84cbcda564c38066083e2edd1cf = L.popup({
  "maxWidth": 480,
});

        
            
                var html_50e4f79fd1836a88c798c8527098c220 = $(`<div id="html_50e4f79fd1836a88c798c8527098c220" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2024-12-107</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>15/12/2024</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>05:40</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>DESPISTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>VOLCADURA Y CAIDA FATAL</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CIRCUITO DE PLAYA ALTRA BAJADA DE LA AV. SUCRE </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>NORTE A SUR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-12.09777291</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-77.07281905686722</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>EN PROCESO DE INVESTIGACI√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>NO CUENTA CON CAUSA ESPECIFICA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_3792a84cbcda564c38066083e2edd1cf.setContent(html_50e4f79fd1836a88c798c8527098c220);
            
        

        circle_marker_998d8ebe6bd9fde9ab2749e729f17966.bindPopup(popup_3792a84cbcda564c38066083e2edd1cf)
        ;

        
    
    
            feature_group_de9a264f91578eda742d123aaebbe9f7.addTo(map_b11c8dbf18cadd36f06e93a8ada84af7);
        
    
            map_b11c8dbf18cadd36f06e93a8ada84af7.fitBounds(
                [[-12.1038031, -77.0644513], [-12.1038503, -77.0644045]],
                {}
            );
        
    
            var layer_control_6a4081ad85493edcb509ae606a17eb95_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_3d77a4c5cdd140fe39563b703dc9d7c1,
                },
                overlays :  {
                    "contorno" : feature_group_8bbc1770b210108f8044fe0eb9608c43,
                    "intersecciones: buffers (50m)" : feature_group_648334114a8efcfa62e582fdc7eb522b,
                    "intersecciones: puntos" : feature_group_24f0d68e14ec60e8aecb383b34803c39,
                    "siniestros fatales" : feature_group_de9a264f91578eda742d123aaebbe9f7,
                },
            };
            let layer_control_6a4081ad85493edcb509ae606a17eb95 = L.control.layers(
                layer_control_6a4081ad85493edcb509ae606a17eb95_layers.base_layers,
                layer_control_6a4081ad85493edcb509ae606a17eb95_layers.overlays,
                {
  "position": "topright",
  "collapsed": true,
  "autoZIndex": true,
}
            ).addTo(map_b11c8dbf18cadd36f06e93a8ada84af7);

        
    
        feature_group_24f0d68e14ec60e8aecb383b34803c39.bringToFront();
        feature_group_de9a264f91578eda742d123aaebbe9f7.bringToFront();
    
    
      (function() {
        var puntosLayer = feature_group_24f0d68e14ec60e8aecb383b34803c39;
        var defaultColor = '#1d4ed8';
        var hiliteColor  = '#f59e0b';

        // ---------- Toggle colapsar/expandir ----------
        var box = document.getElementById('zs_tools');
        var btnToggle = document.getElementById('btn_toggle_box');
        var saved = null;
        try { saved = localStorage.getItem('zs_tools_collapsed'); } catch(e) {}
        if (saved === '1') {
          box.classList.add('collapsed');
          btnToggle.textContent = '‚Øà Mostrar';
        }
        function toggleBox() {
          var collapsed = box.classList.toggle('collapsed');
          btnToggle.textContent = collapsed ? '‚Øà Mostrar' : '‚ØÜ Ocultar';
          try { localStorage.setItem('zs_tools_collapsed', collapsed ? '1' : '0'); } catch(e) {}
        }
        btnToggle.addEventListener('click', toggleBox);

        // ---------- Esperar a que el mapa est√© disponible ----------
        var ly_map = null;
        function ensureMap(cb) {
          var tries = 0;
          (function wait() {
            ly_map = (puntosLayer && puntosLayer._map) ? puntosLayer._map : null;
            if (ly_map) { cb(); return; }
            if (tries++ < 80) { setTimeout(wait, 50); }
          })();
        }

        ensureMap(function initTools() {
          // ---------- Utilidades ----------
          function eachMarker(fn) {
            if (!puntosLayer || !puntosLayer._layers) return;
            Object.values(puntosLayer._layers).forEach(function(ly) {
              if (ly && typeof ly.setStyle === 'function') fn(ly);
            });
          }

          function getTooltipText(ly) {
            try {
              var t = ly.getTooltip();
              return t ? String(t.getContent() || '').toLowerCase() : '';
            } catch(e) { return ''; }
          }

          function clearHighlights() {
            eachMarker(function(ly) {
              ly.setStyle({ color: defaultColor, fillColor: defaultColor });
            });
          }

          // ---------- B√∫squeda ----------
          function searchAndHighlight() {
            var qn_raw = (document.getElementById('q_name').value || '');
            var qc_raw = (document.getElementById('q_code').value || '');
            var qn = qn_raw.toLowerCase();
            var qc = qc_raw.toLowerCase();

            var useName = qn_raw.trim().length > 0;
            var useCode = qc_raw.trim().length > 0;

            clearHighlights();
            if (!useName && !useCode) return;

            var matchedLatLngs = [];
            eachMarker(function(ly) {
              var txt = getTooltipText(ly); // "nombre | codigo"
              var parts = txt.split('|', 2);
              var nameTxt = (parts[0] || '').trim();
              var codeTxt = (parts[1] || '').trim();

              var matchName = useName ? (nameTxt.indexOf(qn) !== -1) : false;
              var matchCode = useCode ? (codeTxt.indexOf(qc) !== -1) : false;

              if (matchName || matchCode) {
                ly.setStyle({ color: hiliteColor, fillColor: hiliteColor });
                if (ly.getLatLng) matchedLatLngs.push(ly.getLatLng());
              }
            });

            if (matchedLatLngs.length > 0) {
              var group = L.featureGroup(matchedLatLngs.map(function(ll) { return L.marker(ll); }));
              try { ly_map.fitBounds(group.getBounds().pad(0.2)); } catch(e) {}
            }
          }

          document.getElementById('btn_search').addEventListener('click', searchAndHighlight);
          document.getElementById('btn_clear').addEventListener('click', function() {
            document.getElementById('q_name').value = '';
            document.getElementById('q_code').value = '';
            clearHighlights();
          });
          ['q_name','q_code'].forEach(function(id) {
            var el = document.getElementById(id);
            el.addEventListener('keydown', function(ev) { if (ev.key === 'Enter') searchAndHighlight(); });
          });

          // ---------- Pin por coordenadas ----------
          var coordLayer = L.layerGroup().addTo(ly_map);
          function goToXY() {
            var x = parseFloat((document.getElementById('q_x').value || '').replace(',', '.'));
            var y = parseFloat((document.getElementById('q_y').value || '').replace(',', '.'));
            if (!isFinite(x) || !isFinite(y)) return;
            coordLayer.clearLayers();
            var mk = L.marker([y, x], { draggable:false, title: 'Punto (Y,X): '+y+', '+x });
            mk.addTo(coordLayer);
            ly_map.setView([y, x], Math.max(ly_map.getZoom(), 17));
          }
          function clearXY() { coordLayer.clearLayers(); }
          document.getElementById('btn_xy_go').addEventListener('click', goToXY);
          document.getElementById('btn_xy_clear').addEventListener('click', clearXY);

          // ---------- Medici√≥n ----------
          var measuring = false;
          var mA = null, mB = null, mLine = null;

          function haversine(lat1, lon1, lat2, lon2) {
            var R = 6371000;
            var dLat = (lat2-lat1) * Math.PI/180;
            var dLon = (lon2-lon1) * Math.PI/180;
            var a = Math.sin(dLat/2)*Math.sin(dLat/2) +
                    Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180) *
                    Math.sin(dLon/2)*Math.sin(dLon/2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
          }

          function updateMeasure() {
            if (!(mA && mB)) return;
            var a = mA.getLatLng(), b = mB.getLatLng();
            var d = haversine(a.lat, a.lng, b.lat, b.lng);
            var txt = (d >= 1000) ? (d/1000).toFixed(3)+' km' : Math.round(d)+' m';

            if (!mLine) {
              mLine = L.polyline([a, b], { color: '#111827', weight: 3, dashArray: '6,4' })
                .bindTooltip(txt, { permanent:true, direction:'center', className:'dist-on-line' })
                .addTo(ly_map);
            } else {
              mLine.setLatLngs([a, b]);
              mLine.setTooltipContent(txt);
            }
          }

          function clearMeasure() {
            if (mA) ly_map.removeLayer(mA); mA = null;
            if (mB) ly_map.removeLayer(mB); mB = null;
            if (mLine) ly_map.removeLayer(mLine); mLine = null;
          }

          function toggleMeasure() {
            measuring = !measuring;
            var stateSpan = document.getElementById('measure_state');
            stateSpan.textContent = measuring ? 'Activo' : 'Desactivado';
            stateSpan.style.color = measuring ? '#065f46' : '#991b1b';
            if (!measuring) {
              clearMeasure();
              ly_map.getContainer().style.cursor = '';
              return;
            }
            ly_map.getContainer().style.cursor = 'crosshair';
          }

          document.getElementById('btn_measure_toggle').addEventListener('click', toggleMeasure);

          ly_map.on('click', function(ev) {
            if (!measuring) return;
            if (!mA) {
              mA = L.marker(ev.latlng, { draggable:true, title:'Punto A' }).addTo(ly_map);
              mA.on('drag', updateMeasure);
            } else if (!mB) {
              mB = L.marker(ev.latlng, { draggable:true, title:'Punto B' }).addTo(ly_map);
              mB.on('drag', updateMeasure);
            } else {
              mB.setLatLng(ev.latlng);
            }
            updateMeasure();
          });

          // ---------- Abrir vista actual en Google Maps ----------
          function openInGoogleMaps() {
            var c = ly_map.getCenter();
            var z = ly_map.getZoom();
            var url = 'https://www.google.com/maps/@' + c.lat + ',' + c.lng + ',' + z + 'z';
            window.open(url, '_blank');
          }
          document.getElementById('btn_open_gmaps').addEventListener('click', openInGoogleMaps);
        });
      })();
    
</script>
</html>