<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_902ab342a93ba622512245d730a532f7 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
</head>
<body>
    
    
    <style>
      .leaflet-interactive.zs-buffer { pointer-events: none !important; }

      .searchbar-wrap {
        position: fixed; right: 20px; bottom: 140px;
        z-index: 10000; background: rgba(255,255,255,0.95);
        border: 1px solid #e5e7eb;
        padding: 10px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        font-family: system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
        display: flex; flex-direction: column; gap: 8px; min-width: 300px; max-width: 92vw;
      }

      .searchbar-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
      .searchbar-title { font-weight: 700; font-size: 14px; color: #111827; }
      .toggle-btn { border: 0; border-radius: 8px; padding: 4px 10px; font-weight: 700; cursor: pointer; background: #111827; color: #fff; }
      .tools-body { display: flex; flex-direction: column; gap: 8px; }

      .row-flex { display:flex; gap:8px; align-items:center; }
      .col-flex { display:flex; flex-direction:column; gap:8px; }
      .row-flex input, .col-flex input { border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; font-size:13px; flex:1; }
      .row-flex button, .col-flex button { border:0; border-radius:8px; padding:6px 10px; font-weight:600; cursor:pointer; }
      .btn-dark  { background:#111827; color:#fff; }
      .btn-gray  { background:#6b7280; color:#fff; }
      .btn-green { background:#065f46; color:#fff; }
      .btn-red   { background:#991b1b; color:#fff; }
      .pill { font-size:12px; padding:4px 8px; border-radius:999px; }
      .dist-on-line { background: rgba(17,24,39,0.85); color: #fff; padding: 2px 6px; border-radius: 6px; font-size: 12px; border: 1px solid rgba(255,255,255,0.2); }

      .searchbar-wrap.collapsed { padding: 8px 10px; }
      .searchbar-wrap.collapsed .tools-body { display: none; }

      @media (max-width: 480px) {
        .searchbar-wrap { right: 12px; bottom: 12px; min-width: 240px; }
      }
    </style>
    
    
    <div style="
        position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
        z-index: 9999; background: rgba(255,255,255,0.9);
        padding: 8px 14px; border-radius: 8px; font-weight: 600;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;">
        HUANUCO-HUANUCO-AMARILIS
    </div>
    
    
    <div id="legend-box" style="
        position: fixed; bottom: 20px; right: 20px; z-index: 9999;
        background: rgba(255,255,255,0.9); padding: 10px 12px; border-radius: 8px;
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15); line-height: 1.4; min-width: 240px;">
        <div style="font-weight: 600; margin-bottom: 6px;">Leyenda</div>
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:4px;">
            <span style="display:inline-block; width:14px; height:14px; background:#1d4ed8; border-radius:50%;"></span>
            <span>Azul: Intersecci√≥n priorizada</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px;">
            <span style="display:inline-block; width:14px; height:14px; background:#d90429; border-radius:50%;"></span>
            <span>Rojo: Siniestro fatal</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px; margin-top:6px;">
            <span style="display:inline-block; width:14px; height:14px; background:#f59e0b; border-radius:50%;"></span>
            <span>Amarillo: Coincidencia de b√∫squeda</span>
        </div>
    </div>
    
    
            <div class="folium-map" id="map_902ab342a93ba622512245d730a532f7" ></div>
        
    
      <div class="searchbar-wrap" id="zs_tools">
        <div class="searchbar-header">
          <div class="searchbar-title">Herramientas</div>
          <button id="btn_toggle_box" class="toggle-btn" title="Mostrar/Ocultar">‚ØÜ Ocultar</button>
        </div>

        <div class="tools-body">
          <div class="col-flex">
            <input id="q_name" type="text" placeholder="Buscar por nombre">
            <input id="q_code" type="text" placeholder="Buscar por c√≥digo">
          </div>
          <div class="row-flex">
            <button id="btn_search" class="btn-dark">Buscar</button>
            <button id="btn_clear" class="btn-gray">Limpiar</button>
          </div>

          <hr style="border:none;border-top:1px solid #e5e7eb; margin:4px 0;">

          <div class="col-flex" title="Coordenadas en grados decimales">
            <input id="q_x" type="text" placeholder="Longitud Ejem: -77.15435">
            <div class="row-flex">
              <input id="q_y" type="text" placeholder="Latitud Ejem: -15.54648">
              <button id="btn_xy_go" class="btn-green" title="Centrar en coordenadas">üîç</button>
              <button id="btn_xy_clear" class="btn-red"   title="Quitar pin de coordenadas">‚úï</button>
            </div>
          </div>

          <div class="row-flex">
            <button id="btn_measure_toggle" class="btn-dark pill" title="Medir distancia">Medir distancia</button>
            <span id="measure_state" style="font-size:12px; color:#991b1b">Desactivado</span>
          </div>

          <div class="row-flex">
            <button id="btn_open_gmaps" class="btn-dark" title="Abrir esta vista en Google Maps">Abrir en Google Maps</button>
          </div>
        </div>
      </div>
    
</body>
<script>
    
    
            var map_902ab342a93ba622512245d730a532f7 = L.map(
                "map_902ab342a93ba622512245d730a532f7",
                {
                    center: [-9.938705, -76.24405229999999],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 14,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );
            L.control.scale().addTo(map_902ab342a93ba622512245d730a532f7);

            

        
    
            var tile_layer_91eceb66d4ca6cf37b9b569073f4d8fd = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 19,
  "maxNativeZoom": 19,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_91eceb66d4ca6cf37b9b569073f4d8fd.addTo(map_902ab342a93ba622512245d730a532f7);
        
    
            var feature_group_5e493eb77c39c353a98cd8402100d1ab = L.featureGroup(
                {
}
            );
        
    
        function geo_json_36ab7a20de4ef741a3de441497839b18_styler(feature) {
            switch(feature.properties.IDDPTO) {
                default:
                    return {"color": "#222222", "fill": true, "fillColor": "#9ca3af", "fillOpacity": 0.3, "opacity": 1.0, "weight": 2.5};
            }
        }

        function geo_json_36ab7a20de4ef741a3de441497839b18_onEachFeature(feature, layer) {

            layer.on({
            });
        };
        var geo_json_36ab7a20de4ef741a3de441497839b18 = L.geoJson(null, {
                onEachFeature: geo_json_36ab7a20de4ef741a3de441497839b18_onEachFeature,
            
                style: geo_json_36ab7a20de4ef741a3de441497839b18_styler,
            ...{
}
        });

        function geo_json_36ab7a20de4ef741a3de441497839b18_add (data) {
            geo_json_36ab7a20de4ef741a3de441497839b18
                .addData(data);
        }
            geo_json_36ab7a20de4ef741a3de441497839b18_add({"features": [{"geometry": {"coordinates": [[[[-76.20196286099997, -9.885117227999842], [-76.20127923599995, -9.885156227999971], [-76.20053123499997, -9.885085852999907], [-76.20028448499983, -9.885004852999941], [-76.19958798499994, -9.886052852999967], [-76.19899210999989, -9.887294352999959], [-76.19881823599991, -9.888411602999838], [-76.19804860999994, -9.889653102999887], [-76.19737823499997, -9.891068352999923], [-76.19636023499993, -9.89240910299992], [-76.19571461099997, -9.893203602999847], [-76.19482073499984, -9.894022977999953], [-76.19405110999992, -9.894519601999946], [-76.19290823499995, -9.894949227999973], [-76.19209760999996, -9.895318352999936], [-76.1910644859999, -9.896203227999877], [-76.1901777359999, -9.89745910299996], [-76.18892385999999, -9.899230477999879], [-76.18751948499994, -9.900412102999951], [-76.18560161099998, -9.901222602999951], [-76.18360735999994, -9.901886727999909], [-76.18242773499992, -9.902109477999886], [-76.18132036099996, -9.902478477999978], [-76.18035935999995, -9.902699227999904], [-76.17866211099994, -9.90306835299998], [-76.1765214859999, -9.90306835299998], [-76.17526760999982, -9.902847602999941], [-76.17356835999993, -9.902624977999892], [-76.17246098499993, -9.90306835299998], [-76.17172460999996, -9.903880852999976], [-76.1712069859999, -9.904470726999932], [-76.1706172349999, -9.9055039779999], [-76.16995310999994, -9.905431601999965], [-76.16921486099994, -9.905431602999954], [-76.16795898499993, -9.905578102999925], [-76.16675386099996, -9.906027352999956], [-76.16552536099994, -9.906083977999913], [-76.16414261099993, -9.906740227999876], [-76.16297848499988, -9.907248102999972], [-76.16216011099993, -9.908408227999928], [-76.16006636099996, -9.909359352999957], [-76.15810161099995, -9.910525352999969], [-76.15679085999994, -9.911107477999906], [-76.15569923499999, -9.911470727999927], [-76.15424411099991, -9.91139847699992], [-76.15358786099995, -9.91139847799991], [-76.152568235, -9.911470727999927], [-76.15118548499998, -9.911980477999919], [-76.15016598499989, -9.912781227999915], [-76.14965236099994, -9.913179727999932], [-76.14791011099993, -9.91372660299993], [-76.14703711099992, -9.914164102999962], [-76.14608986099995, -9.914673852999954], [-76.14514448599994, -9.914964852999958], [-76.1443437349999, -9.915693352999938], [-76.14281448499997, -9.91620310299993], [-76.14172261099992, -9.916712852999979], [-76.14026760999997, -9.9169297279999], [-76.13932035999994, -9.917220727999904], [-76.13822848499996, -9.917294977999916], [-76.1363516109999, -9.917609477999918], [-76.13549035999995, -9.917687477999891], [-76.13423635999993, -9.918275352999956], [-76.13353123599995, -9.918785227999933], [-76.13216010999992, -9.91948822799992], [-76.13133785999992, -9.92003710299997], [-76.13032036099992, -9.920624977999921], [-76.12992773599996, -9.92136910299996], [-76.12978710999994, -9.92154885299982], [-76.12920698499994, -9.921777477999967], [-76.12865023599994, -9.922181602999956], [-76.12779098499993, -9.922787102999962], [-76.126654235, -9.923771477999935], [-76.12544323599997, -9.924529477999954], [-76.12454298599994, -9.925390602999869], [-76.12388673499999, -9.926398477999953], [-76.12316798499995, -9.927896477999923], [-76.12242773599996, -9.929992227999946], [-76.12220110999988, -9.930997977999937], [-76.12197660999993, -9.931697226999972], [-76.1212363599999, -9.932415977999938], [-76.11996285999993, -9.933298852999883], [-76.11862710999992, -9.934224602999961], [-76.11768160999992, -9.934839852999971], [-76.11677923599996, -9.935621227999945], [-76.11608011099997, -9.937017602999845], [-76.11568948499996, -9.938373227999932], [-76.11536323599995, -9.940105477999964], [-76.11617973499995, -9.942513727999938], [-76.11684961099985, -9.943765602999974], [-76.11717773599997, -9.944443352999883], [-76.11731048499996, -9.945496102999869], [-76.1170683609999, -9.94661135299998], [-76.11687298499999, -9.947837852999896], [-76.11665236099998, -9.94976560299989], [-76.1161933599999, -9.951035102999981], [-76.1162148599999, -9.95226172799994], [-76.11652148599995, -9.953203101999918], [-76.11737498499997, -9.954777352999884], [-76.11838286099999, -9.955699227999958], [-76.11978511099989, -9.957189477999975], [-76.12100385999992, -9.9582266029999], [-76.12222073599997, -9.958455102999892], [-76.12275386099998, -9.95853122799997], [-76.12328510999993, -9.958759727999961], [-76.12385548599997, -9.959101602999908], [-76.12461523599995, -9.959748102999924], [-76.1254101109999, -9.960160102999907], [-76.12578923499984, -9.961015602999908], [-76.12588473499994, -9.961966852999922], [-76.12602735999991, -9.963107477999813], [-76.1262656109999, -9.964390602999913], [-76.12631248499997, -9.965531227999975], [-76.12635936099991, -9.966529352999942], [-76.12621673499996, -9.967574227999933], [-76.12569535999995, -9.968953102999933], [-76.12536148599997, -9.969427602999872], [-76.12517185999991, -9.970187477999957], [-76.12536148499998, -9.970757852999952], [-76.12621673499996, -9.972089852999943], [-76.1273573609999, -9.972706977999962], [-76.1284511099999, -9.973230477999948], [-76.12927348499983, -9.974072227999955], [-76.12906248599995, -9.97474410299992], [-76.12864261099992, -9.975455102999945], [-76.1279316099999, -9.976048852999952], [-76.12710348499996, -9.976931602999912], [-76.12670310999994, -9.977910102999942], [-76.12662498599997, -9.97883197799996], [-76.12674023499994, -9.979580102999932], [-76.12731636099988, -9.980290977999971], [-76.12810348599999, -9.980998227999862], [-76.12919723599998, -9.981806602999939], [-76.1299648609999, -9.982267602999968], [-76.13115423499994, -9.983248102999937], [-76.13213286099989, -9.984244102999924], [-76.13313085999994, -9.984742227999845], [-76.13370698499995, -9.985126977999869], [-76.13432223499996, -9.985683602999927], [-76.13514648499995, -9.98587497799997], [-76.13604886099989, -9.986085977999892], [-76.13620898599999, -9.986281227999882], [-76.13662698499996, -9.986081977999959], [-76.13754485999993, -9.985755977999872], [-76.13859185999996, -9.985263727999893], [-76.13944136099991, -9.984511727999973], [-76.14003123499998, -9.98431635199995], [-76.14179685999994, -9.984021477999875], [-76.14340036099992, -9.984054727999876], [-76.14424610999993, -9.984261727999979], [-76.14490035999995, -9.984712852999962], [-76.14596486099992, -9.9854902269999], [-76.14706836099992, -9.985326227999849], [-76.14915423499997, -9.984507852999968], [-76.15029885999996, -9.98418160299991], [-76.15144523499998, -9.984261727999979], [-76.1527948609999, -9.984343727999885], [-76.15402148499999, -9.984140602999958], [-76.15598436099992, -9.983935602999964], [-76.15712885999994, -9.984099477999962], [-76.15847848499999, -9.983648477999964], [-76.16031823599997, -9.982790977999969], [-76.16207811099997, -9.981523477999872], [-76.16424598499998, -9.98131835299995], [-76.16494148499993, -9.981849602999944], [-76.16618360999996, -9.983755852999934], [-76.16739448499987, -9.984548852999922], [-76.16939848499993, -9.984998102999953], [-76.17037885999997, -9.98528510299991], [-76.17123823499992, -9.986144477999972], [-76.17181035999994, -9.9869609779999], [-76.17242373499988, -9.987943352999935], [-76.17279298499994, -9.98847460299993], [-76.17324223499992, -9.989087852999944], [-76.17426560999996, -9.989742227999898], [-76.17504098599989, -9.990437477999876], [-76.17549223499992, -9.99068360299998], [-76.17573648599989, -9.991501852999932], [-76.1761874849999, -9.992523477999896], [-76.17684173499993, -9.993259727999884], [-76.17766011099997, -9.994281102999935], [-76.17872261099996, -9.99559185299995], [-76.17908786099997, -9.996230477999859], [-76.17963473499992, -9.99684960299993], [-76.1803104849999, -9.99715622799988], [-76.18192385999998, -9.99722060299996], [-76.18363085999988, -9.99775785299994], [-76.18444723599993, -9.998209102999965], [-76.18530661099999, -9.999107477999871], [-76.18637110999998, -10.000333977999901], [-76.18686136099996, -10.001275352999926], [-76.18706448499995, -10.00237897799991], [-76.18784173499995, -10.004710977999878], [-76.1882519859999, -10.005978477999918], [-76.18894723499994, -10.006591852999975], [-76.19049998499992, -10.007451227999923], [-76.21265448599996, -10.009592227999974], [-76.21427035999989, -10.010157852999953], [-76.21551498499986, -10.011217352999893], [-76.2169252359999, -10.011868227999912], [-76.2179739849999, -10.01237447799997], [-76.2196012359999, -10.012916977999907], [-76.22079448599999, -10.013965602999974], [-76.22220473599992, -10.015158852999946], [-76.2238681099999, -10.015592852999873], [-76.22614623499999, -10.01635222799996], [-76.22755648599997, -10.016713852999942], [-76.22951585999994, -10.017464852999979], [-76.22968210999994, -10.01682760299991], [-76.22960348599997, -10.016470727999945], [-76.22965423599999, -10.01553910299998], [-76.2297871109999, -10.014326227999902], [-76.22985936099991, -10.01413660299994], [-76.22989448499999, -10.013972602999957], [-76.23001361099989, -10.013855477999925], [-76.23009386099994, -10.01365610299996], [-76.2302948599999, -10.013347602999943], [-76.23049410999994, -10.013031227999932], [-76.23073048599997, -10.012794977999931], [-76.23096673499998, -10.012476602999982], [-76.2312011109999, -10.012195352999981], [-76.23148423499998, -10.011841852999964], [-76.23171873499996, -10.011560602999964], [-76.23199223499984, -10.011206977999905], [-76.23219136099988, -10.01089060299995], [-76.23235548499997, -10.010572227999887], [-76.23250785999994, -10.010265602999937], [-76.23274411099987, -10.009947227999874], [-76.2328261099999, -10.009630852999976], [-76.232978485, -10.009314477999908], [-76.23306048499995, -10.008996102999959], [-76.23314073499989, -10.00867972799989], [-76.23321285999992, -10.008363227999894], [-76.23333986099993, -10.00804685299994], [-76.23337498499995, -10.00773822799988], [-76.2334101109999, -10.007421852999926], [-76.23340810999991, -10.007105477999914], [-76.2334531109999, -10.00678910299996], [-76.23345111099991, -10.006472602999963], [-76.23340423499997, -10.006156227999895], [-76.23340423499997, -10.00568560299996], [-76.23348436099991, -10.005369102999964], [-76.23344723499997, -10.005052727999896], [-76.2334453609999, -10.004736352999942], [-76.23356248599998, -10.00441997799993], [-76.23367973499984, -10.004111352999928], [-76.23383398599998, -10.003794977999917], [-76.23387886099988, -10.0036777279999], [-76.23397848599996, -10.003458977999912], [-76.23417573599994, -10.002681602999928], [-76.23442973599998, -10.002246102999948], [-76.23462110999992, -10.001992227999892], [-76.23481248499996, -10.001927727999885], [-76.23479098499996, -10.001214852999965], [-76.23493548499982, -10.000716852999972], [-76.23501761099993, -10.000480602999971], [-76.23510735999992, -10.000353477999909], [-76.23524223599998, -10.000000102999934], [-76.2356698609999, -9.999673852999933], [-76.23630661099992, -9.998939477999897], [-76.23673436099989, -9.998628852999957], [-76.23708010999997, -9.998302727999885], [-76.23752148599993, -9.997117227999865], [-76.23791986099991, -9.996437477999905], [-76.23834573599999, -9.99544922799987], [-76.23860548599998, -9.994472602999963], [-76.23871285999996, -9.993558726999936], [-76.23873823499997, -9.992980477999879], [-76.23836323499995, -9.98913472799984], [-76.23864848599999, -9.986378852999962], [-76.23862886099988, -9.986189477999972], [-76.23847260999992, -9.985646477999978], [-76.23838861099989, -9.985033352999949], [-76.2384766109999, -9.984246102999919], [-76.23885735999994, -9.983837852999955], [-76.23912111099992, -9.983681602999923], [-76.24102523499994, -9.982988227999954], [-76.24158198499998, -9.982933602999935], [-76.2417832349999, -9.982912102999933], [-76.24263860999991, -9.982656102999897], [-76.24391210999994, -9.981792977999874], [-76.24422073599999, -9.981347477999975], [-76.24430273599995, -9.981140602999915], [-76.24425386099989, -9.980470727999887], [-76.24403323599995, -9.979802727999981], [-76.24357423499998, -9.978900352999915], [-76.2429198609999, -9.977175727999963], [-76.24244148499986, -9.976290977999952], [-76.24168161099993, -9.975298852999913], [-76.24134173499988, -9.974757852999915], [-76.24114848599999, -9.974216852999916], [-76.2411992349999, -9.973456977999945], [-76.24120311099989, -9.972136727999953], [-76.24110548599998, -9.970265602999916], [-76.24084573599998, -9.969162102999917], [-76.24079298499998, -9.966808477999962], [-76.24090036099989, -9.96426172799994], [-76.24053123599998, -9.963312477999978], [-76.24039448599996, -9.963039227999957], [-76.24002735999994, -9.962374977999957], [-76.23977736099994, -9.961787102999892], [-76.2396016109999, -9.960974602999897], [-76.23964261099991, -9.960820352999917], [-76.23967385999993, -9.960593727999935], [-76.24007223499996, -9.960013726999875], [-76.24032811099994, -9.959566477999942], [-76.24053511099993, -9.95920697799994], [-76.24065048599988, -9.958456977999958], [-76.24074611099991, -9.957042977999947], [-76.24083398499988, -9.956339852999918], [-76.24108598499998, -9.955607477999934], [-76.24118561099993, -9.955425727999966], [-76.24169535999994, -9.955052727999941], [-76.24227735999995, -9.954769477999946], [-76.2426601109999, -9.954488227999946], [-76.24326961099996, -9.95379885299991], [-76.24351361099991, -9.953193352999904], [-76.24397661099994, -9.952638727999954], [-76.24416598499988, -9.952312476999964], [-76.24422848599994, -9.952078101999916], [-76.24416410999999, -9.951689477999935], [-76.24375973599996, -9.951128852999886], [-76.24369548599998, -9.950931602999901], [-76.24369548599998, -9.950578102999884], [-76.24388461099988, -9.950306602999888], [-76.24407611099991, -9.950124977999963], [-76.2457226109999, -9.94915035299988], [-76.24616210999994, -9.94878910299991], [-76.24763086099995, -9.94714647799998], [-76.24833198599998, -9.946654352999872], [-76.25003110999995, -9.945246102999874], [-76.25104885999997, -9.94419335299989], [-76.25134761099991, -9.943568352999876], [-76.25161298499995, -9.943234477999965], [-76.25196348599997, -9.942971602999876], [-76.25144548499992, -9.94295310299998], [-76.25109761099992, -9.942476602999875], [-76.24992773599996, -9.942074227999967], [-76.24904098599995, -9.941632977999973], [-76.24856636099992, -9.941165977999958], [-76.24827148499998, -9.940333977999956], [-76.24793160999997, -9.93968347799995], [-76.24729885999994, -9.939054727999974], [-76.24665036099992, -9.93852347799998], [-76.243841735, -9.936734352999963], [-76.2432031109999, -9.936419977999947], [-76.23945310999994, -9.93585547799995], [-76.23880473499997, -9.935613227999909], [-76.23810736099989, -9.934765727999945], [-76.2361913609999, -9.932095727999922], [-76.23604486099993, -9.931978477999905], [-76.23550586099992, -9.93178122799992], [-76.23492973499998, -9.931414102999838], [-76.23422461099989, -9.93081835299995], [-76.23357423599998, -9.930044977999955], [-76.23332610999995, -9.929339852999874], [-76.23333398499983, -9.929031227999928], [-76.23342386099989, -9.928806727999927], [-76.23391410999994, -9.928025352999953], [-76.23421286099989, -9.927410102999943], [-76.23425785999996, -9.927228477999904], [-76.23427348599995, -9.926740227999915], [-76.23422660999995, -9.926470727999913], [-76.23350786099991, -9.92403910299987], [-76.23334960999995, -9.923216852999872], [-76.2333886109999, -9.921589852999944], [-76.23306448599999, -9.920451227999934], [-76.2328788609999, -9.919429727999898], [-76.23299798599999, -9.917314602999966], [-76.23300385999994, -9.916076227999895], [-76.23268736099999, -9.914439477999906], [-76.23263861099991, -9.913627102999953], [-76.23270111099987, -9.913380852999978], [-76.23293548599997, -9.91278322799991], [-76.23337110999995, -9.91230272799993], [-76.23415423499995, -9.91174810299998], [-76.23441598599999, -9.911249852999958], [-76.23443361099993, -9.91097847799989], [-76.23432223499998, -9.910427727999888], [-76.23391798599994, -9.90958010299994], [-76.23351760999992, -9.907275352999932], [-76.23314073599994, -9.906580102999953], [-76.23252736099988, -9.905804727999907], [-76.23047660999993, -9.903659976999904], [-76.22958773499994, -9.90255072799988], [-76.2281954849999, -9.901009727999906], [-76.22770898599998, -9.900361352999937], [-76.22753323599994, -9.899783352999975], [-76.22767573499993, -9.896001977999902], [-76.22793361099991, -9.894310602999951], [-76.22789648499997, -9.894128852999927], [-76.22773048499982, -9.893759726999917], [-76.22748236099989, -9.893435602999944], [-76.22689648499994, -9.892804727999874], [-76.22495111099988, -9.891644477999876], [-76.22353323599998, -9.89050972799987], [-76.22254098499997, -9.888894477999884], [-76.22185548499994, -9.888093726999898], [-76.22049410999989, -9.88765435299996], [-76.22000198499995, -9.88766597699987], [-76.21920111099985, -9.887939476999918], [-76.2183711109999, -9.88797072799997], [-76.21695698499997, -9.88776760299993], [-76.21602536099988, -9.887462852999931], [-76.21539636099999, -9.887109352999914], [-76.21425198499998, -9.886429727999882], [-76.21374023499999, -9.886242227999844], [-76.21323060999993, -9.886117227999875], [-76.21130473499994, -9.886042977999978], [-76.20977348499997, -9.886246102999962], [-76.20955473499998, -9.886320352999974], [-76.20909961099989, -9.88636722699988], [-76.2085898599999, -9.886349602999928], [-76.20801360999991, -9.886226602999955], [-76.20538286099998, -9.885113352999952], [-76.20399610999988, -9.884830102999956], [-76.20319335999989, -9.884824227999957], [-76.20196286099997, -9.885117227999842]]]], "type": "MultiPolygon"}, "properties": {"AREA": 1, "CAPITAL": "PAUCARBAMBA", "CODCCPP": "0001", "DEPARTAMEN": "HUANUCO", "DISTRITO": "AMARILIS", "FUENTE": "INEI", "IDDIST": "100102", "IDDPTO": "10", "IDPROV": "1001", "PROVINCIA": "HUANUCO"}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_36ab7a20de4ef741a3de441497839b18.addTo(feature_group_5e493eb77c39c353a98cd8402100d1ab);
        
    
            feature_group_5e493eb77c39c353a98cd8402100d1ab.addTo(map_902ab342a93ba622512245d730a532f7);
        
    
            var feature_group_9dcd3c182bec6c41f51652098cb55857 = L.featureGroup(
                {
}
            );
        
    
            var circle_0a62cb1e0b606b56c8926a096ec244b7 = L.circle(
                [-9.938525, -76.244409],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_9dcd3c182bec6c41f51652098cb55857);
        
    
            var circle_cc6f645508330529a9a9712bf70ff094 = L.circle(
                [-9.938885, -76.2436956],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_9dcd3c182bec6c41f51652098cb55857);
        
    
            feature_group_9dcd3c182bec6c41f51652098cb55857.addTo(map_902ab342a93ba622512245d730a532f7);
        
    
            var feature_group_b10e619640776c4cb9460fce3750ad5f = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_77c5b0eb1827328426bf747471d3a3f8 = L.circleMarker(
                [-9.938525, -76.244409],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b10e619640776c4cb9460fce3750ad5f);
        
    
        var popup_33d4e01223623aded087b2e78a1f5f02 = L.popup({
  "maxWidth": 460,
});

        
            
                var html_6d784e5fb26bacb26860919eeceb159c = $(`<div id="html_6d784e5fb26bacb26860919eeceb159c" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-222941</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-9.938525</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-76.244409</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>Jr. Las Orquideas / V√≠a de Evitamiento Heroes del Cenepa</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>1</td></tr></table></div></div>`)[0];
                popup_33d4e01223623aded087b2e78a1f5f02.setContent(html_6d784e5fb26bacb26860919eeceb159c);
            
        

        circle_marker_77c5b0eb1827328426bf747471d3a3f8.bindPopup(popup_33d4e01223623aded087b2e78a1f5f02)
        ;

        
    
    
            circle_marker_77c5b0eb1827328426bf747471d3a3f8.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_093ebffcd4554b2ab56d3125e5cdaaad = L.circleMarker(
                [-9.938885, -76.2436956],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b10e619640776c4cb9460fce3750ad5f);
        
    
        var popup_1195d6aa4a43968e67508d8465fd42e4 = L.popup({
  "maxWidth": 460,
});

        
            
                var html_3997a7dd4d2e27a03a24b79669f90922 = $(`<div id="html_3997a7dd4d2e27a03a24b79669f90922" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-222967</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-9.938885</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-76.2436956</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>Jr. Las Begonias / V√≠a de Evitamiento Heroes del Cenepa</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>1</td></tr></table></div></div>`)[0];
                popup_1195d6aa4a43968e67508d8465fd42e4.setContent(html_3997a7dd4d2e27a03a24b79669f90922);
            
        

        circle_marker_093ebffcd4554b2ab56d3125e5cdaaad.bindPopup(popup_1195d6aa4a43968e67508d8465fd42e4)
        ;

        
    
    
            circle_marker_093ebffcd4554b2ab56d3125e5cdaaad.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            feature_group_b10e619640776c4cb9460fce3750ad5f.addTo(map_902ab342a93ba622512245d730a532f7);
        
    
            var feature_group_b87986e4f6a7f733b8e6e8c0140a77e3 = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_8783061f0146a46b4a330ade5e9505d1 = L.circleMarker(
                [-9.913026, -76.23101],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b87986e4f6a7f733b8e6e8c0140a77e3);
        
    
        var popup_94eb74b38410a11464d8e48e1baff0f5 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_370d95e5a655170a7ffe8576d603b5a1 = $(`<div id="html_370d95e5a655170a7ffe8576d603b5a1" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-01-405</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>10/01/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>20:30</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>CHOQUE FRONTAL, VOLCADURA, CA√çDA DE CONDUCTOR CON SUBSECUENTE MUERTE, SEGUIDO DE LESIONES PERSONALES Y DA√ëOS MATERIALES</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA CENTRAL HU√ÅNUCO - TINGO MAR√çA KM. 2.500</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>INMEDIACIONES DEL CLUB LAW TENNIS</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-9.913026</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-76.23101</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL CONDUCTOR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>ADELANTAR INDEBIDAMENTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_94eb74b38410a11464d8e48e1baff0f5.setContent(html_370d95e5a655170a7ffe8576d603b5a1);
            
        

        circle_marker_8783061f0146a46b4a330ade5e9505d1.bindPopup(popup_94eb74b38410a11464d8e48e1baff0f5)
        ;

        
    
    
            var circle_marker_d54c9ec5706a3130c8c8e9bac6eb0aea = L.circleMarker(
                [-9.913444, -76.231121],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b87986e4f6a7f733b8e6e8c0140a77e3);
        
    
        var popup_e537aedeebc4f681a3c9af10e3c9201d = L.popup({
  "maxWidth": 480,
});

        
            
                var html_4b817ff5a9ef96bf24e59514e9cebe35 = $(`<div id="html_4b817ff5a9ef96bf24e59514e9cebe35" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-02-278</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>19/02/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>21:00</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO FUGA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>ATROPELLO Y FYGA CON CONSCUENCIA FATAL</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRTERA CENTRAL HUANUCO. TINGO MARIA KM. 13.300</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>S/N</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-9.913444</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-76.231121</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>S/O</td></tr></table></div></div>`)[0];
                popup_e537aedeebc4f681a3c9af10e3c9201d.setContent(html_4b817ff5a9ef96bf24e59514e9cebe35);
            
        

        circle_marker_d54c9ec5706a3130c8c8e9bac6eb0aea.bindPopup(popup_e537aedeebc4f681a3c9af10e3c9201d)
        ;

        
    
    
            var circle_marker_158ce21efbd92025dae1f65a81e354b8 = L.circleMarker(
                [-9.938782, -76.244047],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b87986e4f6a7f733b8e6e8c0140a77e3);
        
    
        var popup_3fad15ac0bf8a3ed47a7f22261521140 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_4eb584f2c550bc246d653c96e7097e0e = $(`<div id="html_4eb584f2c550bc246d653c96e7097e0e" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-04-314</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>03/04/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>07:47</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>ATROPELLO CON VOLTEO Y DELITO CONTRA LA ADMINISTRACION DE JUSTICIA CONTRA LA FUNCION JURISDICCIONAL - FUGA DEL LUGAR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AV. 14 DE AGOSTO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>CDA. 01</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-9.938782</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-76.244047</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL CONDUCTOR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>CONDUCIR EN ESTADO DE EBRIEDAD Y/O DROGADICCI√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>S/O</td></tr></table></div></div>`)[0];
                popup_3fad15ac0bf8a3ed47a7f22261521140.setContent(html_4eb584f2c550bc246d653c96e7097e0e);
            
        

        circle_marker_158ce21efbd92025dae1f65a81e354b8.bindPopup(popup_3fad15ac0bf8a3ed47a7f22261521140)
        ;

        
    
    
            var circle_marker_6ab683ad1daebf15e23e23edd585af3b = L.circleMarker(
                [-9.888402, -76.207281],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b87986e4f6a7f733b8e6e8c0140a77e3);
        
    
        var popup_d57b916d923eacf5127e048546ccca7a = L.popup({
  "maxWidth": 480,
});

        
            
                var html_08ac04193926a3f7ccb54331895a9859 = $(`<div id="html_08ac04193926a3f7ccb54331895a9859" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-04-317</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>10/04/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>15:00</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>ATROPELLO SEGUIDO DE LESIONES CON SUBSECUENTE MUERTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA HU√ÅNUCO - TINGO MARIA </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>SAN ANDRES</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-9.888402</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-76.207281</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL PEAT√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>CRUCE INDEBIDO POR LA CALZADA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>S/O</td></tr></table></div></div>`)[0];
                popup_d57b916d923eacf5127e048546ccca7a.setContent(html_08ac04193926a3f7ccb54331895a9859);
            
        

        circle_marker_6ab683ad1daebf15e23e23edd585af3b.bindPopup(popup_d57b916d923eacf5127e048546ccca7a)
        ;

        
    
    
            var circle_marker_725863dc2c1da1e9b80c8224ea2d6196 = L.circleMarker(
                [-9.9471, -76.243748],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b87986e4f6a7f733b8e6e8c0140a77e3);
        
    
        var popup_6b39248e0d25c01df6e1239efcbc3341 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_5d24454d859133af98ed53f2eb144b40 = $(`<div id="html_5d24454d859133af98ed53f2eb144b40" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-08-307</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>29/08/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>23:00</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>CHOQUE - VOLCADURA CAIDA DE CONDUCTOR CON SUBSECUENTE MUERTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA CENTRAL - AMARILIS</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>PARADERO 15</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-9.9471</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-76.243748</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL CONDUCTOR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>EXCESO DE VELOCIDAD</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>S/O</td></tr></table></div></div>`)[0];
                popup_6b39248e0d25c01df6e1239efcbc3341.setContent(html_5d24454d859133af98ed53f2eb144b40);
            
        

        circle_marker_725863dc2c1da1e9b80c8224ea2d6196.bindPopup(popup_6b39248e0d25c01df6e1239efcbc3341)
        ;

        
    
    
            var circle_marker_4c40251639d6cda9829da4c90cda32e3 = L.circleMarker(
                [-9.919618, -76.176757],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b87986e4f6a7f733b8e6e8c0140a77e3);
        
    
        var popup_4d909a7663e2ba347db44050c80d063d = L.popup({
  "maxWidth": 480,
});

        
            
                var html_77d358e3ef28376bd3b9a7e06205af32 = $(`<div id="html_77d358e3ef28376bd3b9a7e06205af32" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2022-03-243</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>18/03/2022</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>15:00</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>DESPISTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>VOLCADURA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA HUANUCO - MALCONGA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-9.919618</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-76.176757</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL CONDUCTOR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>FATIGA Y/O CANSANCIO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>S/O</td></tr></table></div></div>`)[0];
                popup_4d909a7663e2ba347db44050c80d063d.setContent(html_77d358e3ef28376bd3b9a7e06205af32);
            
        

        circle_marker_4c40251639d6cda9829da4c90cda32e3.bindPopup(popup_4d909a7663e2ba347db44050c80d063d)
        ;

        
    
    
            var circle_marker_f2efc94a9cd87a605fdfdb779f520b37 = L.circleMarker(
                [-9.944877833, -76.24018227990604],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_b87986e4f6a7f733b8e6e8c0140a77e3);
        
    
        var popup_681eaff6a249a311956acdb31beb99fb = L.popup({
  "maxWidth": 480,
});

        
            
                var html_f164dea79c8af91a6ff94d9f31267fcc = $(`<div id="html_f164dea79c8af91a6ff94d9f31267fcc" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2023-01-111</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>12/01/2023</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>17:00</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>PROYECCION</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>CARRETERA CENTRAL PARADERO 12 1/2 </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-9.944877833</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-76.24018227990604</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>IMPRUDENCIA DEL CONDUCTOR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>EXCESO DE VELOCIDAD</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_681eaff6a249a311956acdb31beb99fb.setContent(html_f164dea79c8af91a6ff94d9f31267fcc);
            
        

        circle_marker_f2efc94a9cd87a605fdfdb779f520b37.bindPopup(popup_681eaff6a249a311956acdb31beb99fb)
        ;

        
    
    
            feature_group_b87986e4f6a7f733b8e6e8c0140a77e3.addTo(map_902ab342a93ba622512245d730a532f7);
        
    
            map_902ab342a93ba622512245d730a532f7.fitBounds(
                [[-9.938525, -76.244409], [-9.938885, -76.2436956]],
                {}
            );
        
    
            var layer_control_13ed969ca14b9f06bb67d293b66acaba_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_91eceb66d4ca6cf37b9b569073f4d8fd,
                },
                overlays :  {
                    "contorno" : feature_group_5e493eb77c39c353a98cd8402100d1ab,
                    "intersecciones: buffers (50m)" : feature_group_9dcd3c182bec6c41f51652098cb55857,
                    "intersecciones: puntos" : feature_group_b10e619640776c4cb9460fce3750ad5f,
                    "siniestros fatales" : feature_group_b87986e4f6a7f733b8e6e8c0140a77e3,
                },
            };
            let layer_control_13ed969ca14b9f06bb67d293b66acaba = L.control.layers(
                layer_control_13ed969ca14b9f06bb67d293b66acaba_layers.base_layers,
                layer_control_13ed969ca14b9f06bb67d293b66acaba_layers.overlays,
                {
  "position": "topright",
  "collapsed": true,
  "autoZIndex": true,
}
            ).addTo(map_902ab342a93ba622512245d730a532f7);

        
    
        feature_group_b10e619640776c4cb9460fce3750ad5f.bringToFront();
        feature_group_b87986e4f6a7f733b8e6e8c0140a77e3.bringToFront();
    
    
      (function() {
        var puntosLayer = feature_group_b10e619640776c4cb9460fce3750ad5f;
        var defaultColor = '#1d4ed8';
        var hiliteColor  = '#f59e0b';

        // ---------- Toggle colapsar/expandir ----------
        var box = document.getElementById('zs_tools');
        var btnToggle = document.getElementById('btn_toggle_box');
        var saved = null;
        try { saved = localStorage.getItem('zs_tools_collapsed'); } catch(e) {}
        if (saved === '1') {
          box.classList.add('collapsed');
          btnToggle.textContent = '‚Øà Mostrar';
        }
        function toggleBox() {
          var collapsed = box.classList.toggle('collapsed');
          btnToggle.textContent = collapsed ? '‚Øà Mostrar' : '‚ØÜ Ocultar';
          try { localStorage.setItem('zs_tools_collapsed', collapsed ? '1' : '0'); } catch(e) {}
        }
        btnToggle.addEventListener('click', toggleBox);

        // ---------- Esperar a que el mapa est√© disponible ----------
        var ly_map = null;
        function ensureMap(cb) {
          var tries = 0;
          (function wait() {
            ly_map = (puntosLayer && puntosLayer._map) ? puntosLayer._map : null;
            if (ly_map) { cb(); return; }
            if (tries++ < 80) { setTimeout(wait, 50); }
          })();
        }

        ensureMap(function initTools() {
          // ---------- Utilidades ----------
          function eachMarker(fn) {
            if (!puntosLayer || !puntosLayer._layers) return;
            Object.values(puntosLayer._layers).forEach(function(ly) {
              if (ly && typeof ly.setStyle === 'function') fn(ly);
            });
          }

          function getTooltipText(ly) {
            try {
              var t = ly.getTooltip();
              return t ? String(t.getContent() || '').toLowerCase() : '';
            } catch(e) { return ''; }
          }

          function clearHighlights() {
            eachMarker(function(ly) {
              ly.setStyle({ color: defaultColor, fillColor: defaultColor });
            });
          }

          // ---------- B√∫squeda ----------
          function searchAndHighlight() {
            var qn_raw = (document.getElementById('q_name').value || '');
            var qc_raw = (document.getElementById('q_code').value || '');
            var qn = qn_raw.toLowerCase();
            var qc = qc_raw.toLowerCase();

            var useName = qn_raw.trim().length > 0;
            var useCode = qc_raw.trim().length > 0;

            clearHighlights();
            if (!useName && !useCode) return;

            var matchedLatLngs = [];
            eachMarker(function(ly) {
              var txt = getTooltipText(ly); // "nombre | codigo"
              var parts = txt.split('|', 2);
              var nameTxt = (parts[0] || '').trim();
              var codeTxt = (parts[1] || '').trim();

              var matchName = useName ? (nameTxt.indexOf(qn) !== -1) : false;
              var matchCode = useCode ? (codeTxt.indexOf(qc) !== -1) : false;

              if (matchName || matchCode) {
                ly.setStyle({ color: hiliteColor, fillColor: hiliteColor });
                if (ly.getLatLng) matchedLatLngs.push(ly.getLatLng());
              }
            });

            if (matchedLatLngs.length > 0) {
              var group = L.featureGroup(matchedLatLngs.map(function(ll) { return L.marker(ll); }));
              try { ly_map.fitBounds(group.getBounds().pad(0.2)); } catch(e) {}
            }
          }

          document.getElementById('btn_search').addEventListener('click', searchAndHighlight);
          document.getElementById('btn_clear').addEventListener('click', function() {
            document.getElementById('q_name').value = '';
            document.getElementById('q_code').value = '';
            clearHighlights();
          });
          ['q_name','q_code'].forEach(function(id) {
            var el = document.getElementById(id);
            el.addEventListener('keydown', function(ev) { if (ev.key === 'Enter') searchAndHighlight(); });
          });

          // ---------- Pin por coordenadas ----------
          var coordLayer = L.layerGroup().addTo(ly_map);
          function goToXY() {
            var x = parseFloat((document.getElementById('q_x').value || '').replace(',', '.'));
            var y = parseFloat((document.getElementById('q_y').value || '').replace(',', '.'));
            if (!isFinite(x) || !isFinite(y)) return;
            coordLayer.clearLayers();
            var mk = L.marker([y, x], { draggable:false, title: 'Punto (Y,X): '+y+', '+x });
            mk.addTo(coordLayer);
            ly_map.setView([y, x], Math.max(ly_map.getZoom(), 17));
          }
          function clearXY() { coordLayer.clearLayers(); }
          document.getElementById('btn_xy_go').addEventListener('click', goToXY);
          document.getElementById('btn_xy_clear').addEventListener('click', clearXY);

          // ---------- Medici√≥n ----------
          var measuring = false;
          var mA = null, mB = null, mLine = null;

          function haversine(lat1, lon1, lat2, lon2) {
            var R = 6371000;
            var dLat = (lat2-lat1) * Math.PI/180;
            var dLon = (lon2-lon1) * Math.PI/180;
            var a = Math.sin(dLat/2)*Math.sin(dLat/2) +
                    Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180) *
                    Math.sin(dLon/2)*Math.sin(dLon/2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
          }

          function updateMeasure() {
            if (!(mA && mB)) return;
            var a = mA.getLatLng(), b = mB.getLatLng();
            var d = haversine(a.lat, a.lng, b.lat, b.lng);
            var txt = (d >= 1000) ? (d/1000).toFixed(3)+' km' : Math.round(d)+' m';

            if (!mLine) {
              mLine = L.polyline([a, b], { color: '#111827', weight: 3, dashArray: '6,4' })
                .bindTooltip(txt, { permanent:true, direction:'center', className:'dist-on-line' })
                .addTo(ly_map);
            } else {
              mLine.setLatLngs([a, b]);
              mLine.setTooltipContent(txt);
            }
          }

          function clearMeasure() {
            if (mA) ly_map.removeLayer(mA); mA = null;
            if (mB) ly_map.removeLayer(mB); mB = null;
            if (mLine) ly_map.removeLayer(mLine); mLine = null;
          }

          function toggleMeasure() {
            measuring = !measuring;
            var stateSpan = document.getElementById('measure_state');
            stateSpan.textContent = measuring ? 'Activo' : 'Desactivado';
            stateSpan.style.color = measuring ? '#065f46' : '#991b1b';
            if (!measuring) {
              clearMeasure();
              ly_map.getContainer().style.cursor = '';
              return;
            }
            ly_map.getContainer().style.cursor = 'crosshair';
          }

          document.getElementById('btn_measure_toggle').addEventListener('click', toggleMeasure);

          ly_map.on('click', function(ev) {
            if (!measuring) return;
            if (!mA) {
              mA = L.marker(ev.latlng, { draggable:true, title:'Punto A' }).addTo(ly_map);
              mA.on('drag', updateMeasure);
            } else if (!mB) {
              mB = L.marker(ev.latlng, { draggable:true, title:'Punto B' }).addTo(ly_map);
              mB.on('drag', updateMeasure);
            } else {
              mB.setLatLng(ev.latlng);
            }
            updateMeasure();
          });

          // ---------- Abrir vista actual en Google Maps ----------
          function openInGoogleMaps() {
            var c = ly_map.getCenter();
            var z = ly_map.getZoom();
            var url = 'https://www.google.com/maps/@' + c.lat + ',' + c.lng + ',' + z + 'z';
            window.open(url, '_blank');
          }
          document.getElementById('btn_open_gmaps').addEventListener('click', openInGoogleMaps);
        });
      })();
    
</script>
</html>