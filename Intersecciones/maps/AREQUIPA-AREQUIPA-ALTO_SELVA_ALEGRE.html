<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_5c0362b96c69d514f6f5e7be8bc3fc01 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
</head>
<body>
    
    
    <style>
      .leaflet-interactive.zs-buffer { pointer-events: none !important; }

      .searchbar-wrap {
        position: fixed; right: 20px; bottom: 140px;
        z-index: 10000; background: rgba(255,255,255,0.95);
        border: 1px solid #e5e7eb;
        padding: 10px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        font-family: system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
        display: flex; flex-direction: column; gap: 8px; min-width: 300px; max-width: 92vw;
      }

      .searchbar-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
      .searchbar-title { font-weight: 700; font-size: 14px; color: #111827; }
      .toggle-btn { border: 0; border-radius: 8px; padding: 4px 10px; font-weight: 700; cursor: pointer; background: #111827; color: #fff; }
      .tools-body { display: flex; flex-direction: column; gap: 8px; }

      .row-flex { display:flex; gap:8px; align-items:center; }
      .col-flex { display:flex; flex-direction:column; gap:8px; }
      .row-flex input, .col-flex input { border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; font-size:13px; flex:1; }
      .row-flex button, .col-flex button { border:0; border-radius:8px; padding:6px 10px; font-weight:600; cursor:pointer; }
      .btn-dark  { background:#111827; color:#fff; }
      .btn-gray  { background:#6b7280; color:#fff; }
      .btn-green { background:#065f46; color:#fff; }
      .btn-red   { background:#991b1b; color:#fff; }
      .pill { font-size:12px; padding:4px 8px; border-radius:999px; }
      .dist-on-line { background: rgba(17,24,39,0.85); color: #fff; padding: 2px 6px; border-radius: 6px; font-size: 12px; border: 1px solid rgba(255,255,255,0.2); }

      .searchbar-wrap.collapsed { padding: 8px 10px; }
      .searchbar-wrap.collapsed .tools-body { display: none; }

      @media (max-width: 480px) {
        .searchbar-wrap { right: 12px; bottom: 12px; min-width: 240px; }
      }
    </style>
    
    
    <div style="
        position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
        z-index: 9999; background: rgba(255,255,255,0.9);
        padding: 8px 14px; border-radius: 8px; font-weight: 600;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;">
        AREQUIPA-AREQUIPA-ALTO_SELVA_ALEGRE
    </div>
    
    
    <div id="legend-box" style="
        position: fixed; bottom: 20px; right: 20px; z-index: 9999;
        background: rgba(255,255,255,0.9); padding: 10px 12px; border-radius: 8px;
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15); line-height: 1.4; min-width: 240px;">
        <div style="font-weight: 600; margin-bottom: 6px;">Leyenda</div>
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:4px;">
            <span style="display:inline-block; width:14px; height:14px; background:#1d4ed8; border-radius:50%;"></span>
            <span>Azul: Intersecci√≥n priorizada</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px;">
            <span style="display:inline-block; width:14px; height:14px; background:#d90429; border-radius:50%;"></span>
            <span>Rojo: Siniestro fatal</span>
        </div>
        <div style="display:flex; align-items:center; gap:8px; margin-top:6px;">
            <span style="display:inline-block; width:14px; height:14px; background:#f59e0b; border-radius:50%;"></span>
            <span>Amarillo: Coincidencia de b√∫squeda</span>
        </div>
    </div>
    
    
            <div class="folium-map" id="map_5c0362b96c69d514f6f5e7be8bc3fc01" ></div>
        
    
      <div class="searchbar-wrap" id="zs_tools">
        <div class="searchbar-header">
          <div class="searchbar-title">Herramientas</div>
          <button id="btn_toggle_box" class="toggle-btn" title="Mostrar/Ocultar">‚ØÜ Ocultar</button>
        </div>

        <div class="tools-body">
          <div class="col-flex">
            <input id="q_name" type="text" placeholder="Buscar por nombre">
            <input id="q_code" type="text" placeholder="Buscar por c√≥digo">
          </div>
          <div class="row-flex">
            <button id="btn_search" class="btn-dark">Buscar</button>
            <button id="btn_clear" class="btn-gray">Limpiar</button>
          </div>

          <hr style="border:none;border-top:1px solid #e5e7eb; margin:4px 0;">

          <div class="col-flex" title="Coordenadas en grados decimales">
            <input id="q_x" type="text" placeholder="Longitud Ejem: -77.15435">
            <div class="row-flex">
              <input id="q_y" type="text" placeholder="Latitud Ejem: -15.54648">
              <button id="btn_xy_go" class="btn-green" title="Centrar en coordenadas">üîç</button>
              <button id="btn_xy_clear" class="btn-red"   title="Quitar pin de coordenadas">‚úï</button>
            </div>
          </div>

          <div class="row-flex">
            <button id="btn_measure_toggle" class="btn-dark pill" title="Medir distancia">Medir distancia</button>
            <span id="measure_state" style="font-size:12px; color:#991b1b">Desactivado</span>
          </div>

          <div class="row-flex">
            <button id="btn_open_gmaps" class="btn-dark" title="Abrir esta vista en Google Maps">Abrir en Google Maps</button>
          </div>
        </div>
      </div>
    
</body>
<script>
    
    
            var map_5c0362b96c69d514f6f5e7be8bc3fc01 = L.map(
                "map_5c0362b96c69d514f6f5e7be8bc3fc01",
                {
                    center: [-16.363799200000003, -71.52076335],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 14,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );
            L.control.scale().addTo(map_5c0362b96c69d514f6f5e7be8bc3fc01);

            

        
    
            var tile_layer_b2dbb18f535aa7e81330dd66fd1115b6 = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 19,
  "maxNativeZoom": 19,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_b2dbb18f535aa7e81330dd66fd1115b6.addTo(map_5c0362b96c69d514f6f5e7be8bc3fc01);
        
    
            var feature_group_cc99c56ddcbe3cbcf8420e86bcbce511 = L.featureGroup(
                {
}
            );
        
    
        function geo_json_f8341328b338376a1cd097713a4e2854_styler(feature) {
            switch(feature.properties.IDDPTO) {
                default:
                    return {"color": "#222222", "fill": true, "fillColor": "#9ca3af", "fillOpacity": 0.3, "opacity": 1.0, "weight": 2.5};
            }
        }

        function geo_json_f8341328b338376a1cd097713a4e2854_onEachFeature(feature, layer) {

            layer.on({
            });
        };
        var geo_json_f8341328b338376a1cd097713a4e2854 = L.geoJson(null, {
                onEachFeature: geo_json_f8341328b338376a1cd097713a4e2854_onEachFeature,
            
                style: geo_json_f8341328b338376a1cd097713a4e2854_styler,
            ...{
}
        });

        function geo_json_f8341328b338376a1cd097713a4e2854_add (data) {
            geo_json_f8341328b338376a1cd097713a4e2854
                .addData(data);
        }
            geo_json_f8341328b338376a1cd097713a4e2854_add({"features": [{"geometry": {"coordinates": [[[[-71.45476535599988, -16.286247233999973], [-71.45357498099997, -16.286249108999982], [-71.45207210599989, -16.286043233999976], [-71.4506378559999, -16.286167108999962], [-71.44860085599993, -16.286575358999983], [-71.44787598099998, -16.286771733999956], [-71.44525910599992, -16.28669923299998], [-71.44454960599984, -16.28675835799993], [-71.44248960599992, -16.287195357999906], [-71.44142910599993, -16.287548108999886], [-71.43907923099994, -16.28847123399987], [-71.43772885599992, -16.289113983999982], [-71.43681335599996, -16.289934108999944], [-71.43566135599991, -16.289657608999903], [-71.43404385599996, -16.289270358999943], [-71.4328689809999, -16.289552733999926], [-71.43054960599994, -16.289531732999876], [-71.42929835599995, -16.289884607999966], [-71.42517085599997, -16.29042035899994], [-71.42105098099995, -16.292070357999876], [-71.41901398099998, -16.29345698399993], [-71.41652698099989, -16.294660608999948], [-71.41410823099989, -16.295576108999967], [-71.4119338559999, -16.296007108999902], [-71.41060635599996, -16.29621123399994], [-71.41107923099992, -16.29668048399992], [-71.41139985599989, -16.29692073399991], [-71.4117661059999, -16.297189732999982], [-71.41219335599999, -16.297510108999916], [-71.41287235599987, -16.298095733999958], [-71.41393285599986, -16.298812858999895], [-71.42507173099983, -16.305084233999935], [-71.42787173099987, -16.308546107999916], [-71.43069448099999, -16.31295585899983], [-71.43460848099994, -16.317275983999934], [-71.43564610599998, -16.317867233999948], [-71.44224548099999, -16.320508983999957], [-71.44522860599989, -16.322399108999832], [-71.44584660599986, -16.32313535899982], [-71.44620510599992, -16.32402798399994], [-71.44638060599988, -16.32467835899996], [-71.4461593559999, -16.326692608999963], [-71.4461593559999, -16.327333483999894], [-71.44652560599991, -16.327903608999975], [-71.44690698099993, -16.328172733999963], [-71.44790648099996, -16.32858848399991], [-71.44947810599996, -16.329702358999953], [-71.45093535599989, -16.33037760899998], [-71.45131685599995, -16.33069985899988], [-71.45282748099999, -16.332353608999938], [-71.45500948099993, -16.334051108999972], [-71.45616135599994, -16.334649983999952], [-71.45661923099982, -16.334991483999886], [-71.4575347309999, -16.33582498399994], [-71.45855710599994, -16.336933108999972], [-71.45941160599995, -16.337486233999982], [-71.4606553559999, -16.337926858999936], [-71.46157835599996, -16.33840560899995], [-71.46217348099992, -16.338901482999916], [-71.46292873099998, -16.34024423399984], [-71.4637374809999, -16.341047233999916], [-71.46475223099986, -16.34228323399998], [-71.46666723099986, -16.344209608999904], [-71.46702573099992, -16.344644608999943], [-71.46740723099998, -16.344970858999943], [-71.46795648099993, -16.345739358999936], [-71.46800235599994, -16.34575460899987], [-71.4690704809999, -16.346692983999958], [-71.46932998099999, -16.34704785899993], [-71.47012323099989, -16.347789733999946], [-71.47038273099997, -16.348152108999898], [-71.47097010599998, -16.348607983999955], [-71.47145848099996, -16.349079108999945], [-71.4731063559999, -16.351282108999953], [-71.47412873099995, -16.352209108999944], [-71.47500610599997, -16.352901483999915], [-71.4782104819999, -16.355848358999935], [-71.47972873099991, -16.35673523399987], [-71.48256685599989, -16.35796360899991], [-71.48561860599989, -16.359714482999834], [-71.48658748099996, -16.360193233999837], [-71.48663335599991, -16.36021223399996], [-71.48805235599991, -16.360773108999922], [-71.48908998199988, -16.361381483999935], [-71.48971560599995, -16.36184123399994], [-71.49075323099993, -16.362821607999877], [-71.49195098099983, -16.364463858999954], [-71.49388135699996, -16.366205233999892], [-71.4941558559999, -16.366453108999963], [-71.49475098099987, -16.36686710899994], [-71.49575810599998, -16.367170358999886], [-71.49655910699988, -16.367532858999937], [-71.49767298199987, -16.368324233999886], [-71.49856573099993, -16.369258858999956], [-71.49889373099995, -16.369489608999857], [-71.49952698099997, -16.36973573399996], [-71.49999998099992, -16.369823483999937], [-71.50074773099988, -16.369626983999922], [-71.50116735599988, -16.36968610899993], [-71.50170898099992, -16.369678483999962], [-71.50236510599996, -16.369853983999974], [-71.50323485599989, -16.37048535899993], [-71.50343310599993, -16.370559733999926], [-71.50491335599997, -16.37170785899997], [-71.50672148099989, -16.372686358999943], [-71.50784298099995, -16.373447358999954], [-71.50893398099998, -16.374326733999965], [-71.50986485599992, -16.374875983999914], [-71.5117111059999, -16.37632760899993], [-71.51297760599988, -16.377487233999886], [-71.51311498099989, -16.377721608999934], [-71.51358798099994, -16.378152857999964], [-71.51423648099995, -16.379041733999884], [-71.51437373099998, -16.379833233999932], [-71.51438898099997, -16.380384608999975], [-71.51477810599994, -16.38138385799988], [-71.51506810599994, -16.38175960899997], [-71.51630398099996, -16.382957483999974], [-71.51663973099994, -16.383230233999882], [-71.51670073099996, -16.383476233999886], [-71.51702123099989, -16.38408273399989], [-71.51773835599988, -16.38501735899996], [-71.51837160599996, -16.385318733999952], [-71.51912685599996, -16.38558385899995], [-71.51983648099997, -16.385774608999895], [-71.52002698099989, -16.385869983999896], [-71.5203628569999, -16.386146483999937], [-71.52084348099987, -16.38677410899993], [-71.52126310599994, -16.387212732999956], [-71.52182010599995, -16.387470108999935], [-71.52262873099988, -16.387727733999952], [-71.52320098099989, -16.388069108999957], [-71.52390285599995, -16.38866248399995], [-71.52473448099994, -16.389574108999966], [-71.52526860599988, -16.389814358999956], [-71.52599348099994, -16.389942108999946], [-71.52758785599997, -16.3903656089999], [-71.52858785599989, -16.39054648399997], [-71.52861210599997, -16.390485358999968], [-71.52876885599994, -16.390264483999886], [-71.5288044809999, -16.390036608999935], [-71.52876910599997, -16.38986373399996], [-71.52874748099998, -16.389758608999955], [-71.52860498099989, -16.389445233999936], [-71.52857648099996, -16.389238608999904], [-71.5287403559999, -16.3889251089999], [-71.52875598099996, -16.388893733999964], [-71.52891848099989, -16.388568983999846], [-71.52896110599988, -16.388528858999962], [-71.52901535699993, -16.388439733999974], [-71.52916060599995, -16.388340983999967], [-71.5294099809999, -16.38814860899987], [-71.52958098099992, -16.387984732999882], [-71.52980185599989, -16.3876357339999], [-71.52993010599994, -16.38746460899995], [-71.5300938559999, -16.387350733999938], [-71.5304073559999, -16.38723673399994], [-71.53079210699997, -16.38716548399998], [-71.53121948099994, -16.387108483999953], [-71.53183210599991, -16.386987483999974], [-71.53221210699985, -16.3869147339999], [-71.53266748099998, -16.386896608999848], [-71.53317748199999, -16.38671435899994], [-71.53337773099992, -16.38649585899998], [-71.5333959809999, -16.38624085899994], [-71.53330498099996, -16.38569448399994], [-71.53310460599988, -16.384965858999976], [-71.53270385599996, -16.3836727339999], [-71.53221210599992, -16.382616358999883], [-71.53197535599998, -16.38186960899992], [-71.53179323099994, -16.380813108999916], [-71.53179323099994, -16.379811358999973], [-71.5317749809999, -16.378281483999956], [-71.53158398099993, -16.377089858999966], [-71.53119923099996, -16.37659573399992], [-71.53060010599995, -16.376270108999904], [-71.53022948099994, -16.376210358999913], [-71.53008610599989, -16.376066858999877], [-71.53012185599994, -16.3759233589999], [-71.53048048099993, -16.37551710899993], [-71.53067898099994, -16.375327608999896], [-71.53074348099994, -16.37526610899988], [-71.53114448099996, -16.37489260899997], [-71.53171748099993, -16.37458973399987], [-71.53231048099997, -16.37428910899996], [-71.53272073099998, -16.37400385899997], [-71.53313873099995, -16.373396483999898], [-71.5339808569999, -16.371274108999955], [-71.53417185599989, -16.370673858999965], [-71.53472085599992, -16.36834960899995], [-71.53474023099994, -16.3675644839999], [-71.53557135699998, -16.367351858999882], [-71.53622435599982, -16.368303358999924], [-71.53625485599986, -16.368022858999893], [-71.53635410599998, -16.36763948399988], [-71.53637698099993, -16.36733823399993], [-71.53667448099992, -16.36636348299993], [-71.53685748099997, -16.365463233999947], [-71.53707885599982, -16.36308860899993], [-71.5370864809999, -16.36246873399989], [-71.5370102309999, -16.361736358999963], [-71.5370102309999, -16.360359233999873], [-71.53707885599982, -16.359332983999877], [-71.53664398099988, -16.357164358999967], [-71.53678898099997, -16.356424358999902], [-71.53726960599988, -16.354892733999918], [-71.53735348099997, -16.354286233999915], [-71.53726960599988, -16.353467983999906], [-71.53682710599998, -16.35165210899993], [-71.53669748099998, -16.35072323399993], [-71.53649135599989, -16.348207483999943], [-71.53601835599983, -16.344276483999977], [-71.53607173099988, -16.343131983999854], [-71.53613285599988, -16.342742858999884], [-71.5361557309999, -16.34142498299991], [-71.53605648099995, -16.34044648399987], [-71.53603360599993, -16.33959573399983], [-71.53581235599984, -16.33842273399995], [-71.53563685599988, -16.337833358999944], [-71.5351714809999, -16.33660510899989], [-71.53495785599983, -16.335645733999854], [-71.53456873099998, -16.333450358999926], [-71.53427110599995, -16.33276748399993], [-71.53395073099989, -16.332246733999966], [-71.53268435599995, -16.33069223399997], [-71.53180698199998, -16.329433482999946], [-71.53144835599988, -16.328845983999884], [-71.53015898099994, -16.327142733999835], [-71.52994535599998, -16.326925233999873], [-71.5281906059999, -16.325521483999978], [-71.52678685599994, -16.324531608999962], [-71.52603910599998, -16.32409473399997], [-71.52543648099993, -16.323869733999913], [-71.52501673099994, -16.323781983999936], [-71.52445223099994, -16.32373423399997], [-71.52332310599996, -16.32341385899997], [-71.52211760599994, -16.322915983999962], [-71.52125548099986, -16.322446858999967], [-71.52019498099986, -16.321660983999948], [-71.51982110599994, -16.321426357999883], [-71.51885223099998, -16.320636733999947], [-71.51799010599996, -16.319782233999945], [-71.51725773099992, -16.318809483999928], [-71.51702123099989, -16.318582483999876], [-71.51643373099995, -16.318401358999893], [-71.51549535599986, -16.31824873399995], [-71.51425935599991, -16.31797223399991], [-71.51322160599995, -16.317834983999944], [-71.51280210599992, -16.31777760899996], [-71.51202398099997, -16.317369483999983], [-71.5117873559999, -16.31720923399996], [-71.51116948099997, -16.31678385899994], [-71.5077896059999, -16.31556710899997], [-71.50672148099989, -16.314876607999963], [-71.50620273099997, -16.31438635899997], [-71.50576785599998, -16.31356235899989], [-71.50570673099998, -16.313341108999907], [-71.50543973099997, -16.312828108999895], [-71.50463873099994, -16.311769483999967], [-71.50438698099993, -16.311538733999896], [-71.50415798099988, -16.311418483999887], [-71.5035399809999, -16.31131360799992], [-71.50250248099996, -16.311412858999972], [-71.50131223099999, -16.31138998399996], [-71.50082398099988, -16.311300233999873], [-71.49999998099992, -16.311265982999885], [-71.49958035599997, -16.31124873399989], [-71.49860385599999, -16.311208732999944], [-71.49628448099992, -16.31080823399992], [-71.49485010599989, -16.310884483999928], [-71.49445348099994, -16.3107433589999], [-71.49424748099995, -16.310613608999915], [-71.49388885699994, -16.31038285799991], [-71.49316423199991, -16.309724858999914], [-71.49295048099992, -16.309345233999863], [-71.49206548099988, -16.30659673399998], [-71.49153135599994, -16.305582108999886], [-71.4910278559999, -16.30496973299995], [-71.49026485599995, -16.30453110899998], [-71.48963160599993, -16.304328858999952], [-71.48934173099985, -16.30423360899988], [-71.48680098099993, -16.304252607999956], [-71.48587035599996, -16.303987608999932], [-71.48512273099993, -16.30357173399989], [-71.48471073099995, -16.303159732999916], [-71.48448185699993, -16.302926983999953], [-71.48384860599992, -16.30207248399995], [-71.4827576059999, -16.300277733999962], [-71.4826431059999, -16.30018998399987], [-71.4822082309999, -16.299394608999876], [-71.48136135599998, -16.29823110899997], [-71.48081210599986, -16.297836358999916], [-71.48034673099988, -16.297697107999966], [-71.47946935599987, -16.297435733999976], [-71.47810360599993, -16.296592733999944], [-71.47747798099994, -16.295913733999896], [-71.47628785599989, -16.29482273399998], [-71.47520448099993, -16.29392623399997], [-71.4747391059999, -16.29250148299991], [-71.4745331069999, -16.292186733999927], [-71.47438048099997, -16.291942608999875], [-71.47392273099996, -16.291637358999935], [-71.47321323099993, -16.2914772339999], [-71.47040548099989, -16.29123498399997], [-71.46894835599994, -16.291496233999965], [-71.4675522309999, -16.29196160799995], [-71.46596523099993, -16.29218098399997], [-71.4657287309999, -16.292108483999925], [-71.46527098099995, -16.291971108999917], [-71.46472173099983, -16.29151535899996], [-71.46435548099998, -16.29102710899997], [-71.46406560599996, -16.290372857999955], [-71.46363835599988, -16.28964423399998], [-71.46227260599994, -16.289031983999905], [-71.4615936059999, -16.288354858999924], [-71.46118160599991, -16.288030608999918], [-71.46099085599997, -16.287757858999953], [-71.46078485599998, -16.28686335899988], [-71.46035760599995, -16.285995483999955], [-71.46022798099989, -16.2849922339999], [-71.46007535599995, -16.284526858999925], [-71.45951085599995, -16.284511608999935], [-71.45874023099998, -16.284671733999915], [-71.45835110599995, -16.284826233999922], [-71.45623773099987, -16.28596685899987], [-71.45476535599988, -16.286247233999973]]]], "type": "MultiPolygon"}, "properties": {"AREA": 1, "CAPITAL": "SELVA ALEGRE", "CODCCPP": "0001", "DEPARTAMEN": "AREQUIPA", "DISTRITO": "ALTO SELVA ALEGRE", "FUENTE": "INEI", "IDDIST": "040102", "IDDPTO": "04", "IDPROV": "0401", "PROVINCIA": "AREQUIPA"}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_f8341328b338376a1cd097713a4e2854.addTo(feature_group_cc99c56ddcbe3cbcf8420e86bcbce511);
        
    
            feature_group_cc99c56ddcbe3cbcf8420e86bcbce511.addTo(map_5c0362b96c69d514f6f5e7be8bc3fc01);
        
    
            var feature_group_36140d528becbf1403d4930b06600a04 = L.featureGroup(
                {
}
            );
        
    
            var circle_ff1b9a00ca9a8038ae7c1e8003538cc0 = L.circle(
                [-16.365769, -71.5243462],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_36140d528becbf1403d4930b06600a04);
        
    
            var circle_bde05195f54bb216d62b65d47b930ce8 = L.circle(
                [-16.3618294, -71.5171805],
                {"bubblingMouseEvents": true, "className": "zs-buffer", "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 0.5, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 50, "stroke": true, "weight": 2}
            ).addTo(feature_group_36140d528becbf1403d4930b06600a04);
        
    
            feature_group_36140d528becbf1403d4930b06600a04.addTo(map_5c0362b96c69d514f6f5e7be8bc3fc01);
        
    
            var feature_group_c8556f06ac752d88fa7c51acfe98d5f8 = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_d1ea4de5f8db64642b1098affb9dd0d0 = L.circleMarker(
                [-16.365769, -71.5243462],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c8556f06ac752d88fa7c51acfe98d5f8);
        
    
        var popup_101651d7830990582bd7a35b05363823 = L.popup({
  "maxWidth": 460,
});

        
            
                var html_b664e54176d45d9b5e0160c886359785 = $(`<div id="html_b664e54176d45d9b5e0160c886359785" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-75854</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-16.365769</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-71.5243462</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>Avenida Francisco Mostajo / Calle Mariano Melgar</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>1</td></tr></table></div></div>`)[0];
                popup_101651d7830990582bd7a35b05363823.setContent(html_b664e54176d45d9b5e0160c886359785);
            
        

        circle_marker_d1ea4de5f8db64642b1098affb9dd0d0.bindPopup(popup_101651d7830990582bd7a35b05363823)
        ;

        
    
    
            circle_marker_d1ea4de5f8db64642b1098affb9dd0d0.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            var circle_marker_958e9a44aced9d97fe3cca8f435eccf3 = L.circleMarker(
                [-16.3618294, -71.5171805],
                {"bubblingMouseEvents": true, "color": "#1d4ed8", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#1d4ed8", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_c8556f06ac752d88fa7c51acfe98d5f8);
        
    
        var popup_defe5c39063ea9ad97bd737e04c8cbaa = L.popup({
  "maxWidth": 460,
});

        
            
                var html_ceac9e9511c5bcb493cfe5bb945434f9 = $(`<div id="html_ceac9e9511c5bcb493cfe5bb945434f9" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Intersecci√≥n priorizada</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>id_int</th><td style='padding:2px 0;'>l-75870</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>latitud</th><td style='padding:2px 0;'>-16.3618294</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>longitud</th><td style='padding:2px 0;'>-71.5171805</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>vias</th><td style='padding:2px 0;'>Avenida Francisco Mostajo / Pasaje Sanchez Cerro</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>siniestro_fatal</th><td style='padding:2px 0;'>1</td></tr></table></div></div>`)[0];
                popup_defe5c39063ea9ad97bd737e04c8cbaa.setContent(html_ceac9e9511c5bcb493cfe5bb945434f9);
            
        

        circle_marker_958e9a44aced9d97fe3cca8f435eccf3.bindPopup(popup_defe5c39063ea9ad97bd737e04c8cbaa)
        ;

        
    
    
            circle_marker_958e9a44aced9d97fe3cca8f435eccf3.bindTooltip(
                `<div>
                      | 
                 </div>`,
                {
  "opacity": 0,
  "sticky": false,
}
            );
        
    
            feature_group_c8556f06ac752d88fa7c51acfe98d5f8.addTo(map_5c0362b96c69d514f6f5e7be8bc3fc01);
        
    
            var feature_group_2639288fec4f93d302af1a0a32dd4f0d = L.featureGroup(
                {
}
            );
        
    
            var circle_marker_3abccc1747d9c88001107e733e2cebfa = L.circleMarker(
                [-16.365746, -71.524349],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_2639288fec4f93d302af1a0a32dd4f0d);
        
    
        var popup_380e90afe8318d3442cfa155e4fcefc7 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_cf4f8ba406d169469dbdd5b2d363a8e7 = $(`<div id="html_cf4f8ba406d169469dbdd5b2d363a8e7" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2021-10-108</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>21/10/2021</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>19:10</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>CHOQUE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>CHOQUE FATAL</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AV. FRANSCISCO MOSTAJO/ CALLE MARIANO MELGAR</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>CENTRO DE SALUD DE INDEPENDENCIA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-16.365746</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-71.524349</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>SIN OBSERVACIONES</td></tr></table></div></div>`)[0];
                popup_380e90afe8318d3442cfa155e4fcefc7.setContent(html_cf4f8ba406d169469dbdd5b2d363a8e7);
            
        

        circle_marker_3abccc1747d9c88001107e733e2cebfa.bindPopup(popup_380e90afe8318d3442cfa155e4fcefc7)
        ;

        
    
    
            var circle_marker_953e5c142ba859d084816429fc7cbbf9 = L.circleMarker(
                [-16.383402, -71.517994],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_2639288fec4f93d302af1a0a32dd4f0d);
        
    
        var popup_1a9ca32859fb83b6660120e38c593e16 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_68aa097050290eda23e89c0354d43af1 = $(`<div id="html_68aa097050290eda23e89c0354d43af1" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2023-03-12</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>03/03/2023</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>07:00</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ESPECIAL</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>COMPRIME CABEZA CONTRA POSTE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>ASOCIACION SAN HILARION MZ C LOTE 11 SELVA ALEGRE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>LOTE 11 DE LA MZ C</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-16.383402</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-71.517994</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>S/O</td></tr></table></div></div>`)[0];
                popup_1a9ca32859fb83b6660120e38c593e16.setContent(html_68aa097050290eda23e89c0354d43af1);
            
        

        circle_marker_953e5c142ba859d084816429fc7cbbf9.bindPopup(popup_1a9ca32859fb83b6660120e38c593e16)
        ;

        
    
    
            var circle_marker_66dedd729bd1f64a81eb2a2525dbcaca = L.circleMarker(
                [-16.362033, -71.517563],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_2639288fec4f93d302af1a0a32dd4f0d);
        
    
        var popup_bf43ceb82c6a611f908f28ba0fa1da53 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_777014d553b65b39c4a4e6f7e5718182 = $(`<div id="html_777014d553b65b39c4a4e6f7e5718182" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2024-06-54</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>24/06/2024</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>18:30</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>ATROPELLO POR APLASTAMIENTO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AV. FRANCISCO MOSTAJO CUADRA 14 DEL PPJJ INDEPENDENCIA DEL DISTRITO DE ALTO SELVA ALEGRE</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'>SIN REFERENCIA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-16.362033</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-71.517563</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>NO IDENTIFICA LA CAUSA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'>EN INVESTIGACION</td></tr></table></div></div>`)[0];
                popup_bf43ceb82c6a611f908f28ba0fa1da53.setContent(html_777014d553b65b39c4a4e6f7e5718182);
            
        

        circle_marker_66dedd729bd1f64a81eb2a2525dbcaca.bindPopup(popup_bf43ceb82c6a611f908f28ba0fa1da53)
        ;

        
    
    
            var circle_marker_507a2e00f2972d3f78eac5a50b3acfe4 = L.circleMarker(
                [-16.377715, -71.51412],
                {"bubblingMouseEvents": true, "color": "#d90429", "dashArray": null, "dashOffset": null, "fill": true, "fillColor": "#d90429", "fillOpacity": 1.0, "fillRule": "evenodd", "lineCap": "round", "lineJoin": "round", "opacity": 1.0, "radius": 5, "stroke": true, "weight": 2}
            ).addTo(feature_group_2639288fec4f93d302af1a0a32dd4f0d);
        
    
        var popup_ab29ba029b5eb50b70be18b8c5b49109 = L.popup({
  "maxWidth": 480,
});

        
            
                var html_dc58980169c2d7e46bcc46e29e7fef22 = $(`<div id="html_dc58980169c2d7e46bcc46e29e7fef22" style="width: 100.0%; height: 100.0%;"><div style='font-size:12px;'><div style='font-weight:700; margin-bottom:6px;'>Siniestro fatal</div><table style='border-collapse:collapse;'><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>COD_ACCIDE</th><td style='padding:2px 0;'>A-2024-09-50</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>FechaDelAccidente</th><td style='padding:2px 0;'>22/09/2024</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>HoraDelAccidente</th><td style='padding:2px 0;'>08:16</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>ClaseDelAccidente</th><td style='padding:2px 0;'>ATROPELLO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>SecuenciaAccidente</th><td style='padding:2px 0;'>ATROPELLO CON CONSECUENCIA FATAL Y DA√ëOS MATERIALES</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeFallecidos</th><td style='padding:2px 0;'>1</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CantidadDeLesionados</th><td style='padding:2px 0;'>0</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Direccion</th><td style='padding:2px 0;'>AV. BRASIL CUADRA 6 </td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>LugarReferencia</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>y</th><td style='padding:2px 0;'>-16.377715</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>x</th><td style='padding:2px 0;'>-71.51412</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CondClimatica</th><td style='padding:2px 0;'>DESPEJADO</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaFactorPrincipal</th><td style='padding:2px 0;'>EN PROCESO DE INVESTIGACI√ìN</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>CausaEspecifica</th><td style='padding:2px 0;'>NO CUENTA CON CAUSA ESPECIFICA</td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>OtraCausa</th><td style='padding:2px 0;'></td></tr><tr><th style='text-align:left; padding:2px 8px 2px 0; white-space:nowrap;'>Observaciones</th><td style='padding:2px 0;'></td></tr></table></div></div>`)[0];
                popup_ab29ba029b5eb50b70be18b8c5b49109.setContent(html_dc58980169c2d7e46bcc46e29e7fef22);
            
        

        circle_marker_507a2e00f2972d3f78eac5a50b3acfe4.bindPopup(popup_ab29ba029b5eb50b70be18b8c5b49109)
        ;

        
    
    
            feature_group_2639288fec4f93d302af1a0a32dd4f0d.addTo(map_5c0362b96c69d514f6f5e7be8bc3fc01);
        
    
            map_5c0362b96c69d514f6f5e7be8bc3fc01.fitBounds(
                [[-16.365769, -71.5243462], [-16.3618294, -71.5171805]],
                {}
            );
        
    
            var layer_control_3285667822083d4152b7b019c2cf21b8_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_b2dbb18f535aa7e81330dd66fd1115b6,
                },
                overlays :  {
                    "contorno" : feature_group_cc99c56ddcbe3cbcf8420e86bcbce511,
                    "intersecciones: buffers (50m)" : feature_group_36140d528becbf1403d4930b06600a04,
                    "intersecciones: puntos" : feature_group_c8556f06ac752d88fa7c51acfe98d5f8,
                    "siniestros fatales" : feature_group_2639288fec4f93d302af1a0a32dd4f0d,
                },
            };
            let layer_control_3285667822083d4152b7b019c2cf21b8 = L.control.layers(
                layer_control_3285667822083d4152b7b019c2cf21b8_layers.base_layers,
                layer_control_3285667822083d4152b7b019c2cf21b8_layers.overlays,
                {
  "position": "topright",
  "collapsed": true,
  "autoZIndex": true,
}
            ).addTo(map_5c0362b96c69d514f6f5e7be8bc3fc01);

        
    
        feature_group_c8556f06ac752d88fa7c51acfe98d5f8.bringToFront();
        feature_group_2639288fec4f93d302af1a0a32dd4f0d.bringToFront();
    
    
      (function() {
        var puntosLayer = feature_group_c8556f06ac752d88fa7c51acfe98d5f8;
        var defaultColor = '#1d4ed8';
        var hiliteColor  = '#f59e0b';

        // ---------- Toggle colapsar/expandir ----------
        var box = document.getElementById('zs_tools');
        var btnToggle = document.getElementById('btn_toggle_box');
        var saved = null;
        try { saved = localStorage.getItem('zs_tools_collapsed'); } catch(e) {}
        if (saved === '1') {
          box.classList.add('collapsed');
          btnToggle.textContent = '‚Øà Mostrar';
        }
        function toggleBox() {
          var collapsed = box.classList.toggle('collapsed');
          btnToggle.textContent = collapsed ? '‚Øà Mostrar' : '‚ØÜ Ocultar';
          try { localStorage.setItem('zs_tools_collapsed', collapsed ? '1' : '0'); } catch(e) {}
        }
        btnToggle.addEventListener('click', toggleBox);

        // ---------- Esperar a que el mapa est√© disponible ----------
        var ly_map = null;
        function ensureMap(cb) {
          var tries = 0;
          (function wait() {
            ly_map = (puntosLayer && puntosLayer._map) ? puntosLayer._map : null;
            if (ly_map) { cb(); return; }
            if (tries++ < 80) { setTimeout(wait, 50); }
          })();
        }

        ensureMap(function initTools() {
          // ---------- Utilidades ----------
          function eachMarker(fn) {
            if (!puntosLayer || !puntosLayer._layers) return;
            Object.values(puntosLayer._layers).forEach(function(ly) {
              if (ly && typeof ly.setStyle === 'function') fn(ly);
            });
          }

          function getTooltipText(ly) {
            try {
              var t = ly.getTooltip();
              return t ? String(t.getContent() || '').toLowerCase() : '';
            } catch(e) { return ''; }
          }

          function clearHighlights() {
            eachMarker(function(ly) {
              ly.setStyle({ color: defaultColor, fillColor: defaultColor });
            });
          }

          // ---------- B√∫squeda ----------
          function searchAndHighlight() {
            var qn_raw = (document.getElementById('q_name').value || '');
            var qc_raw = (document.getElementById('q_code').value || '');
            var qn = qn_raw.toLowerCase();
            var qc = qc_raw.toLowerCase();

            var useName = qn_raw.trim().length > 0;
            var useCode = qc_raw.trim().length > 0;

            clearHighlights();
            if (!useName && !useCode) return;

            var matchedLatLngs = [];
            eachMarker(function(ly) {
              var txt = getTooltipText(ly); // "nombre | codigo"
              var parts = txt.split('|', 2);
              var nameTxt = (parts[0] || '').trim();
              var codeTxt = (parts[1] || '').trim();

              var matchName = useName ? (nameTxt.indexOf(qn) !== -1) : false;
              var matchCode = useCode ? (codeTxt.indexOf(qc) !== -1) : false;

              if (matchName || matchCode) {
                ly.setStyle({ color: hiliteColor, fillColor: hiliteColor });
                if (ly.getLatLng) matchedLatLngs.push(ly.getLatLng());
              }
            });

            if (matchedLatLngs.length > 0) {
              var group = L.featureGroup(matchedLatLngs.map(function(ll) { return L.marker(ll); }));
              try { ly_map.fitBounds(group.getBounds().pad(0.2)); } catch(e) {}
            }
          }

          document.getElementById('btn_search').addEventListener('click', searchAndHighlight);
          document.getElementById('btn_clear').addEventListener('click', function() {
            document.getElementById('q_name').value = '';
            document.getElementById('q_code').value = '';
            clearHighlights();
          });
          ['q_name','q_code'].forEach(function(id) {
            var el = document.getElementById(id);
            el.addEventListener('keydown', function(ev) { if (ev.key === 'Enter') searchAndHighlight(); });
          });

          // ---------- Pin por coordenadas ----------
          var coordLayer = L.layerGroup().addTo(ly_map);
          function goToXY() {
            var x = parseFloat((document.getElementById('q_x').value || '').replace(',', '.'));
            var y = parseFloat((document.getElementById('q_y').value || '').replace(',', '.'));
            if (!isFinite(x) || !isFinite(y)) return;
            coordLayer.clearLayers();
            var mk = L.marker([y, x], { draggable:false, title: 'Punto (Y,X): '+y+', '+x });
            mk.addTo(coordLayer);
            ly_map.setView([y, x], Math.max(ly_map.getZoom(), 17));
          }
          function clearXY() { coordLayer.clearLayers(); }
          document.getElementById('btn_xy_go').addEventListener('click', goToXY);
          document.getElementById('btn_xy_clear').addEventListener('click', clearXY);

          // ---------- Medici√≥n ----------
          var measuring = false;
          var mA = null, mB = null, mLine = null;

          function haversine(lat1, lon1, lat2, lon2) {
            var R = 6371000;
            var dLat = (lat2-lat1) * Math.PI/180;
            var dLon = (lon2-lon1) * Math.PI/180;
            var a = Math.sin(dLat/2)*Math.sin(dLat/2) +
                    Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180) *
                    Math.sin(dLon/2)*Math.sin(dLon/2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
          }

          function updateMeasure() {
            if (!(mA && mB)) return;
            var a = mA.getLatLng(), b = mB.getLatLng();
            var d = haversine(a.lat, a.lng, b.lat, b.lng);
            var txt = (d >= 1000) ? (d/1000).toFixed(3)+' km' : Math.round(d)+' m';

            if (!mLine) {
              mLine = L.polyline([a, b], { color: '#111827', weight: 3, dashArray: '6,4' })
                .bindTooltip(txt, { permanent:true, direction:'center', className:'dist-on-line' })
                .addTo(ly_map);
            } else {
              mLine.setLatLngs([a, b]);
              mLine.setTooltipContent(txt);
            }
          }

          function clearMeasure() {
            if (mA) ly_map.removeLayer(mA); mA = null;
            if (mB) ly_map.removeLayer(mB); mB = null;
            if (mLine) ly_map.removeLayer(mLine); mLine = null;
          }

          function toggleMeasure() {
            measuring = !measuring;
            var stateSpan = document.getElementById('measure_state');
            stateSpan.textContent = measuring ? 'Activo' : 'Desactivado';
            stateSpan.style.color = measuring ? '#065f46' : '#991b1b';
            if (!measuring) {
              clearMeasure();
              ly_map.getContainer().style.cursor = '';
              return;
            }
            ly_map.getContainer().style.cursor = 'crosshair';
          }

          document.getElementById('btn_measure_toggle').addEventListener('click', toggleMeasure);

          ly_map.on('click', function(ev) {
            if (!measuring) return;
            if (!mA) {
              mA = L.marker(ev.latlng, { draggable:true, title:'Punto A' }).addTo(ly_map);
              mA.on('drag', updateMeasure);
            } else if (!mB) {
              mB = L.marker(ev.latlng, { draggable:true, title:'Punto B' }).addTo(ly_map);
              mB.on('drag', updateMeasure);
            } else {
              mB.setLatLng(ev.latlng);
            }
            updateMeasure();
          });

          // ---------- Abrir vista actual en Google Maps ----------
          function openInGoogleMaps() {
            var c = ly_map.getCenter();
            var z = ly_map.getZoom();
            var url = 'https://www.google.com/maps/@' + c.lat + ',' + c.lng + ',' + z + 'z';
            window.open(url, '_blank');
          }
          document.getElementById('btn_open_gmaps').addEventListener('click', openInGoogleMaps);
        });
      })();
    
</script>
</html>